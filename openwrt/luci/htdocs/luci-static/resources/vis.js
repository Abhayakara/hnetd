/*

 Copyright (C) 2011-2014 Almende B.V, http://almende.com

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy
 of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.
*/
!function(pa){if("object"==typeof exports)module.exports=pa();else if("function"==typeof define&&define.amd)define(pa);else{var B;"undefined"!=typeof window?B=window:"undefined"!=typeof global?B=global:"undefined"!=typeof self&&(B=self);B.vis=pa()}}(function(){return function B(M,O,m){function u(d,K){if(!O[d]){if(!M[d]){var C="function"==typeof require&&require;if(!K&&C)return C(d,!0);if(k)return k(d,!0);throw Error("Cannot find module '"+d+"'");}C=O[d]={exports:{}};M[d][0].call(C.exports,function(f){var h=
M[d][1][f];return u(h?h:f)},C,C.exports,B,M,O,m)}return O[d].exports}for(var k="function"==typeof require&&require,d=0;d<m.length;d++)u(m[d]);return u}({1:[function(B,M,O){function m(d,a){this.id=l.randomUUID();!d||Array.isArray(d)||l.isDataTable(d)||(a=d,d=null);this.options=a||{};this.data={};this.fieldId=this.options.fieldId||"id";this.convert={};this.showInternalIds=this.options.showInternalIds||!1;if(this.options.convert)for(var b in this.options.convert)if(this.options.convert.hasOwnProperty(b)){var c=
this.options.convert[b];this.convert[b]="Date"==c||"ISODate"==c||"ASPDate"==c?"Date":c}this.subscribers={};this.internalIds={};d&&this.add(d)}function u(d,a){this.id=l.randomUUID();this.data=null;this.ids={};this.options=a||{};this.fieldId="id";this.subscribers={};var b=this;this.listener=function(){b._onEvent.apply(b,arguments)};this.setData(d)}function k(d,a,b){this.current=new Date;this._start=new Date;this._end=new Date;this.autoScale=!0;this.scale=k.SCALE.DAY;this.step=1;this.setRange(d,a,b)}
function d(d,a,b){this.id=l.randomUUID();this.end=this.start=null;this.root=d;this.parent=a;this.options=b||{};this.root.on("dragstart",this._onDragStart.bind(this));this.root.on("drag",this._onDrag.bind(this));this.root.on("dragend",this._onDragEnd.bind(this));this.root.on("hold",this._onHold.bind(this));this.root.on("mousewheel",this._onMouseWheel.bind(this));this.root.on("DOMMouseScroll",this._onMouseWheel.bind(this));this.root.on("touch",this._onTouch.bind(this));this.root.on("pinch",this._onPinch.bind(this));
this.setOptions(b)}function ca(d){if("horizontal"!=d&&"vertical"!=d)throw new TypeError('Unknown direction "'+d+'". Choose "horizontal" or "vertical".');}function K(d,a){return{x:d.pageX-T.util.getAbsoluteLeft(a),y:d.pageY-T.util.getAbsoluteTop(a)}}function C(){this.options=this.childs=this.parent=this.id=null;this.height=this.width=this.left=this.top=0}function f(d){this.id=l.randomUUID();this.parent=null;this.childs=[];this.options=d||{};this.frame="undefined"!==typeof document?document.createElement("div"):
null}function h(d,a){this.id=l.randomUUID();this.container=d;this.options=a||{};this.defaultOptions={autoResize:!0};this._create();if(!this.container)throw Error("Cannot repaint root panel: no container attached");this.container.appendChild(this.getFrame());this._initWatch()}function v(d){this.id=l.randomUUID();this.dom={majorLines:[],majorTexts:[],minorLines:[],minorTexts:[],redundant:{majorLines:[],majorTexts:[],minorLines:[],minorTexts:[]}};this.props={range:{start:0,end:0,minimumStep:0},lineTop:0};
this.options=d||{};this.defaultOptions={orientation:"bottom",showMinorLabels:!0,showMajorLabels:!0};this.range=null;this._create()}function D(d,a){this.id=l.randomUUID();this.range=d;this.options=a||{};this.defaultOptions={showCurrentTime:!1};this._create()}function s(d){this.id=l.randomUUID();this.options=d||{};this.defaultOptions={showCustomTime:!1};this.customTime=new Date;this.eventParams={};this._create()}function p(d,a,b,c){this.id=l.randomUUID();this.options=c||{};this.backgroundPanel=d;this.axisPanel=
a;this.sidePanel=b;this.itemOptions=Object.create(this.options);this.dom={};this.hammer=null;var e=this;this.range=this.groupsData=this.itemsData=null;this.itemListeners={add:function(a,b,c){c!=e.id&&e._onAdd(b.items)},update:function(a,b,c){c!=e.id&&e._onUpdate(b.items)},remove:function(a,b,c){c!=e.id&&e._onRemove(b.items)}};this.groupListeners={add:function(a,b,c){c!=e.id&&e._onAddGroups(b.items)},update:function(a,b,c){c!=e.id&&e._onUpdateGroups(b.items)},remove:function(a,b,c){c!=e.id&&e._onRemoveGroups(b.items)}};
this.items={};this.groups={};this.groupIds=[];this.selection=[];this.stackDirty=!0;this.touchParams={};this._create()}function I(d,a,b){this.parent=this.id=null;this.data=d;this.dom=null;this.options=a||{};this.defaultOptions=b||{};this.displayed=this.selected=!1;this.dirty=!0;this.height=this.width=this.left=this.top=null}function N(d,a,b){this.props={dot:{width:0,height:0},line:{width:0,height:0}};if(d&&void 0==d.start)throw Error('Property "start" missing in item '+d);I.call(this,d,a,b)}function E(d,
a,b){this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0}};if(d&&void 0==d.start)throw Error('Property "start" missing in item '+d);I.call(this,d,a,b)}function G(d,a,b){this.props={content:{width:0}};if(d){if(void 0==d.start)throw Error('Property "start" missing in item '+d.id);if(void 0==d.end)throw Error('Property "end" missing in item '+d.id);}I.call(this,d,a,b)}function R(d,a,b){this.props={content:{left:0,width:0}};G.call(this,d,a,b)}function x(d,a,b){this.groupId=d;this.itemSet=
b;this.dom={};this.props={label:{width:0,height:0}};this.items={};this.visibleItems=[];this.orderedItems={byStart:[],byEnd:[]};this._create();this.setData(a)}function F(P,a,b){if(!P)throw Error("No container element provided");var c=this,e=H().hours(0).minutes(0).seconds(0).milliseconds(0);this.defaultOptions={orientation:"bottom",direction:"horizontal",autoResize:!0,stack:!0,editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1},selectable:!0,min:null,max:null,zoomMin:10,zoomMax:31536E10,showMinorLabels:!0,
showMajorLabels:!0,showCurrentTime:!1,showCustomTime:!1,groupOrder:null,width:null,height:null,maxHeight:null,minHeight:null,type:"box",align:"center",margin:{axis:20,item:10},padding:5,onAdd:function(a,b){b(a)},onUpdate:function(a,b){b(a)},onMove:function(a,b){b(a)},onRemove:function(a,b){b(a)}};this.options={};l.deepExtend(this.options,this.defaultOptions);l.deepExtend(this.options,{snap:null,toScreen:c._toScreen.bind(c),toTime:c._toTime.bind(c)});var g=l.extend(Object.create(this.options),{height:function(){return c.options.height?
c.options.height:c.timeAxis.height+c.contentPanel.height+"px"}});this.rootPanel=new h(P,g);this.rootPanel.on("tap",this._onSelectItem.bind(this));this.rootPanel.on("hold",this._onMultiSelectItem.bind(this));this.rootPanel.on("doubletap",this._onAddItem.bind(this));var w=l.extend(Object.create(this.options),{top:function(){return"top"==w.orientation?"0":""},bottom:function(){return"top"==w.orientation?"":"0"},left:"0",right:null,height:"100%",width:function(){return c.itemSet?c.itemSet.getLabelsWidth():
0},className:function(){return"side"+(c.groupsData?"":" hidden")}});this.sidePanel=new f(w);this.rootPanel.appendChild(this.sidePanel);P=l.extend(Object.create(this.options),{left:function(){return c.sidePanel.width},right:null,height:"100%",width:function(){return c.rootPanel.width-c.sidePanel.width},className:"main"});this.mainPanel=new f(P);this.rootPanel.appendChild(this.mainPanel);P=Object.create(this.options);this.range=new d(this.rootPanel,this.mainPanel,P);this.range.setRange(e.clone().add("days",
-3).valueOf(),e.clone().add("days",4).valueOf());this.range.on("rangechange",function(a){c.rootPanel.repaint();c.emit("rangechange",a)});this.range.on("rangechanged",function(a){c.rootPanel.repaint();c.emit("rangechanged",a)});e=l.extend(Object.create(g),{range:this.range,left:null,top:null,width:null,height:null});this.timeAxis=new v(e);this.timeAxis.setRange(this.range);this.options.snap=this.timeAxis.snap.bind(this.timeAxis);this.mainPanel.appendChild(this.timeAxis);e=l.extend(Object.create(this.options),
{top:function(){return"top"==c.options.orientation?c.timeAxis.height+"px":""},bottom:function(){return"top"==c.options.orientation?"":c.timeAxis.height+"px"},left:null,right:null,height:null,width:null,className:"content"});this.contentPanel=new f(e);this.mainPanel.appendChild(this.contentPanel);e=l.extend(Object.create(this.options),{top:function(){return"top"==c.options.orientation?c.timeAxis.height+"px":""},bottom:function(){return"top"==c.options.orientation?"":c.timeAxis.height+"px"},left:null,
right:null,height:function(){return c.contentPanel.height},width:null,className:"background"});this.backgroundPanel=new f(e);this.mainPanel.insertBefore(this.backgroundPanel,this.contentPanel);e=l.extend(Object.create(g),{left:0,top:function(){return"top"==c.options.orientation?c.timeAxis.height+"px":""},bottom:function(){return"top"==c.options.orientation?"":c.timeAxis.height+"px"},width:"100%",height:0,className:"axis"});this.axisPanel=new f(e);this.mainPanel.appendChild(this.axisPanel);e=l.extend(Object.create(this.options),
{top:function(){return"top"==c.options.orientation?c.timeAxis.height+"px":""},bottom:function(){return"top"==c.options.orientation?"":c.timeAxis.height+"px"},left:null,right:null,height:null,width:null,className:"side-content"});this.sideContentPanel=new f(e);this.sidePanel.appendChild(this.sideContentPanel);this.currentTime=new D(this.range,g);this.customTime=new s(g);this.customTime.on("timechange",function(a){c.emit("timechange",a)});this.customTime.on("timechanged",function(a){c.emit("timechanged",
a)});g=l.extend(Object.create(this.options),{left:null,right:null,top:null,bottom:null,width:null,height:null});this.itemSet=new p(this.backgroundPanel,this.axisPanel,this.sideContentPanel,g);this.itemSet.setRange(this.range);this.itemSet.on("change",c.rootPanel.repaint.bind(c.rootPanel));this.contentPanel.appendChild(this.itemSet);this.groupsData=this.itemsData=null;b&&this.setOptions(b);a&&this.setItems(a)}function r(d,a,b,c){this.selected=!1;this.edges=[];this.dynamicEdges=[];this.reroutedEdges=
{};this.group=c.nodes.group;this.fontSize=c.nodes.fontSize;this.fontFace=c.nodes.fontFace;this.fontColor=c.nodes.fontColor;this.fontDrawThreshold=3;this.color=c.nodes.color;this.id=void 0;this.shape=c.nodes.shape;this.image=c.nodes.image;this.y=this.x=null;this.yFixed=this.xFixed=!1;this.verticalAlignTop=this.horizontalAlignLeft=!0;this.baseRadiusValue=this.radius=c.nodes.radius;this.radiusFixed=!1;this.radiusMin=c.nodes.radiusMin;this.radiusMax=c.nodes.radiusMax;this.level=-1;this.preassignedLevel=
!1;this.imagelist=a;this.grouplist=b;this.vy=this.vx=this.fy=this.fx=0;this.minForce=c.minForce;this.damping=c.physics.damping;this.mass=1;this.fixedData={x:null,y:null};this.setProperties(d,c);this.resetCluster();this.clusterSession=this.dynamicEdgesLength=0;this.clusterSizeWidthFactor=c.clustering.nodeScaling.width;this.clusterSizeHeightFactor=c.clustering.nodeScaling.height;this.clusterSizeRadiusFactor=c.clustering.nodeScaling.radius;this.maxNodeSizeIncrements=c.clustering.maxNodeSizeIncrements;
this.growthIndicator=0;this.graphScale=this.graphScaleInv=1;this.canvasTopLeft={x:-300,y:-300};this.canvasBottomRight={x:300,y:300};this.parentEdgeId=null}function y(d,a,b){if(!a)throw"No graph provided";this.graph=a;this.widthMin=b.edges.widthMin;this.widthMax=b.edges.widthMax;this.toId=this.fromId=this.id=void 0;this.style=b.edges.style;this.title=void 0;this.width=b.edges.width;this.value=void 0;this.length=b.physics.springLength;this.selected=this.customLength=!1;this.smooth=b.smoothCurves;this.arrowScaleFactor=
b.edges.arrowScaleFactor;this.via=this.to=this.from=null;this.originalFromId=[];this.originalToId=[];this.connected=!1;this.dash=l.extend({},b.edges.dash);this.color={color:b.edges.color.color,highlight:b.edges.color.highlight};this.lengthFixed=this.widthFixed=!1;this.setProperties(d,b)}function W(d,a,b,c,e){this.container=d?d:document.body;void 0===e&&("object"===typeof a?(e=a,a=void 0):"object"===typeof c?(e=c,c=void 0):e={fontColor:"black",fontSize:14,fontFace:"verdana",color:{border:"#666",background:"#FFFFC6"}});
this.y=this.x=0;this.padding=5;void 0!==a&&void 0!==b&&this.setPosition(a,b);void 0!==c&&this.setText(c);this.frame=document.createElement("div");d=this.frame.style;d.position="absolute";d.visibility="hidden";d.border="1px solid "+e.color.border;d.color=e.fontColor;d.fontSize=e.fontSize+"px";d.fontFamily=e.fontFace;d.padding=this.padding+"px";d.backgroundColor=e.color.background;d.borderRadius="3px";d.MozBorderRadius="3px";d.WebkitBorderRadius="3px";d.boxShadow="3px 3px 10px rgba(128, 128, 128, 0.5)";
d.whiteSpace="nowrap";this.container.appendChild(this.frame)}function A(){this.clear();this.defaultIndex=0}function Z(){this.images={};this.callback=void 0}function ia(){this.constants.smoothCurves=!this.constants.smoothCurves;document.getElementById("graph_toggleSmooth").style.background=!0==this.constants.smoothCurves?"#A4FF56":"#FF8532";this._configureSmoothCurves(!1)}function S(){for(var d in this.calculationNodes)this.calculationNodes.hasOwnProperty(d)&&(this.calculationNodes[d].vx=0,this.calculationNodes[d].vy=
0,this.calculationNodes[d].fx=0,this.calculationNodes[d].fy=0);!0==this.constants.hierarchicalLayout.enabled?this._setupHierarchicalLayout():this.repositionNodes();this.moving=!0;this.start()}function qa(){var d="No options are required, default values used.",a=[],b=document.getElementById("graph_physicsMethod1"),c=document.getElementById("graph_physicsMethod2");if(!0==b.checked){this.constants.physics.barnesHut.gravitationalConstant!=this.backupConstants.physics.barnesHut.gravitationalConstant&&
a.push("gravitationalConstant: "+this.constants.physics.barnesHut.gravitationalConstant);this.constants.physics.centralGravity!=this.backupConstants.physics.barnesHut.centralGravity&&a.push("centralGravity: "+this.constants.physics.centralGravity);this.constants.physics.springLength!=this.backupConstants.physics.barnesHut.springLength&&a.push("springLength: "+this.constants.physics.springLength);this.constants.physics.springConstant!=this.backupConstants.physics.barnesHut.springConstant&&a.push("springConstant: "+
this.constants.physics.springConstant);this.constants.physics.damping!=this.backupConstants.physics.barnesHut.damping&&a.push("damping: "+this.constants.physics.damping);if(0!=a.length){d="var options = {physics: {barnesHut: {";for(b=0;b<a.length;b++)d+=a[b],b<a.length-1&&(d+=", ");d+="}}"}this.constants.smoothCurves!=this.backupConstants.smoothCurves&&(d=0==a.length?"var options = {":d+", ",d+="smoothCurves: "+this.constants.smoothCurves);"No options are required, default values used."!=d&&(d+="};")}else{if(!0==
c.checked){d="var options = {physics: {barnesHut: {enabled: false}";this.constants.physics.repulsion.nodeDistance!=this.backupConstants.physics.repulsion.nodeDistance&&a.push("nodeDistance: "+this.constants.physics.repulsion.nodeDistance);this.constants.physics.centralGravity!=this.backupConstants.physics.repulsion.centralGravity&&a.push("centralGravity: "+this.constants.physics.centralGravity);this.constants.physics.springLength!=this.backupConstants.physics.repulsion.springLength&&a.push("springLength: "+
this.constants.physics.springLength);this.constants.physics.springConstant!=this.backupConstants.physics.repulsion.springConstant&&a.push("springConstant: "+this.constants.physics.springConstant);this.constants.physics.damping!=this.backupConstants.physics.repulsion.damping&&a.push("damping: "+this.constants.physics.damping);if(0!=a.length){d+=", repulsion: {";for(b=0;b<a.length;b++)d+=a[b],b<a.length-1&&(d+=", ");d+="}}"}0==a.length&&(d+="}");this.constants.smoothCurves!=this.backupConstants.smoothCurves&&
(d+=", smoothCurves: "+this.constants.smoothCurves)}else{d="var options = {";this.constants.physics.hierarchicalRepulsion.nodeDistance!=this.backupConstants.physics.hierarchicalRepulsion.nodeDistance&&a.push("nodeDistance: "+this.constants.physics.hierarchicalRepulsion.nodeDistance);this.constants.physics.centralGravity!=this.backupConstants.physics.hierarchicalRepulsion.centralGravity&&a.push("centralGravity: "+this.constants.physics.centralGravity);this.constants.physics.springLength!=this.backupConstants.physics.hierarchicalRepulsion.springLength&&
a.push("springLength: "+this.constants.physics.springLength);this.constants.physics.springConstant!=this.backupConstants.physics.hierarchicalRepulsion.springConstant&&a.push("springConstant: "+this.constants.physics.springConstant);this.constants.physics.damping!=this.backupConstants.physics.hierarchicalRepulsion.damping&&a.push("damping: "+this.constants.physics.damping);if(0!=a.length){d+="physics: {hierarchicalRepulsion: {";for(b=0;b<a.length;b++)d+=a[b],b<a.length-1&&(d+=", ");d+="}},"}d+="hierarchicalLayout: {";
a=[];this.constants.hierarchicalLayout.direction!=this.backupConstants.hierarchicalLayout.direction&&a.push("direction: "+this.constants.hierarchicalLayout.direction);Math.abs(this.constants.hierarchicalLayout.levelSeparation)!=this.backupConstants.hierarchicalLayout.levelSeparation&&a.push("levelSeparation: "+this.constants.hierarchicalLayout.levelSeparation);this.constants.hierarchicalLayout.nodeSpacing!=this.backupConstants.hierarchicalLayout.nodeSpacing&&a.push("nodeSpacing: "+this.constants.hierarchicalLayout.nodeSpacing);
if(0!=a.length){for(b=0;b<a.length;b++)d+=a[b],b<a.length-1&&(d+=", ");d+="}"}else d+="enabled:true}"}d+="};"}this.optionsDiv.innerHTML=d}function da(){var d=["graph_BH_table","graph_R_table","graph_H_table"],a=document.querySelector('input[name="graph_physicsMethod"]:checked').value,b="graph_"+a+"_table",c=document.getElementById(b);c.style.display="block";for(var e=0;e<d.length;e++)d[e]!=b&&(c=document.getElementById(d[e]),c.style.display="none");this._restoreNodes();"R"==a?(this.constants.hierarchicalLayout.enabled=
!1,this.constants.physics.hierarchicalRepulsion.enabled=!1,this.constants.physics.barnesHut.enabled=!1):"H"==a?!1==this.constants.hierarchicalLayout.enabled&&(this.constants.hierarchicalLayout.enabled=!0,this.constants.physics.hierarchicalRepulsion.enabled=!0,this.constants.physics.barnesHut.enabled=!1,this._setupHierarchicalLayout()):(this.constants.hierarchicalLayout.enabled=!1,this.constants.physics.hierarchicalRepulsion.enabled=!1,this.constants.physics.barnesHut.enabled=!0);this._loadSelectedForceSolver();
document.getElementById("graph_toggleSmooth").style.background=!0==this.constants.smoothCurves?"#A4FF56":"#FF8532";this.moving=!0;this.start()}function L(d,a,b){var c=d+"_value";d=document.getElementById(d).value;a instanceof Array?(document.getElementById(c).value=a[parseInt(d)],this._overWriteGraphConstants(b,a[parseInt(d)])):(document.getElementById(c).value=parseInt(a)*parseFloat(d),this._overWriteGraphConstants(b,parseInt(a)*parseFloat(d)));"hierarchicalLayout_direction"!=b&&"hierarchicalLayout_levelSeparation"!=
b&&"hierarchicalLayout_nodeSpacing"!=b||this._setupHierarchicalLayout();this.moving=!0;this.start()}function t(d,a,b){this._initializeMixinLoaders();this.containerElement=d;this.height=this.width="100%";this.renderRefreshRate=60;this.renderTimestep=1E3/this.renderRefreshRate;this.renderTime=.5*this.renderTimestep;this.maxPhysicsTicksPerRender=3;this.physicsDiscreteStepsize=.65;this.initializing=this.selectable=this.stabilize=!0;this.triggerFunctions={add:null,edit:null,connect:null,del:null};this.constants=
{nodes:{radiusMin:5,radiusMax:20,radius:5,shape:"ellipse",image:void 0,widthMin:16,widthMax:64,fixed:!1,fontColor:"black",fontSize:14,fontFace:"verdana",level:-1,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"}},borderColor:"#2B7CE9",backgroundColor:"#97C2FC",highlightColor:"#D2E5FF",group:void 0},edges:{widthMin:1,widthMax:15,width:1,style:"line",color:{color:"#848484",highlight:"#848484"},fontColor:"#343434",fontSize:14,fontFace:"arial",fontFill:"white",
arrowScaleFactor:1,dash:{length:10,gap:5,altLength:void 0}},configurePhysics:!1,physics:{barnesHut:{enabled:!0,theta:1/.6,gravitationalConstant:-2E3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09},repulsion:{centralGravity:.1,springLength:200,springConstant:.05,nodeDistance:100,damping:.09},hierarchicalRepulsion:{enabled:!1,centralGravity:0,springLength:100,springConstant:.01,nodeDistance:60,damping:.09},damping:null,centralGravity:null,springLength:null,springConstant:null},clustering:{enabled:!1,
initialMaxNodes:100,clusterThreshold:500,reduceToNodes:300,chainThreshold:.4,clusterEdgeThreshold:20,sectorThreshold:100,screenSizeThreshold:.2,fontSizeMultiplier:4,maxFontSize:1E3,forceAmplification:.1,distanceAmplification:.1,edgeGrowth:20,nodeScaling:{width:1,height:1,radius:1},maxNodeSizeIncrements:600,activeAreaBoxSize:80,clusterLevelDifference:2},navigation:{enabled:!1},keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02}},dataManipulation:{enabled:!1,initiallyVisible:!1},hierarchicalLayout:{enabled:!1,
levelSeparation:150,nodeSpacing:100,direction:"UD"},freezeForStabilization:!1,smoothCurves:!0,maxVelocity:10,minVelocity:.1,stabilizationIterations:1E3,labels:{add:"Add Node",edit:"Edit",link:"Add Link",del:"Delete selected",editNode:"Edit Node",back:"Back",addDescription:"Click in an empty space to place a new node.",linkDescription:"Click on a node and drag the edge to another node to connect them.",addError:"The function for add does not support two arguments (data,callback).",linkError:"The function for connect does not support two arguments (data,callback).",
editError:"The function for edit does not support two arguments (data, callback).",editBoundError:"No edit function has been bound to this button.",deleteError:"The function for delete does not support two arguments (data, callback).",deleteClusterError:"Clusters cannot be deleted."},tooltip:{delay:300,fontColor:"black",fontSize:14,fontFace:"verdana",color:{border:"#666",background:"#FFFFC6"}},moveable:!0,zoomable:!0};this.editMode=this.constants.dataManipulation.initiallyVisible;var c=this;this.groups=
new A;this.images=new Z;this.images.setOnloadCallback(function(){c._redraw()});this.zoomIncrement=this.yIncrement=this.xIncrement=0;this._loadPhysicsSystem();this._create();this._loadSectorSystem();this._loadClusterSystem();this._loadSelectionSystem();this._loadHierarchySystem();this._setTranslation(this.frame.clientWidth/2,this.frame.clientHeight/2);this._setScale(1);this.setOptions(b);this.freezeSimulation=!1;this.cachedFunctions={};this.calculationNodes={};this.calculationNodeIndices=[];this.nodeIndices=
[];this.nodes={};this.edges={};this.canvasTopLeft={x:0,y:0};this.canvasBottomRight={x:0,y:0};this.pointerPosition={x:0,y:0};this.areaCenter={};this.previousScale=this.scale=1;this.edgesData=this.nodesData=null;this.nodesListeners={add:function(a,b){c._addNodes(b.items);c.start()},update:function(a,b){c._updateNodes(b.items);c.start()},remove:function(a,b){c._removeNodes(b.items);c.start()}};this.edgesListeners={add:function(a,b){c._addEdges(b.items);c.start()},update:function(a,b){c._updateEdges(b.items);
c.start()},remove:function(a,b){c._removeEdges(b.items);c.start()}};this.moving=!0;this.timer=void 0;this.setData(a,this.constants.clustering.enabled||this.constants.hierarchicalLayout.enabled);this.initializing=!1;!0==this.constants.hierarchicalLayout.enabled?this._setupHierarchicalLayout():!1==this.stabilize&&this.zoomExtent(!0,this.constants.clustering.enabled);this.constants.clustering.enabled&&this.startWithClustering()}var H="undefined"!==typeof window&&window.moment||B("moment"),$=B("emitter-component"),
Q;Q="undefined"!==typeof window?window.Hammer||B("hammerjs"):function(){throw Error("hammer.js is only available in a browser, not in node.js.");};var ja;ja="undefined"!==typeof window?window.mousetrap||B("mousetrap"):function(){throw Error("mouseTrap is only available in a browser, not in node.js.");};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(d){for(var a=0;a<this.length;a++)if(this[a]==d)return a;return-1};try{console.log("Warning: Ancient browser detected. Please update your browser")}catch(ka){}}Array.prototype.forEach||
(Array.prototype.forEach=function(d,a){for(var b=0,c=this.length;b<c;++b)d.call(a||this,this[b],b,this)});Array.prototype.map||(Array.prototype.map=function(d,a){var b,c,e;if(null==this)throw new TypeError(" this is null or not defined");var g=Object(this),w=g.length>>>0;if("function"!==typeof d)throw new TypeError(d+" is not a function");a&&(b=a);c=Array(w);for(e=0;e<w;){var q;e in g&&(q=g[e],q=d.call(b,q,e,g),c[e]=q);e++}return c});Array.prototype.filter||(Array.prototype.filter=function(d,a){if(null==
this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof d)throw new TypeError;for(var e=[],g=0;g<c;g++)if(g in b){var w=b[g];d.call(a,w,g,b)&&e.push(w)}return e});Object.keys||(Object.keys=function(){var d=Object.prototype.hasOwnProperty,a=!{toString:null}.propertyIsEnumerable("toString"),b="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),c=b.length;return function(e){if("object"!==typeof e&&"function"!==typeof e||
null===e)throw new TypeError("Object.keys called on non-object");var g=[],w;for(w in e)d.call(e,w)&&g.push(w);if(a)for(w=0;w<c;w++)d.call(e,b[w])&&g.push(b[w]);return g}}());Array.isArray||(Array.isArray=function(d){return"[object Array]"===Object.prototype.toString.call(d)});Function.prototype.bind||(Function.prototype.bind=function(d){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var a=Array.prototype.slice.call(arguments,
1),b=this,c=function(){},e=function(){return b.apply(this instanceof c&&d?this:d,a.concat(Array.prototype.slice.call(arguments)))};c.prototype=this.prototype;e.prototype=new c;return e});Object.create||(Object.create=function(d){function a(){}if(1<arguments.length)throw Error("Object.create implementation only accepts the first parameter.");a.prototype=d;return new a});Function.prototype.bind||(Function.prototype.bind=function(d){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
var a=Array.prototype.slice.call(arguments,1),b=this,c=function(){},e=function(){return b.apply(this instanceof c&&d?this:d,a.concat(Array.prototype.slice.call(arguments)))};c.prototype=this.prototype;e.prototype=new c;return e});var l={isNumber:function(d){return d instanceof Number||"number"==typeof d},isString:function(d){return d instanceof String||"string"==typeof d},isDate:function(d){return d instanceof Date||l.isString(d)&&(aa.exec(d)||!isNaN(Date.parse(d)))?!0:!1},isDataTable:function(d){return"undefined"!==
typeof google&&google.visualization&&google.visualization.DataTable&&d instanceof google.visualization.DataTable},randomUUID:function(){var d=function(){return Math.floor(65536*Math.random()).toString(16)};return d()+d()+"-"+d()+"-"+d()+"-"+d()+"-"+d()+d()+d()},extend:function(d,a){for(var b=1,c=arguments.length;b<c;b++){var e=arguments[b],g;for(g in e)e.hasOwnProperty(g)&&void 0!==e[g]&&(d[g]=e[g])}return d},deepExtend:function a(b,c){if(Array.isArray(c))throw new TypeError("Arrays are not supported by deepExtend");
for(var e in c)if(c.hasOwnProperty(e))if(c[e]&&c[e].constructor===Object)void 0===b[e]&&(b[e]={}),b[e].constructor===Object?a(b[e],c[e]):b[e]=c[e];else{if(Array.isArray(c[e]))throw new TypeError("Arrays are not supported by deepExtend");b[e]=c[e]}return b},equalArray:function(a,b){if(a.length!=b.length)return!1;for(var c=0,e=a.length;c<e;c++)if(a[c]!=b[c])return!1;return!0},convert:function(a,b){var c;if(void 0!==a){if(null===a)return null;if(!b)return a;if("string"!==typeof b&&!(b instanceof String))throw Error("Type must be a string");
switch(b){case "boolean":case "Boolean":return Boolean(a);case "number":case "Number":return Number(a.valueOf());case "string":case "String":return String(a);case "Date":if(l.isNumber(a))return new Date(a);if(a instanceof Date||H.isMoment(a))return new Date(a.valueOf());if(l.isString(a))return(c=aa.exec(a))?new Date(Number(c[1])):H(a).toDate();throw Error("Cannot convert object of type "+l.getType(a)+" to type Date");case "Moment":if(l.isNumber(a))return H(a);if(a instanceof Date)return H(a.valueOf());
if(H.isMoment(a))return H(a);if(l.isString(a))return(c=aa.exec(a))?H(Number(c[1])):H(a);throw Error("Cannot convert object of type "+l.getType(a)+" to type Date");case "ISODate":if(l.isNumber(a))return new Date(a);if(a instanceof Date)return a.toISOString();if(H.isMoment(a))return a.toDate().toISOString();if(l.isString(a))return(c=aa.exec(a))?(new Date(Number(c[1]))).toISOString():(new Date(a)).toISOString();throw Error("Cannot convert object of type "+l.getType(a)+" to type ISODate");case "ASPDate":if(l.isNumber(a))return"/Date("+
a+")/";if(a instanceof Date)return"/Date("+a.valueOf()+")/";if(l.isString(a))return c=aa.exec(a),"/Date("+(c?(new Date(Number(c[1]))).valueOf():(new Date(a)).valueOf())+")/";throw Error("Cannot convert object of type "+l.getType(a)+" to type ASPDate");default:throw Error("Cannot convert object of type "+l.getType(a)+' to type "'+b+'"');}}}},aa=/^\/?Date\((\-?\d+)/i;l.getType=function(a){var b=typeof a;return"object"==b?null==a?"null":a instanceof Boolean?"Boolean":a instanceof Number?"Number":a instanceof
String?"String":a instanceof Array?"Array":a instanceof Date?"Date":"Object":"number"==b?"Number":"boolean"==b?"Boolean":"string"==b?"String":b};l.getAbsoluteLeft=function(a){var b=document.documentElement,c=document.body,e=a.offsetLeft;for(a=a.offsetParent;null!=a&&a!=c&&a!=b;)e+=a.offsetLeft,e-=a.scrollLeft,a=a.offsetParent;return e};l.getAbsoluteTop=function(a){var b=document.documentElement,c=document.body,e=a.offsetTop;for(a=a.offsetParent;null!=a&&a!=c&&a!=b;)e+=a.offsetTop,e-=a.scrollTop,a=
a.offsetParent;return e};l.getPageY=function(a){if("pageY"in a)return a.pageY;var b=document.documentElement,c=document.body;return("targetTouches"in a&&a.targetTouches.length?a.targetTouches[0].clientY:a.clientY)+(b&&b.scrollTop||c&&c.scrollTop||0)-(b&&b.clientTop||c&&c.clientTop||0)};l.getPageX=function(a){if("pageY"in a)return a.pageX;var b=document.documentElement,c=document.body;return("targetTouches"in a&&a.targetTouches.length?a.targetTouches[0].clientX:a.clientX)+(b&&b.scrollLeft||c&&c.scrollLeft||
0)-(b&&b.clientLeft||c&&c.clientLeft||0)};l.addClassName=function(a,b){var c=a.className.split(" ");-1==c.indexOf(b)&&(c.push(b),a.className=c.join(" "))};l.removeClassName=function(a,b){var c=a.className.split(" "),e=c.indexOf(b);-1!=e&&(c.splice(e,1),a.className=c.join(" "))};l.forEach=function(a,b){var c,e;if(a instanceof Array)for(c=0,e=a.length;c<e;c++)b(a[c],c,a);else for(c in a)a.hasOwnProperty(c)&&b(a[c],c,a)};l.toArray=function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b};
l.updateProperty=function(a,b,c){return a[b]!==c?(a[b]=c,!0):!1};l.addEventListener=function(a,b,c,e){a.addEventListener?(void 0===e&&(e=!1),"mousewheel"===b&&0<=navigator.userAgent.indexOf("Firefox")&&(b="DOMMouseScroll"),a.addEventListener(b,c,e)):a.attachEvent("on"+b,c)};l.removeEventListener=function(a,b,c,e){a.removeEventListener?(void 0===e&&(e=!1),"mousewheel"===b&&0<=navigator.userAgent.indexOf("Firefox")&&(b="DOMMouseScroll"),a.removeEventListener(b,c,e)):a.detachEvent("on"+b,c)};l.getTarget=
function(a){a||(a=window.event);var b;a.target?b=a.target:a.srcElement&&(b=a.srcElement);void 0!=b.nodeType&&3==b.nodeType&&(b=b.parentNode);return b};l.fakeGesture=function(a,b){var c=Q.event.collectEventData(this,null,b);isNaN(c.center.pageX)&&(c.center.pageX=b.pageX);isNaN(c.center.pageY)&&(c.center.pageY=b.pageY);return c};l.option={};l.option.asBoolean=function(a,b){"function"==typeof a&&(a=a());return null!=a?!1!=a:b||null};l.option.asNumber=function(a,b){"function"==typeof a&&(a=a());return null!=
a?Number(a)||b||null:b||null};l.option.asString=function(a,b){"function"==typeof a&&(a=a());return null!=a?String(a):b||null};l.option.asSize=function(a,b){"function"==typeof a&&(a=a());return l.isString(a)?a:l.isNumber(a)?a+"px":b||null};l.option.asElement=function(a,b){"function"==typeof a&&(a=a());return a||b||null};l.GiveDec=function(a){return"A"==a?10:"B"==a?11:"C"==a?12:"D"==a?13:"E"==a?14:"F"==a?15:eval(a)};l.GiveHex=function(a){return 10==a?"A":11==a?"B":12==a?"C":13==a?"D":14==a?"E":15==
a?"F":""+a};l.parseColor=function(a){var b;if(l.isString(a))if(l.isValidHex(a)){var c=l.hexToHSV(a);b=c.h;var e=.45*c.s,g=Math.min(1,1.05*c.v),w=c.h;Math.min(1,1.25*c.v);c=l.HSVToHex(w,w,.6*c.v);b=l.HSVToHex(b,e,g);b={background:a,border:c,highlight:{background:b,border:c}}}else b={background:a,border:a,highlight:{background:a,border:a}};else b={},b.background=a.background||"white",b.border=a.border||b.background,l.isString(a.highlight)?b.highlight={border:a.highlight,background:a.highlight}:(b.highlight=
{},b.highlight.background=a.highlight&&a.highlight.background||b.background,b.highlight.border=a.highlight&&a.highlight.border||b.border);return b};l.hexToRGB=function(a){a=a.replace("#","").toUpperCase();var b=l.GiveDec(a.substring(0,1)),c=l.GiveDec(a.substring(1,2)),e=l.GiveDec(a.substring(2,3)),g=l.GiveDec(a.substring(3,4)),w=l.GiveDec(a.substring(4,5));a=l.GiveDec(a.substring(5,6));b=16*b+c;return{r:b,g:16*e+g,b:16*w+a}};l.RGBToHex=function(a,b,c){var e=l.GiveHex(Math.floor(a/16));a=l.GiveHex(a%
16);var g=l.GiveHex(Math.floor(b/16));b=l.GiveHex(b%16);var w=l.GiveHex(Math.floor(c/16));c=l.GiveHex(c%16);return"#"+(e+a+g+b+w+c)};l.RGBToHSV=function(a,b,c){a/=255;b/=255;c/=255;var e=Math.min(a,Math.min(b,c)),g=Math.max(a,Math.max(b,c));return e==g?{h:0,s:0,v:e}:{h:60*((a==e?3:c==e?1:5)-(a==e?b-c:c==e?a-b:c-a)/(g-e))/360,s:(g-e)/g,v:g}};l.HSVToRGB=function(a,b,c){var e,g,w,d=Math.floor(6*a),f=6*a-d;a=c*(1-b);var h=c*(1-f*b);b=c*(1-(1-f)*b);switch(d%6){case 0:e=c;g=b;w=a;break;case 1:e=h;g=c;w=
a;break;case 2:e=a;g=c;w=b;break;case 3:e=a;g=h;w=c;break;case 4:e=b;g=a;w=c;break;case 5:e=c,g=a,w=h}return{r:Math.floor(255*e),g:Math.floor(255*g),b:Math.floor(255*w)}};l.HSVToHex=function(a,b,c){a=l.HSVToRGB(a,b,c);return l.RGBToHex(a.r,a.g,a.b)};l.hexToHSV=function(a){a=l.hexToRGB(a);return l.RGBToHSV(a.r,a.g,a.b)};l.isValidHex=function(a){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a)};l.copyObject=function(a,b){for(var c in a)a.hasOwnProperty(c)&&("object"==typeof a[c]?(b[c]={},l.copyObject(a[c],
b[c])):b[c]=a[c])};m.prototype.on=function(a,b){var c=this.subscribers[a];c||(c=[],this.subscribers[a]=c);c.push({callback:b})};m.prototype.subscribe=m.prototype.on;m.prototype.off=function(a,b){var c=this.subscribers[a];c&&(this.subscribers[a]=c.filter(function(a){return a.callback!=b}))};m.prototype.unsubscribe=m.prototype.off;m.prototype._trigger=function(a,b,c){if("*"==a)throw Error("Cannot trigger event *");var e=[];a in this.subscribers&&(e=e.concat(this.subscribers[a]));"*"in this.subscribers&&
(e=e.concat(this.subscribers["*"]));for(var g=0;g<e.length;g++){var w=e[g];w.callback&&w.callback(a,b,c||null)}};m.prototype.add=function(a,b){var c=[],e;if(a instanceof Array)for(var g=0,w=a.length;g<w;g++)e=this._addItem(a[g]),c.push(e);else if(l.isDataTable(a))for(var g=this._getColumnNames(a),w=0,d=a.getNumberOfRows();w<d;w++){e={};for(var f=0,h=g.length;f<h;f++)e[g[f]]=a.getValue(w,f);e=this._addItem(e);c.push(e)}else if(a instanceof Object)e=this._addItem(a),c.push(e);else throw Error("Unknown dataType");
c.length&&this._trigger("add",{items:c},b);return c};m.prototype.update=function(a,b){var c=[],e=[],g=this,w=g.fieldId,d=function(a){var b=a[w];g.data[b]?(b=g._updateItem(a),e.push(b)):(b=g._addItem(a),c.push(b))};if(a instanceof Array)for(var f=0,h=a.length;f<h;f++)d(a[f]);else if(l.isDataTable(a))for(var f=this._getColumnNames(a),h=0,k=a.getNumberOfRows();h<k;h++){for(var n={},y=0,v=f.length;y<v;y++)n[f[y]]=a.getValue(h,y);d(n)}else if(a instanceof Object)d(a);else throw Error("Unknown dataType");
c.length&&this._trigger("add",{items:c},b);e.length&&this._trigger("update",{items:e},b);return c.concat(e)};m.prototype.get=function(a,b,c){var e=this.showInternalIds,g,w,d=l.getType(a);"String"==d||"Number"==d?(g=a,a=b,b=c):"Array"==d&&(w=a,a=b,b=c);if(a&&a.type){d="DataTable"==a.type?"DataTable":"Array";if(b&&d!=l.getType(b))throw Error('Type of parameter "data" ('+l.getType(b)+") does not correspond with specified options.type ("+a.type+")");if("DataTable"==d&&!l.isDataTable(b))throw Error('Parameter "data" must be a DataTable when options.type is "DataTable"');
}else d=b?"DataTable"==l.getType(b)?"DataTable":"Array":"Array";void 0!=a&&void 0!=a.showInternalIds&&(this.showInternalIds=a.showInternalIds);var f=a&&a.convert||this.options.convert,h=a&&a.filter;c=[];var k,n,y;if(void 0!=g)k=this._getItem(g,f),h&&!h(k)&&(k=null);else if(void 0!=w)for(n=0,y=w.length;n<y;n++)k=this._getItem(w[n],f),h&&!h(k)||c.push(k);else for(n in this.data)this.data.hasOwnProperty(n)&&(k=this._getItem(n,f),h&&!h(k)||c.push(k));this.showInternalIds=e;a&&a.order&&void 0==g&&this._sort(c,
a.order);if(a&&a.fields)if(e=a.fields,void 0!=g)k=this._filterFields(k,e);else for(n=0,y=c.length;n<y;n++)c[n]=this._filterFields(c[n],e);if("DataTable"==d){e=this._getColumnNames(b);if(void 0!=g)this._appendRow(b,e,k);else for(n=0,y=c.length;n<y;n++)this._appendRow(b,e,c[n]);return b}if(void 0!=g)return k;if(b){n=0;for(y=c.length;n<y;n++)b.push(c[n]);return b}return c};m.prototype.getIds=function(a){var b=this.data,c=a&&a.filter,e=a&&a.order,g=a&&a.convert||this.options.convert,d,q,f=[];if(c)if(e){a=
[];for(d in b)b.hasOwnProperty(d)&&(q=this._getItem(d,g),c(q)&&a.push(q));this._sort(a,e);b=0;for(c=a.length;b<c;b++)f[b]=a[b][this.fieldId]}else for(d in b)b.hasOwnProperty(d)&&(q=this._getItem(d,g),c(q)&&f.push(q[this.fieldId]));else if(e){a=[];for(d in b)b.hasOwnProperty(d)&&a.push(b[d]);this._sort(a,e);b=0;for(c=a.length;b<c;b++)f[b]=a[b][this.fieldId]}else for(d in b)b.hasOwnProperty(d)&&(q=b[d],f.push(q[this.fieldId]));return f};m.prototype.forEach=function(a,b){var c=b&&b.filter,e=b&&b.convert||
this.options.convert,g=this.data,d,q;if(b&&b.order)for(c=this.get(b),e=0,g=c.length;e<g;e++)d=c[e],q=d[this.fieldId],a(d,q);else for(q in g)g.hasOwnProperty(q)&&(d=this._getItem(q,e),c&&!c(d)||a(d,q))};m.prototype.map=function(a,b){var c=b&&b.filter,e=b&&b.convert||this.options.convert,g=[],d=this.data,q,f;for(f in d)d.hasOwnProperty(f)&&(q=this._getItem(f,e),c&&!c(q)||g.push(a(q,f)));b&&b.order&&this._sort(g,b.order);return g};m.prototype._filterFields=function(a,b){var c={},e;for(e in a)a.hasOwnProperty(e)&&
-1!=b.indexOf(e)&&(c[e]=a[e]);return c};m.prototype._sort=function(a,b){if(l.isString(b))a.sort(function(a,e){var g=a[b],d=e[b];return g>d?1:g<d?-1:0});else if("function"===typeof b)a.sort(b);else throw new TypeError("Order must be a function or a string");};m.prototype.remove=function(a,b){var c=[],e,g,d;if(a instanceof Array)for(e=0,g=a.length;e<g;e++)d=this._remove(a[e]),null!=d&&c.push(d);else d=this._remove(a),null!=d&&c.push(d);c.length&&this._trigger("remove",{items:c},b);return c};m.prototype._remove=
function(a){if(l.isNumber(a)||l.isString(a)){if(this.data[a])return delete this.data[a],delete this.internalIds[a],a}else if(a instanceof Object&&(a=a[this.fieldId])&&this.data[a])return delete this.data[a],delete this.internalIds[a],a;return null};m.prototype.clear=function(a){var b=Object.keys(this.data);this.data={};this.internalIds={};this._trigger("remove",{items:b},a);return b};m.prototype.max=function(a){var b=this.data,c=null,e=null,g;for(g in b)if(b.hasOwnProperty(g)){var d=b[g],q=d[a];null!=
q&&(!c||q>e)&&(c=d,e=q)}return c};m.prototype.min=function(a){var b=this.data,c=null,e=null,g;for(g in b)if(b.hasOwnProperty(g)){var d=b[g],q=d[a];null!=q&&(!c||q<e)&&(c=d,e=q)}return c};m.prototype.distinct=function(a){var b=this.data,c=[],e=this.options.convert[a],g=0,d;for(d in b)if(b.hasOwnProperty(d)){for(var q=l.convert(b[d][a],e),f=!1,h=0;h<g;h++)if(c[h]==q){f=!0;break}f||void 0===q||(c[g]=q,g++)}return c};m.prototype._addItem=function(a){var b=a[this.fieldId];if(void 0!=b){if(this.data[b])throw Error("Cannot add item: item with id "+
b+" already exists");}else b=l.randomUUID(),a[this.fieldId]=b,this.internalIds[b]=a;var c={},e;for(e in a)a.hasOwnProperty(e)&&(c[e]=l.convert(a[e],this.convert[e]));this.data[b]=c;return b};m.prototype._getItem=function(a,b){var c,e,g=this.data[a];if(!g)return null;var d={},q=this.fieldId,f=this.internalIds;if(b)for(c in g)g.hasOwnProperty(c)&&(e=g[c],c==q&&e in f&&!this.showInternalIds||(d[c]=l.convert(e,b[c])));else for(c in g)g.hasOwnProperty(c)&&(e=g[c],c==q&&e in f&&!this.showInternalIds||(d[c]=
e));return d};m.prototype._updateItem=function(a){var b=a[this.fieldId];if(void 0==b)throw Error("Cannot update item: item has no id (item: "+JSON.stringify(a)+")");var c=this.data[b];if(!c)throw Error("Cannot update item: no item with id "+b+" found");for(var e in a)a.hasOwnProperty(e)&&(c[e]=l.convert(a[e],this.convert[e]));return b};m.prototype.isInternalId=function(a){return a in this.internalIds};m.prototype._getColumnNames=function(a){for(var b=[],c=0,e=a.getNumberOfColumns();c<e;c++)b[c]=a.getColumnId(c)||
a.getColumnLabel(c);return b};m.prototype._appendRow=function(a,b,c){for(var e=a.addRow(),g=0,d=b.length;g<d;g++)a.setValue(e,g,c[b[g]])};u.prototype.setData=function(a){var b,c;if(this.data){this.data.unsubscribe&&this.data.unsubscribe("*",this.listener);b=[];for(var e in this.ids)this.ids.hasOwnProperty(e)&&b.push(e);this.ids={};this._trigger("remove",{items:b})}if(this.data=a){this.fieldId=this.options.fieldId||this.data&&this.data.options&&this.data.options.fieldId||"id";b=this.data.getIds({filter:this.options&&
this.options.filter});a=0;for(c=b.length;a<c;a++)e=b[a],this.ids[e]=!0;this._trigger("add",{items:b});if(this.data.on)this.data.on("*",this.listener)}};u.prototype.get=function(a,b,c){var e=this,g,d,q=l.getType(a);"String"==q||"Number"==q||"Array"==q?(g=a,d=b,a=c):(d=a,a=b);b=l.extend({},this.options,d);this.options.filter&&d&&d.filter&&(b.filter=function(a){return e.options.filter(a)&&d.filter(a)});c=[];void 0!=g&&c.push(g);c.push(b);c.push(a);return this.data&&this.data.get.apply(this.data,c)};
u.prototype.getIds=function(a){var b;if(this.data){var c=this.options.filter;b=this.data.getIds({filter:a&&a.filter?c?function(b){return c(b)&&a.filter(b)}:a.filter:c,order:a&&a.order})}else b=[];return b};u.prototype._onEvent=function(a,b,c){var e,g,d;b=b&&b.items;e=this.data;var q=[],f=[],h=[];if(b&&e){switch(a){case "add":a=0;for(e=b.length;a<e;a++)if(g=b[a],d=this.get(g))this.ids[g]=!0,q.push(g);break;case "update":a=0;for(e=b.length;a<e;a++)g=b[a],(d=this.get(g))?this.ids[g]?f.push(g):(this.ids[g]=
!0,q.push(g)):this.ids[g]&&(delete this.ids[g],h.push(g));break;case "remove":for(a=0,e=b.length;a<e;a++)g=b[a],this.ids[g]&&(delete this.ids[g],h.push(g))}q.length&&this._trigger("add",{items:q},c);f.length&&this._trigger("update",{items:f},c);h.length&&this._trigger("remove",{items:h},c)}};u.prototype.on=m.prototype.on;u.prototype.off=m.prototype.off;u.prototype._trigger=m.prototype._trigger;u.prototype.subscribe=u.prototype.on;u.prototype.unsubscribe=u.prototype.off;var V={orderByStart:function(a){a.sort(function(a,
c){return a.data.start-c.data.start})},orderByEnd:function(a){a.sort(function(a,c){return("end"in a.data?a.data.end:a.data.start)-("end"in c.data?c.data.end:c.data.start)})},stack:function(a,b,c){var e;if(c)for(c=0,e=a.length;c<e;c++)a[c].top=null;c=0;for(e=a.length;c<e;c++){var g=a[c];if(null===g.top){g.top=b.axis;do{for(var d=null,q=0,f=a.length;q<f;q++){var h=a[q];if(null!==h.top&&h!==g&&V.collision(g,h,b.item)){d=h;break}}null!=d&&(g.top=d.top+d.height+b.item)}while(d)}}},nostack:function(a,b){var c,
e;c=0;for(e=a.length;c<e;c++)a[c].top=b.axis},collision:function(a,b,c){return a.left-c<b.left+b.width&&a.left+a.width+c>b.left&&a.top-c<b.top+b.height&&a.top+a.height+c>b.top}};k.SCALE={MILLISECOND:1,SECOND:2,MINUTE:3,HOUR:4,DAY:5,WEEKDAY:6,MONTH:7,YEAR:8};k.prototype.setRange=function(a,b,c){if(!(a instanceof Date&&b instanceof Date))throw"No legal start or end date in method setRange";this._start=void 0!=a?new Date(a.valueOf()):new Date;this._end=void 0!=b?new Date(b.valueOf()):new Date;this.autoScale&&
this.setMinimumStep(c)};k.prototype.first=function(){this.current=new Date(this._start.valueOf());this.roundToMinor()};k.prototype.roundToMinor=function(){switch(this.scale){case k.SCALE.YEAR:this.current.setFullYear(this.step*Math.floor(this.current.getFullYear()/this.step)),this.current.setMonth(0);case k.SCALE.MONTH:this.current.setDate(1);case k.SCALE.DAY:case k.SCALE.WEEKDAY:this.current.setHours(0);case k.SCALE.HOUR:this.current.setMinutes(0);case k.SCALE.MINUTE:this.current.setSeconds(0);case k.SCALE.SECOND:this.current.setMilliseconds(0)}if(1!=
this.step)switch(this.scale){case k.SCALE.MILLISECOND:this.current.setMilliseconds(this.current.getMilliseconds()-this.current.getMilliseconds()%this.step);break;case k.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()-this.current.getSeconds()%this.step);break;case k.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()-this.current.getMinutes()%this.step);break;case k.SCALE.HOUR:this.current.setHours(this.current.getHours()-this.current.getHours()%this.step);break;case k.SCALE.WEEKDAY:case k.SCALE.DAY:this.current.setDate(this.current.getDate()-
1-(this.current.getDate()-1)%this.step+1);break;case k.SCALE.MONTH:this.current.setMonth(this.current.getMonth()-this.current.getMonth()%this.step);break;case k.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()-this.current.getFullYear()%this.step)}};k.prototype.hasNext=function(){return this.current.valueOf()<=this._end.valueOf()};k.prototype.next=function(){var a=this.current.valueOf();if(6>this.current.getMonth())switch(this.scale){case k.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+
this.step);break;case k.SCALE.SECOND:this.current=new Date(this.current.valueOf()+1E3*this.step);break;case k.SCALE.MINUTE:this.current=new Date(this.current.valueOf()+6E4*this.step);break;case k.SCALE.HOUR:this.current=new Date(this.current.valueOf()+36E5*this.step);var b=this.current.getHours();this.current.setHours(b-b%this.step);break;case k.SCALE.WEEKDAY:case k.SCALE.DAY:this.current.setDate(this.current.getDate()+this.step);break;case k.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+
this.step);break;case k.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step)}else switch(this.scale){case k.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+this.step);break;case k.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()+this.step);break;case k.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()+this.step);break;case k.SCALE.HOUR:this.current.setHours(this.current.getHours()+this.step);break;case k.SCALE.WEEKDAY:case k.SCALE.DAY:this.current.setDate(this.current.getDate()+
this.step);break;case k.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+this.step);break;case k.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step)}if(1!=this.step)switch(this.scale){case k.SCALE.MILLISECOND:this.current.getMilliseconds()<this.step&&this.current.setMilliseconds(0);break;case k.SCALE.SECOND:this.current.getSeconds()<this.step&&this.current.setSeconds(0);break;case k.SCALE.MINUTE:this.current.getMinutes()<this.step&&this.current.setMinutes(0);break;case k.SCALE.HOUR:this.current.getHours()<
this.step&&this.current.setHours(0);break;case k.SCALE.WEEKDAY:case k.SCALE.DAY:this.current.getDate()<this.step+1&&this.current.setDate(1);break;case k.SCALE.MONTH:this.current.getMonth()<this.step&&this.current.setMonth(0)}this.current.valueOf()==a&&(this.current=new Date(this._end.valueOf()))};k.prototype.getCurrent=function(){return this.current};k.prototype.setScale=function(a,b){this.scale=a;0<b&&(this.step=b);this.autoScale=!1};k.prototype.setAutoScale=function(a){this.autoScale=a};k.prototype.setMinimumStep=
function(a){void 0!=a&&(31104E9>a&&(this.scale=k.SCALE.YEAR,this.step=1E3),15552E9>a&&(this.scale=k.SCALE.YEAR,this.step=500),31104E8>a&&(this.scale=k.SCALE.YEAR,this.step=100),15552E8>a&&(this.scale=k.SCALE.YEAR,this.step=50),31104E7>a&&(this.scale=k.SCALE.YEAR,this.step=10),15552E7>a&&(this.scale=k.SCALE.YEAR,this.step=5),31104E6>a&&(this.scale=k.SCALE.YEAR,this.step=1),7776E6>a&&(this.scale=k.SCALE.MONTH,this.step=3),2592E6>a&&(this.scale=k.SCALE.MONTH,this.step=1),432E6>a&&(this.scale=k.SCALE.DAY,
this.step=5),1728E5>a&&(this.scale=k.SCALE.DAY,this.step=2),864E5>a&&(this.scale=k.SCALE.DAY,this.step=1),432E5>a&&(this.scale=k.SCALE.WEEKDAY,this.step=1),144E5>a&&(this.scale=k.SCALE.HOUR,this.step=4),36E5>a&&(this.scale=k.SCALE.HOUR,this.step=1),9E5>a&&(this.scale=k.SCALE.MINUTE,this.step=15),6E5>a&&(this.scale=k.SCALE.MINUTE,this.step=10),3E5>a&&(this.scale=k.SCALE.MINUTE,this.step=5),6E4>a&&(this.scale=k.SCALE.MINUTE,this.step=1),15E3>a&&(this.scale=k.SCALE.SECOND,this.step=15),1E4>a&&(this.scale=
k.SCALE.SECOND,this.step=10),5E3>a&&(this.scale=k.SCALE.SECOND,this.step=5),1E3>a&&(this.scale=k.SCALE.SECOND,this.step=1),200>a&&(this.scale=k.SCALE.MILLISECOND,this.step=200),100>a&&(this.scale=k.SCALE.MILLISECOND,this.step=100),50>a&&(this.scale=k.SCALE.MILLISECOND,this.step=50),10>a&&(this.scale=k.SCALE.MILLISECOND,this.step=10),5>a&&(this.scale=k.SCALE.MILLISECOND,this.step=5),1>a&&(this.scale=k.SCALE.MILLISECOND,this.step=1))};k.prototype.snap=function(a){a=new Date(a.valueOf());if(this.scale==
k.SCALE.YEAR){var b=a.getFullYear()+Math.round(a.getMonth()/12);a.setFullYear(Math.round(b/this.step)*this.step);a.setMonth(0);a.setDate(0);a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0)}else if(this.scale==k.SCALE.MONTH)15<a.getDate()?(a.setDate(1),a.setMonth(a.getMonth()+1)):a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0);else if(this.scale==k.SCALE.DAY){switch(this.step){case 5:case 2:a.setHours(24*Math.round(a.getHours()/24));break;default:a.setHours(12*
Math.round(a.getHours()/12))}a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0)}else if(this.scale==k.SCALE.WEEKDAY){switch(this.step){case 5:case 2:a.setHours(12*Math.round(a.getHours()/12));break;default:a.setHours(6*Math.round(a.getHours()/6))}a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0)}else if(this.scale==k.SCALE.HOUR){switch(this.step){case 4:a.setMinutes(60*Math.round(a.getMinutes()/60));break;default:a.setMinutes(30*Math.round(a.getMinutes()/30))}a.setSeconds(0);a.setMilliseconds(0)}else if(this.scale==
k.SCALE.MINUTE){switch(this.step){case 15:case 10:a.setMinutes(5*Math.round(a.getMinutes()/5));a.setSeconds(0);break;case 5:a.setSeconds(60*Math.round(a.getSeconds()/60));break;default:a.setSeconds(30*Math.round(a.getSeconds()/30))}a.setMilliseconds(0)}else if(this.scale==k.SCALE.SECOND)switch(this.step){case 15:case 10:a.setSeconds(5*Math.round(a.getSeconds()/5));a.setMilliseconds(0);break;case 5:a.setMilliseconds(1E3*Math.round(a.getMilliseconds()/1E3));break;default:a.setMilliseconds(500*Math.round(a.getMilliseconds()/
500))}else this.scale==k.SCALE.MILLISECOND&&(b=5<this.step?this.step/2:1,a.setMilliseconds(Math.round(a.getMilliseconds()/b)*b));return a};k.prototype.isMajor=function(){switch(this.scale){case k.SCALE.MILLISECOND:return 0==this.current.getMilliseconds();case k.SCALE.SECOND:return 0==this.current.getSeconds();case k.SCALE.MINUTE:return 0==this.current.getHours()&&0==this.current.getMinutes();case k.SCALE.HOUR:return 0==this.current.getHours();case k.SCALE.WEEKDAY:case k.SCALE.DAY:return 1==this.current.getDate();
case k.SCALE.MONTH:return 0==this.current.getMonth();case k.SCALE.YEAR:return!1;default:return!1}};k.prototype.getLabelMinor=function(a){void 0==a&&(a=this.current);switch(this.scale){case k.SCALE.MILLISECOND:return H(a).format("SSS");case k.SCALE.SECOND:return H(a).format("s");case k.SCALE.MINUTE:return H(a).format("HH:mm");case k.SCALE.HOUR:return H(a).format("HH:mm");case k.SCALE.WEEKDAY:return H(a).format("ddd D");case k.SCALE.DAY:return H(a).format("D");case k.SCALE.MONTH:return H(a).format("MMM");
case k.SCALE.YEAR:return H(a).format("YYYY");default:return""}};k.prototype.getLabelMajor=function(a){void 0==a&&(a=this.current);switch(this.scale){case k.SCALE.MILLISECOND:return H(a).format("HH:mm:ss");case k.SCALE.SECOND:return H(a).format("D MMMM HH:mm");case k.SCALE.MINUTE:case k.SCALE.HOUR:return H(a).format("ddd D MMMM");case k.SCALE.WEEKDAY:case k.SCALE.DAY:return H(a).format("MMMM YYYY");case k.SCALE.MONTH:return H(a).format("YYYY");case k.SCALE.YEAR:return"";default:return""}};$(d.prototype);
d.prototype.setOptions=function(a){l.extend(this.options,a);null!==this.start&&null!==this.end&&this.setRange(this.start,this.end)};d.prototype.setRange=function(a,b){if(this._applyRange(a,b)){var c={start:new Date(this.start),end:new Date(this.end)};this.emit("rangechange",c);this.emit("rangechanged",c)}};d.prototype._applyRange=function(a,b){var c=null!=a?l.convert(a,"Date").valueOf():this.start,e=null!=b?l.convert(b,"Date").valueOf():this.end,g=null!=this.options.max?l.convert(this.options.max,
"Date").valueOf():null,d=null!=this.options.min?l.convert(this.options.min,"Date").valueOf():null,q;if(isNaN(c)||null===c)throw Error('Invalid start "'+a+'"');if(isNaN(e)||null===e)throw Error('Invalid end "'+b+'"');e<c&&(e=c);null!==d&&c<d&&(q=d-c,c+=q,e+=q,null!=g&&e>g&&(e=g));null!==g&&e>g&&(q=e-g,c-=q,e-=q,null!=d&&c<d&&(c=d));null!==this.options.zoomMin&&(g=parseFloat(this.options.zoomMin),0>g&&(g=0),e-c<g&&(this.end-this.start===g?(c=this.start,e=this.end):(q=g-(e-c),c-=q/2,e+=q/2)));null!==
this.options.zoomMax&&(g=parseFloat(this.options.zoomMax),0>g&&(g=0),e-c>g&&(this.end-this.start===g?(c=this.start,e=this.end):(q=e-c-g,c+=q/2,e-=q/2)));g=this.start!=c||this.end!=e;this.start=c;this.end=e;return g};d.prototype.getRange=function(){return{start:this.start,end:this.end}};d.prototype.conversion=function(a){return d.conversion(this.start,this.end,a)};d.conversion=function(a,b,c){return 0!=c&&0!=b-a?{offset:a,scale:c/(b-a)}:{offset:0,scale:1}};var J={};d.prototype._onDragStart=function(a){!J.ignore&&
(J.start=this.start,J.end=this.end,a=this.parent.frame)&&(a.style.cursor="move")};d.prototype._onDrag=function(a){var b=this.options.direction;ca(b);J.ignore||(a=-("horizontal"==b?a.gesture.deltaX:a.gesture.deltaY)/("horizontal"==b?this.parent.width:this.parent.height)*(J.end-J.start),this._applyRange(J.start+a,J.end+a),this.emit("rangechange",{start:new Date(this.start),end:new Date(this.end)}))};d.prototype._onDragEnd=function(a){J.ignore||(this.parent.frame&&(this.parent.frame.style.cursor="auto"),
this.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end)}))};d.prototype._onMouseWheel=function(a){var b=0;a.wheelDelta?b=a.wheelDelta/120:a.detail&&(b=-a.detail/3);if(b){var b=0>b?1-b/5:1/(1+b/5),c=l.fakeGesture(this,a),c=K(c.center,this.parent.frame),c=this._pointerToDate(c);this.zoom(b,c)}a.preventDefault()};d.prototype._onTouch=function(a){J.start=this.start;J.end=this.end;J.ignore=!1;J.center=null;(a=p.itemFromTarget(a))&&a.selected&&this.options.editable&&(J.ignore=!0)};d.prototype._onHold=
function(){J.ignore=!0};d.prototype._onPinch=function(a){J.ignore=!0;if(1<a.gesture.touches.length){J.center||(J.center=K(a.gesture.center,this.parent.frame));var b=1/a.gesture.scale,c=this._pointerToDate(J.center);a=K(a.gesture.center,this.parent.frame);this._pointerToDate(this.parent,a);a=parseInt(c+(J.start-c)*b);b=parseInt(c+(J.end-c)*b);this.setRange(a,b)}};d.prototype._pointerToDate=function(a){var b;b=this.options.direction;ca(b);if("horizontal"==b)return b=this.conversion(this.parent.width),
a.x/b.scale+b.offset;b=this.conversion(this.parent.height);return a.y/b.scale+b.offset};d.prototype.zoom=function(a,b){null==b&&(b=(this.start+this.end)/2);this.setRange(b+(this.start-b)*a,b+(this.end-b)*a)};d.prototype.move=function(a){var b=this.end-this.start,c=this.end+b*a;this.start+=b*a;this.end=c};d.prototype.moveTo=function(a){a=(this.start+this.end)/2-a;this.setRange(this.start-a,this.end-a)};$(C.prototype);C.prototype.setOptions=function(a){a&&(l.extend(this.options,a),this.repaint())};
C.prototype.getOption=function(a){var b;this.options&&(b=this.options[a]);void 0===b&&this.defaultOptions&&(b=this.defaultOptions[a]);return b};C.prototype.getFrame=function(){return null};C.prototype.repaint=function(){return!1};C.prototype._isResized=function(){var a=this._previousWidth!==this.width||this._previousHeight!==this.height;this._previousWidth=this.width;this._previousHeight=this.height;return a};f.prototype=new C;f.prototype.setOptions=C.prototype.setOptions;f.prototype.getFrame=function(){return this.frame};
f.prototype.appendChild=function(a){this.childs.push(a);a.parent=this;if(a=a.getFrame())a.parentNode&&a.parentNode.removeChild(a),this.frame.appendChild(a)};f.prototype.insertBefore=function(a,b){var c=this.childs.indexOf(b);if(-1!=c&&(this.childs.splice(c,0,a),a.parent=this,c=a.getFrame())){c.parentNode&&c.parentNode.removeChild(c);var e=b.getFrame();e?this.frame.insertBefore(c,e):this.frame.appendChild(c)}};f.prototype.removeChild=function(a){var b=this.childs.indexOf(a);-1!=b&&(this.childs.splice(b,
1),a.parent=null,(a=a.getFrame())&&a.parentNode&&this.frame.removeChild(a))};f.prototype.hasChild=function(a){return-1!=this.childs.indexOf(a)};f.prototype.repaint=function(){var a=l.option.asString,b=this.options;this.getFrame().className="vpanel"+(b.className?" "+a(b.className):"");a=this._repaintChilds();this._updateSize();return this._isResized()||a};f.prototype._repaintChilds=function(){for(var a=!1,b=0,c=this.childs.length;b<c;b++)a=this.childs[b].repaint()||a;return a};f.prototype._updateSize=
function(){this.frame.style.top=l.option.asSize(this.options.top);this.frame.style.bottom=l.option.asSize(this.options.bottom);this.frame.style.left=l.option.asSize(this.options.left);this.frame.style.right=l.option.asSize(this.options.right);this.frame.style.width=l.option.asSize(this.options.width,"100%");this.frame.style.height=l.option.asSize(this.options.height,"");this.top=this.frame.offsetTop;this.left=this.frame.offsetLeft;this.width=this.frame.offsetWidth;this.height=this.frame.offsetHeight};
h.prototype=new f;h.prototype._create=function(){this.frame=document.createElement("div");this.hammer=Q(this.frame,{prevent_default:!0});this.listeners={};var a=this;"touch pinch tap doubletap hold dragstart drag dragend mousewheel DOMMouseScroll".split(" ").forEach(function(b){var c=function(){var c=[b].concat(Array.prototype.slice.call(arguments,0));a.emit.apply(a,c)};a.hammer.on(b,c);a.listeners[b]=c})};h.prototype.setOptions=function(a){a&&(l.extend(this.options,a),this.repaint(),this._initWatch())};
h.prototype.getFrame=function(){return this.frame};h.prototype.repaint=function(){var a=this.options,b="vis timeline rootpanel "+a.orientation+(a.editable.updateTime||a.editable.updateGroup?" editable":"");a.className&&(b+=" "+l.option.asString(b));this.frame.className=b;a=this._repaintChilds();this.frame.style.maxHeight=l.option.asSize(this.options.maxHeight,"");this.frame.style.minHeight=l.option.asSize(this.options.minHeight,"");this._updateSize();(this._isResized()||a)&&setTimeout(this.repaint.bind(this),
0)};h.prototype._initWatch=function(){this.getOption("autoResize")?this._watch():this._unwatch()};h.prototype._watch=function(){var a=this;this._unwatch();var b=function(){a.getOption("autoResize")?!a.frame||a.frame.clientWidth==a.lastWidth&&a.frame.clientHeight==a.lastHeight||(a.lastWidth=a.frame.clientWidth,a.lastHeight=a.frame.clientHeight,a.repaint()):a._unwatch()};l.addEventListener(window,"resize",b);this.watchTimer=setInterval(b,1E3)};h.prototype._unwatch=function(){this.watchTimer&&(clearInterval(this.watchTimer),
this.watchTimer=void 0)};v.prototype=new C;v.prototype.setOptions=C.prototype.setOptions;v.prototype._create=function(){this.frame=document.createElement("div")};v.prototype.setRange=function(a){if(!(a instanceof d||a&&a.start&&a.end))throw new TypeError("Range must be an instance of Range, or an object containing start and end.");this.range=a};v.prototype.getFrame=function(){return this.frame};v.prototype.repaint=function(){var a=l.option.asSize,b=this.options,c=this.props,e=this.frame;e.className=
"timeaxis";var g=e.parentNode;if(g){this._calculateCharSize();var d=this.getOption("orientation"),q=this.getOption("showMinorLabels"),f=this.getOption("showMajorLabels"),h=this.parent.height;c.minorLabelHeight=q?c.minorCharHeight:0;c.majorLabelHeight=f?c.majorCharHeight:0;this.height=c.minorLabelHeight+c.majorLabelHeight;this.width=e.offsetWidth;c.minorLineHeight=h+c.minorLabelHeight;c.minorLineWidth=1;c.majorLineHeight=h+this.height;c.majorLineWidth=1;c=e.nextSibling;g.removeChild(e);"top"==d?(e.style.top=
"0",e.style.left="0",e.style.bottom=""):(e.style.top="",e.style.bottom="0",e.style.left="0");e.style.width=a(b.width,"100%");e.style.height=this.height+"px";this._repaintLabels();this._repaintLine();c?g.insertBefore(e,c):g.appendChild(e)}return this._isResized()};v.prototype._repaintLabels=function(){var a=this.getOption("orientation"),b=l.convert(this.range.start,"Number"),c=l.convert(this.range.end,"Number"),e=this.options.toTime(7*(this.props.minorCharWidth||10)).valueOf()-this.options.toTime(0).valueOf();
this.step=c=new k(new Date(b),new Date(c),e);b=this.dom;b.redundant.majorLines=b.majorLines;b.redundant.majorTexts=b.majorTexts;b.redundant.minorLines=b.minorLines;b.redundant.minorTexts=b.minorTexts;b.majorLines=[];b.majorTexts=[];b.minorLines=[];b.minorTexts=[];c.first();b=void 0;for(e=0;c.hasNext()&&1E3>e;){e++;var g=c.getCurrent(),g=this.options.toScreen(g),d=c.isMajor();this.getOption("showMinorLabels")&&this._repaintMinorText(g,c.getLabelMinor(),a);d&&this.getOption("showMajorLabels")?(0<g&&
(void 0==b&&(b=g),this._repaintMajorText(g,c.getLabelMajor(),a)),this._repaintMajorLine(g,a)):this._repaintMinorLine(g,a);c.next()}this.getOption("showMajorLabels")&&(e=this.options.toTime(0),c=c.getLabelMajor(e),e=c.length*(this.props.majorCharWidth||10)+10,(void 0==b||e<b)&&this._repaintMajorText(0,c,a));l.forEach(this.dom.redundant,function(a){for(;a.length;){var b=a.pop();b&&b.parentNode&&b.parentNode.removeChild(b)}})};v.prototype._repaintMinorText=function(a,b,c){var e=this.dom.redundant.minorTexts.shift();
if(!e){var g=document.createTextNode(""),e=document.createElement("div");e.appendChild(g);e.className="text minor";this.frame.appendChild(e)}this.dom.minorTexts.push(e);e.childNodes[0].nodeValue=b;"top"==c?(e.style.top=this.props.majorLabelHeight+"px",e.style.bottom=""):(e.style.top="",e.style.bottom=this.props.majorLabelHeight+"px");e.style.left=a+"px"};v.prototype._repaintMajorText=function(a,b,c){var e=this.dom.redundant.majorTexts.shift();if(!e){var g=document.createTextNode(b),e=document.createElement("div");
e.className="text major";e.appendChild(g);this.frame.appendChild(e)}this.dom.majorTexts.push(e);e.childNodes[0].nodeValue=b;"top"==c?(e.style.top="0px",e.style.bottom=""):(e.style.top="",e.style.bottom="0px");e.style.left=a+"px"};v.prototype._repaintMinorLine=function(a,b){var c=this.dom.redundant.minorLines.shift();c||(c=document.createElement("div"),c.className="grid vertical minor",this.frame.appendChild(c));this.dom.minorLines.push(c);var e=this.props;"top"==b?(c.style.top=this.props.majorLabelHeight+
"px",c.style.bottom=""):(c.style.top="",c.style.bottom=this.props.majorLabelHeight+"px");c.style.height=e.minorLineHeight+"px";c.style.left=a-e.minorLineWidth/2+"px"};v.prototype._repaintMajorLine=function(a,b){var c=this.dom.redundant.majorLines.shift();c||(c=document.createElement("DIV"),c.className="grid vertical major",this.frame.appendChild(c));this.dom.majorLines.push(c);var e=this.props;"top"==b?(c.style.top="0px",c.style.bottom=""):(c.style.top="",c.style.bottom="0px");c.style.left=a-e.majorLineWidth/
2+"px";c.style.height=e.majorLineHeight+"px"};v.prototype._repaintLine=function(){var a=this.dom.line,b=this.frame,c=this.getOption("orientation");this.getOption("showMinorLabels")||this.getOption("showMajorLabels")?(a?(b.removeChild(a),b.appendChild(a)):(a=document.createElement("div"),a.className="grid horizontal major",b.appendChild(a),this.dom.line=a),"top"==c?(a.style.top=this.height+"px",a.style.bottom=""):(a.style.top="",a.style.bottom=this.height+"px")):a&&a.parentNode&&(a.parentNode.removeChild(a),
delete this.dom.line)};v.prototype._calculateCharSize=function(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="text minor measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.frame.appendChild(this.dom.measureCharMinor));this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight;this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth;
this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="text minor measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.frame.appendChild(this.dom.measureCharMajor));this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight;this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth};v.prototype.snap=function(a){return this.step.snap(a)};D.prototype=
new C;D.prototype.setOptions=C.prototype.setOptions;D.prototype._create=function(){var a=document.createElement("div");a.className="currenttime";a.style.position="absolute";a.style.top="0px";a.style.height="100%";this.bar=a};D.prototype.getFrame=function(){return this.bar};D.prototype.repaint=function(){var a=new Date,b=this.options.toScreen(a);this.bar.style.left=b+"px";this.bar.title="Current time: "+a;return!1};D.prototype.start=function(){function a(){b.stop();var c=1/b.range.conversion(b.parent.width).scale/
10;30>c&&(c=30);1E3<c&&(c=1E3);b.repaint();b.currentTimeTimer=setTimeout(a,c)}var b=this;a()};D.prototype.stop=function(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)};s.prototype=new C;s.prototype.setOptions=C.prototype.setOptions;s.prototype._create=function(){var a=document.createElement("div");a.className="customtime";a.style.position="absolute";a.style.top="0px";a.style.height="100%";this.bar=a;var b=document.createElement("div");b.style.position=
"relative";b.style.top="0px";b.style.left="-10px";b.style.height="100%";b.style.width="20px";a.appendChild(b);this.hammer=Q(a,{prevent_default:!0});this.hammer.on("dragstart",this._onDragStart.bind(this));this.hammer.on("drag",this._onDrag.bind(this));this.hammer.on("dragend",this._onDragEnd.bind(this))};s.prototype.getFrame=function(){return this.bar};s.prototype.repaint=function(){var a=this.options.toScreen(this.customTime);this.bar.style.left=a+"px";this.bar.title="Time: "+this.customTime;return!1};
s.prototype.setCustomTime=function(a){this.customTime=new Date(a.valueOf());this.repaint()};s.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())};s.prototype._onDragStart=function(a){this.eventParams.dragging=!0;this.eventParams.customTime=this.customTime;a.stopPropagation();a.preventDefault()};s.prototype._onDrag=function(a){if(this.eventParams.dragging){var b=a.gesture.deltaX,b=this.options.toScreen(this.eventParams.customTime)+b,b=this.options.toTime(b);this.setCustomTime(b);
this.emit("timechange",{time:new Date(this.customTime.valueOf())});a.stopPropagation();a.preventDefault()}};s.prototype._onDragEnd=function(a){this.eventParams.dragging&&(this.emit("timechanged",{time:new Date(this.customTime.valueOf())}),a.stopPropagation(),a.preventDefault())};p.prototype=new f;p.types={box:N,range:G,rangeoverflow:R,point:E};p.prototype._create=function(){var a=document.createElement("div");a["timeline-itemset"]=this;this.frame=a;var b=document.createElement("div");b.className=
"background";this.backgroundPanel.frame.appendChild(b);this.dom.background=b;b=document.createElement("div");b.className="foreground";a.appendChild(b);this.dom.foreground=b;b=document.createElement("div");b.className="axis";this.dom.axis=b;this.axisPanel.frame.appendChild(b);b=document.createElement("div");b.className="labelset";this.dom.labelSet=b;this.sidePanel.frame.appendChild(b);this._updateUngrouped();this.hammer=Q(a,{prevent_default:!0});this.hammer.on("dragstart",this._onDragStart.bind(this));
this.hammer.on("drag",this._onDrag.bind(this));this.hammer.on("dragend",this._onDragEnd.bind(this))};p.prototype.setOptions=function(a){C.prototype.setOptions.call(this,a)};p.prototype.markDirty=function(){this.groupIds=[];this.stackDirty=!0};p.prototype.hide=function(){this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis);this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background);this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)};
p.prototype.show=function(){this.dom.axis.parentNode||this.axisPanel.frame.appendChild(this.dom.axis);this.dom.background.parentNode||this.backgroundPanel.frame.appendChild(this.dom.background);this.dom.labelSet.parentNode||this.sidePanel.frame.appendChild(this.dom.labelSet)};p.prototype.setRange=function(a){if(!(a instanceof d||a&&a.start&&a.end))throw new TypeError("Range must be an instance of Range, or an object containing start and end.");this.range=a};p.prototype.setSelection=function(a){var b,
c,e,g;if(a){if(!Array.isArray(a))throw new TypeError("Array expected");b=0;for(c=this.selection.length;b<c;b++)e=this.selection[b],(g=this.items[e])&&g.unselect();this.selection=[];b=0;for(c=a.length;b<c;b++)if(e=a[b],g=this.items[e])this.selection.push(e),g.select()}};p.prototype.getSelection=function(){return this.selection.concat([])};p.prototype._deselect=function(a){for(var b=this.selection,c=0,e=b.length;c<e;c++)if(b[c]==a){b.splice(c,1);break}};p.prototype.getFrame=function(){return this.frame};
p.prototype.repaint=function(){var a=this.options.margin,b=this.range,c=l.option.asSize,e=l.option.asString,g=this.options,d=this.getOption("orientation"),q=!1,f=this.frame;"number"===typeof a&&(a={item:a,axis:a});f.className="itemset"+(g.className?" "+e(g.className):"");q=this._orderGroups()||q;e=this.range.end-this.range.start;if(e!=this.lastVisibleInterval||this.width!=this.lastWidth)this.stackDirty=!0;this.lastVisibleInterval=e;this.lastWidth=this.width;var h=this.stackDirty,k=this._firstGroup(),
n={item:a.item,axis:a.axis},y={item:a.item,axis:a.item/2},v=0,a=a.axis+a.item;l.forEach(this.groups,function(a){q=a.repaint(b,a==k?n:y,h)||q;v+=a.height});v=Math.max(v,a);this.stackDirty=!1;f.style.left=c(g.left,"");f.style.right=c(g.right,"");f.style.top=c("top"==d?"0":"");f.style.bottom=c("top"==d?"":"0");f.style.width=c(g.width,"100%");f.style.height=c(v);this.top=f.offsetTop;this.left=f.offsetLeft;this.width=f.offsetWidth;this.height=v;this.dom.axis.style.left=c(g.left,"0");this.dom.axis.style.right=
c(g.right,"");this.dom.axis.style.width=c(g.width,"100%");this.dom.axis.style.height=c(0);this.dom.axis.style.top=c("top"==d?"0":"");this.dom.axis.style.bottom=c("top"==d?"":"0");return q=this._isResized()||q};p.prototype._firstGroup=function(){return this.groups[this.groupIds["top"==this.options.orientation?0:this.groupIds.length-1]]||this.groups.__ungrouped__||null};p.prototype._updateUngrouped=function(){var a=this.groups.__ungrouped__;if(this.groupsData)a&&(a.hide(),delete this.groups.__ungrouped__);
else if(!a){a=new x(null,null,this);this.groups.__ungrouped__=a;for(var b in this.items)this.items.hasOwnProperty(b)&&a.add(this.items[b]);a.show()}};p.prototype.getForeground=function(){return this.dom.foreground};p.prototype.getBackground=function(){return this.dom.background};p.prototype.getAxis=function(){return this.dom.axis};p.prototype.getLabelSet=function(){return this.dom.labelSet};p.prototype.setItems=function(a){var b=this,c=this.itemsData;if(a)if(a instanceof m||a instanceof u)this.itemsData=
a;else throw new TypeError("Data must be an instance of DataSet or DataView");else this.itemsData=null;c&&(l.forEach(this.itemListeners,function(a,b){c.unsubscribe(b,a)}),a=c.getIds(),this._onRemove(a));if(this.itemsData){var e=this.id;l.forEach(this.itemListeners,function(a,c){b.itemsData.on(c,a,e)});a=this.itemsData.getIds();this._onAdd(a);this._updateUngrouped()}};p.prototype.getItems=function(){return this.itemsData};p.prototype.setGroups=function(a){var b=this,c;this.groupsData&&(l.forEach(this.groupListeners,
function(a,c){b.groupsData.unsubscribe(c,a)}),c=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(c));if(a)if(a instanceof m||a instanceof u)this.groupsData=a;else throw new TypeError("Data must be an instance of DataSet or DataView");else this.groupsData=null;if(this.groupsData){var e=this.id;l.forEach(this.groupListeners,function(a,c){b.groupsData.on(c,a,e)});c=this.groupsData.getIds();this._onAddGroups(c)}this._updateUngrouped();this._order();this.emit("change")};p.prototype.getGroups=
function(){return this.groupsData};p.prototype.removeItem=function(a){var b=this.itemsData.get(a),c=this._myDataSet();if(b)this.options.onRemove(b,function(b){b&&c.remove(a)})};p.prototype._onUpdate=function(a){var b=this,c=this.items,e=this.itemOptions;a.forEach(function(a){var d=b.itemsData.get(a),q=c[a],f=d.type||d.start&&d.end&&"range"||b.options.type||"box",h=p.types[f];q&&(h&&q instanceof h?b._updateItem(q,d):(b._removeItem(q),q=null));if(!q)if(h)q=new h(d,b.options,e),q.id=a,b._addItem(q);
else throw new TypeError('Unknown item type "'+f+'"');});this._order();this.stackDirty=!0;this.emit("change")};p.prototype._onAdd=p.prototype._onUpdate;p.prototype._onRemove=function(a){var b=0,c=this;a.forEach(function(a){if(a=c.items[a])b++,c._removeItem(a)});b&&(this._order(),this.stackDirty=!0,this.emit("change"))};p.prototype._order=function(){l.forEach(this.groups,function(a){a.order()})};p.prototype._onUpdateGroups=function(a){this._onAddGroups(a)};p.prototype._onAddGroups=function(a){var b=
this;a.forEach(function(a){var e=b.groupsData.get(a),g=b.groups[a];if(g)g.setData(e);else{if("__ungrouped__"==a)throw Error("Illegal group id. "+a+" is a reserved id.");g=Object.create(b.options);l.extend(g,{height:null});g=new x(a,e,b);b.groups[a]=g;for(var d in b.items)b.items.hasOwnProperty(d)&&(e=b.items[d],e.data.group==a&&g.add(e));g.order();g.show()}});this.emit("change")};p.prototype._onRemoveGroups=function(a){var b=this.groups;a.forEach(function(a){var e=b[a];e&&(e.hide(),delete b[a])});
this.markDirty();this.emit("change")};p.prototype._orderGroups=function(){if(this.groupsData){var a=this.groupsData.getIds({order:this.options.groupOrder}),b=!l.equalArray(a,this.groupIds);if(b){var c=this.groups;a.forEach(function(a){c[a].hide()});a.forEach(function(a){c[a].show()});this.groupIds=a}return b}return!1};p.prototype._addItem=function(a){this.items[a.id]=a;var b=this.groups[this.groupsData?a.data.group:"__ungrouped__"];b&&b.add(a)};p.prototype._updateItem=function(a,b){var c=a.data.group;
a.data=b;a.displayed&&a.repaint();c!=a.data.group&&((c=this.groups[c])&&c.remove(a),(c=this.groups[this.groupsData?a.data.group:"__ungrouped__"])&&c.add(a))};p.prototype._removeItem=function(a){a.hide();delete this.items[a.id];var b=this.selection.indexOf(a.id);-1!=b&&this.selection.splice(b,1);(b=this.groups[this.groupsData?a.data.group:"__ungrouped__"])&&b.remove(a)};p.prototype._constructByEndArray=function(a){for(var b=[],c=0;c<a.length;c++)a[c]instanceof G&&b.push(a[c]);return b};p.prototype.getLabelsWidth=
function(){var a=0;l.forEach(this.groups,function(b){a=Math.max(a,b.getLabelWidth())});return a};p.prototype.getBackgroundHeight=function(){return this.height};p.prototype._onDragStart=function(a){if(this.options.editable.updateTime||this.options.editable.updateGroup){var b=p.itemFromTarget(a),c=this,e;if(b&&b.selected){e=a.target.dragLeftItem;var g=a.target.dragRightItem;e?(e={item:e},c.options.editable.updateTime&&(e.start=b.data.start.valueOf()),c.options.editable.updateGroup&&"group"in b.data&&
(e.group=b.data.group),this.touchParams.itemProps=[e]):g?(e={item:g},c.options.editable.updateTime&&(e.end=b.data.end.valueOf()),c.options.editable.updateGroup&&"group"in b.data&&(e.group=b.data.group),this.touchParams.itemProps=[e]):this.touchParams.itemProps=this.getSelection().map(function(a){a=c.items[a];var b={item:a};c.options.editable.updateTime&&("start"in a.data&&(b.start=a.data.start.valueOf()),"end"in a.data&&(b.end=a.data.end.valueOf()));c.options.editable.updateGroup&&"group"in a.data&&
(b.group=a.data.group);return b});a.stopPropagation()}}};p.prototype._onDrag=function(a){if(this.touchParams.itemProps){var b=this.options.snap||null,c=a.gesture.deltaX/(this.width/(this.range.end-this.range.start));this.touchParams.itemProps.forEach(function(e){if("start"in e){var g=new Date(e.start+c);e.item.data.start=b?b(g):g}"end"in e&&(g=new Date(e.end+c),e.item.data.end=b?b(g):g);if("group"in e&&(g=p.groupFromTarget(a))&&g.groupId!=e.item.data.group){var d=e.item.parent;d.remove(e.item);d.order();
g.add(e.item);g.order();e.item.data.group=g.groupId}});this.stackDirty=!0;this.emit("change");a.stopPropagation()}};p.prototype._onDragEnd=function(a){if(this.touchParams.itemProps){var b=[],c=this,e=this._myDataSet();this.touchParams.itemProps.forEach(function(a){var d=a.item.id,q=c.itemsData.get(d),f=!1;"start"in a.item.data&&(f=a.start!=a.item.data.start.valueOf(),q.start=l.convert(a.item.data.start,e.convert.start));"end"in a.item.data&&(f=f||a.end!=a.item.data.end.valueOf(),q.end=l.convert(a.item.data.end,
e.convert.end));"group"in a.item.data&&(f=f||a.group!=a.item.data.group,q.group=a.item.data.group);if(f)c.options.onMove(q,function(q){q?(q[e.fieldId]=d,b.push(q)):("start"in a&&(a.item.data.start=a.start),"end"in a&&(a.item.data.end=a.end),c.stackDirty=!0,c.emit("change"))})});this.touchParams.itemProps=null;b.length&&e.update(b);a.stopPropagation()}};p.itemFromTarget=function(a){for(a=a.target;a;){if(a.hasOwnProperty("timeline-item"))return a["timeline-item"];a=a.parentNode}return null};p.groupFromTarget=
function(a){for(a=a.target;a;){if(a.hasOwnProperty("timeline-group"))return a["timeline-group"];a=a.parentNode}return null};p.itemSetFromTarget=function(a){for(a=a.target;a;){if(a.hasOwnProperty("timeline-itemset"))return a["timeline-itemset"];a=a.parentNode}return null};p.prototype._myDataSet=function(){for(var a=this.itemsData;a instanceof u;)a=a.data;return a};I.prototype.select=function(){this.selected=!0;this.displayed&&this.repaint()};I.prototype.unselect=function(){this.selected=!1;this.displayed&&
this.repaint()};I.prototype.setParent=function(a){this.displayed?(this.hide(),(this.parent=a)&&this.show()):this.parent=a};I.prototype.isVisible=function(a){return!1};I.prototype.show=function(){return!1};I.prototype.hide=function(){return!1};I.prototype.repaint=function(){};I.prototype.repositionX=function(){};I.prototype.repositionY=function(){};I.prototype._repaintDeleteButton=function(a){if(this.selected&&this.options.editable.remove&&!this.dom.deleteButton){var b=this,c=document.createElement("div");
c.className="delete";c.title="Delete this item";Q(c,{preventDefault:!0}).on("tap",function(a){b.parent.removeFromDataSet(b);a.stopPropagation()});a.appendChild(c);this.dom.deleteButton=c}else!this.selected&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null)};N.prototype=new I(null);N.prototype.isVisible=function(a){var b=(a.end-a.start)/4;return this.data.start>a.start-b&&this.data.start<a.end+b};
N.prototype.repaint=function(){var a=this.dom;a||(a=this.dom={},a.box=document.createElement("DIV"),a.content=document.createElement("DIV"),a.content.className="content",a.box.appendChild(a.content),a.line=document.createElement("DIV"),a.line.className="line",a.dot=document.createElement("DIV"),a.dot.className="dot",a.box["timeline-item"]=this);if(!this.parent)throw Error("Cannot repaint item: no parent attached");if(!a.box.parentNode){var b=this.parent.getForeground();if(!b)throw Error("Cannot repaint time axis: parent has no foreground container element");
b.appendChild(a.box)}if(!a.line.parentNode){var c=this.parent.getBackground();if(!c)throw Error("Cannot repaint time axis: parent has no background container element");c.appendChild(a.line)}if(!a.dot.parentNode){b=this.parent.getAxis();if(!c)throw Error("Cannot repaint time axis: parent has no axis container element");b.appendChild(a.dot)}this.displayed=!0;if(this.data.content!=this.content){this.content=this.data.content;if(this.content instanceof Element)a.content.innerHTML="",a.content.appendChild(this.content);
else if(void 0!=this.data.content)a.content.innerHTML=this.content;else throw Error('Property "content" missing in item '+this.data.id);this.dirty=!0}c=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");this.className!=c&&(this.className=c,a.box.className="item box"+c,a.line.className="item line"+c,a.dot.className="item dot"+c,this.dirty=!0);this.dirty&&(this.props.dot.height=a.dot.offsetHeight,this.props.dot.width=a.dot.offsetWidth,this.props.line.width=a.line.offsetWidth,
this.width=a.box.offsetWidth,this.height=a.box.offsetHeight,this.dirty=!1);this._repaintDeleteButton(a.box)};N.prototype.show=function(){this.displayed||this.repaint()};N.prototype.hide=function(){if(this.displayed){var a=this.dom;a.box.parentNode&&a.box.parentNode.removeChild(a.box);a.line.parentNode&&a.line.parentNode.removeChild(a.line);a.dot.parentNode&&a.dot.parentNode.removeChild(a.dot);this.left=this.top=null;this.displayed=!1}};N.prototype.repositionX=function(){var a=this.defaultOptions.toScreen(this.data.start),
b=this.options.align||this.defaultOptions.align,c=this.dom.box,e=this.dom.line,g=this.dom.dot;this.left="right"==b?a-this.width:"left"==b?a:a-this.width/2;c.style.left=this.left+"px";e.style.left=a-this.props.line.width/2+"px";g.style.left=a-this.props.dot.width/2+"px"};N.prototype.repositionY=function(){var a=this.dom.box,b=this.dom.line,c=this.dom.dot;"top"==(this.options.orientation||this.defaultOptions.orientation)?(a.style.top=(this.top||0)+"px",a.style.bottom="",b.style.top="0",b.style.bottom=
"",b.style.height=this.parent.top+this.top+1+"px"):(a.style.top="",a.style.bottom=(this.top||0)+"px",b.style.top=this.parent.top+this.parent.height-this.top-1+"px",b.style.bottom="0",b.style.height="");c.style.top=-this.props.dot.height/2+"px"};E.prototype=new I(null);E.prototype.isVisible=function(a){var b=(a.end-a.start)/4;return this.data.start>a.start-b&&this.data.start<a.end+b};E.prototype.repaint=function(){var a=this.dom;a||(a=this.dom={},a.point=document.createElement("div"),a.content=document.createElement("div"),
a.content.className="content",a.point.appendChild(a.content),a.dot=document.createElement("div"),a.point.appendChild(a.dot),a.point["timeline-item"]=this);if(!this.parent)throw Error("Cannot repaint item: no parent attached");if(!a.point.parentNode){var b=this.parent.getForeground();if(!b)throw Error("Cannot repaint time axis: parent has no foreground container element");b.appendChild(a.point)}this.displayed=!0;if(this.data.content!=this.content){this.content=this.data.content;if(this.content instanceof
Element)a.content.innerHTML="",a.content.appendChild(this.content);else if(void 0!=this.data.content)a.content.innerHTML=this.content;else throw Error('Property "content" missing in item '+this.data.id);this.dirty=!0}b=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");this.className!=b&&(this.className=b,a.point.className="item point"+b,a.dot.className="item dot"+b,this.dirty=!0);this.dirty&&(this.width=a.point.offsetWidth,this.height=a.point.offsetHeight,this.props.dot.width=
a.dot.offsetWidth,this.props.dot.height=a.dot.offsetHeight,this.props.content.height=a.content.offsetHeight,a.content.style.marginLeft=2*this.props.dot.width+"px",a.dot.style.top=(this.height-this.props.dot.height)/2+"px",a.dot.style.left=this.props.dot.width/2+"px",this.dirty=!1);this._repaintDeleteButton(a.point)};E.prototype.show=function(){this.displayed||this.repaint()};E.prototype.hide=function(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),
this.left=this.top=null,this.displayed=!1)};E.prototype.repositionX=function(){this.left=this.defaultOptions.toScreen(this.data.start)-this.props.dot.width;this.dom.point.style.left=this.left+"px"};E.prototype.repositionY=function(){var a=this.dom.point;"top"==(this.options.orientation||this.defaultOptions.orientation)?(a.style.top=this.top+"px",a.style.bottom=""):(a.style.top="",a.style.bottom=this.top+"px")};G.prototype=new I(null);G.prototype.baseClassName="item range";G.prototype.isVisible=function(a){return this.data.start<
a.end&&this.data.end>a.start};G.prototype.repaint=function(){var a=this.dom;a||(a=this.dom={},a.box=document.createElement("div"),a.content=document.createElement("div"),a.content.className="content",a.box.appendChild(a.content),a.box["timeline-item"]=this);if(!this.parent)throw Error("Cannot repaint item: no parent attached");if(!a.box.parentNode){var b=this.parent.getForeground();if(!b)throw Error("Cannot repaint time axis: parent has no foreground container element");b.appendChild(a.box)}this.displayed=
!0;if(this.data.content!=this.content){this.content=this.data.content;if(this.content instanceof Element)a.content.innerHTML="",a.content.appendChild(this.content);else if(void 0!=this.data.content)a.content.innerHTML=this.content;else throw Error('Property "content" missing in item '+this.data.id);this.dirty=!0}b=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");this.className!=b&&(this.className=b,a.box.className=this.baseClassName+b,this.dirty=!0);this.dirty&&(this.props.content.width=
this.dom.content.offsetWidth,this.height=this.dom.box.offsetHeight,this.dirty=!1);this._repaintDeleteButton(a.box);this._repaintDragLeft();this._repaintDragRight()};G.prototype.show=function(){this.displayed||this.repaint()};G.prototype.hide=function(){if(this.displayed){var a=this.dom.box;a.parentNode&&a.parentNode.removeChild(a);this.left=this.top=null;this.displayed=!1}};G.prototype.repositionX=function(){var a=this.props,b=this.parent.width,c=this.defaultOptions.toScreen(this.data.start),e=this.defaultOptions.toScreen(this.data.end),
g="padding"in this.options?this.options.padding:this.defaultOptions.padding;c<-b&&(c=-b);e>2*b&&(e=2*b);a=0>c?Math.min(-c,e-c-a.content.width-2*g):0;this.left=c;this.width=Math.max(e-c,1);this.dom.box.style.left=this.left+"px";this.dom.box.style.width=this.width+"px";this.dom.content.style.left=a+"px"};G.prototype.repositionY=function(){var a=this.dom.box;"top"==(this.options.orientation||this.defaultOptions.orientation)?(a.style.top=this.top+"px",a.style.bottom=""):(a.style.top="",a.style.bottom=
this.top+"px")};G.prototype._repaintDragLeft=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragLeft){var a=document.createElement("div");a.className="drag-left";a.dragLeftItem=this;Q(a,{preventDefault:!0}).on("drag",function(){});this.dom.box.appendChild(a);this.dom.dragLeft=a}else!this.selected&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)};G.prototype._repaintDragRight=function(){if(this.selected&&
this.options.editable.updateTime&&!this.dom.dragRight){var a=document.createElement("div");a.className="drag-right";a.dragRightItem=this;Q(a,{preventDefault:!0}).on("drag",function(){});this.dom.box.appendChild(a);this.dom.dragRight=a}else!this.selected&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)};R.prototype=new G(null);R.prototype.baseClassName="item rangeoverflow";R.prototype.repositionX=function(){var a=
this.parent.width,b=this.defaultOptions.toScreen(this.data.start),c=this.defaultOptions.toScreen(this.data.end);b<-a&&(b=-a);c>2*a&&(c=2*a);a=Math.max(-b,0);this.left=b;b=Math.max(c-b,1);this.width=b+this.props.content.width;this.dom.box.style.left=this.left+"px";this.dom.box.style.width=b+"px";this.dom.content.style.left=a+"px"};x.prototype._create=function(){var a=document.createElement("div");a.className="vlabel";this.dom.label=a;var b=document.createElement("div");b.className="inner";a.appendChild(b);
this.dom.inner=b;a=document.createElement("div");a.className="group";a["timeline-group"]=this;this.dom.foreground=a;this.dom.background=document.createElement("div");this.dom.axis=document.createElement("div");this.dom.marker=document.createElement("div");this.dom.marker.style.visibility="hidden";this.dom.marker.innerHTML="?";this.dom.background.appendChild(this.dom.marker)};x.prototype.setData=function(a){var b=a&&a.content;b instanceof Element?this.dom.inner.appendChild(b):this.dom.inner.innerHTML=
void 0!=b?b:this.groupId;(a=a&&a.className)&&l.addClassName(this.dom.label,a)};x.prototype.getForeground=function(){return this.dom.foreground};x.prototype.getBackground=function(){return this.dom.background};x.prototype.getAxis=function(){return this.dom.axis};x.prototype.getLabelWidth=function(){return this.props.label.width};x.prototype.repaint=function(a,b,c){var e=!1;this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,a);a=this.dom.marker.clientHeight;a!=this.lastMarkerHeight&&
(this.lastMarkerHeight=a,l.forEach(this.items,function(a){a.dirty=!0;a.displayed&&a.repaint()}),c=!0);this.itemSet.options.stack?V.stack(this.visibleItems,b,c):V.nostack(this.visibleItems,b);c=0;for(a=this.visibleItems.length;c<a;c++)this.visibleItems[c].repositionY();c=this.visibleItems;if(c.length){var g=c[0].top,d=c[0].top+c[0].height;l.forEach(c,function(a){g=Math.min(g,a.top);d=Math.max(d,a.top+a.height)});b=d-g+b.axis+b.item}else b=b.axis+b.item;b=Math.max(b,this.props.label.height);c=this.dom.foreground;
this.top=c.offsetTop;this.left=c.offsetLeft;this.width=c.offsetWidth;e=l.updateProperty(this,"height",b)||e;e=l.updateProperty(this.props.label,"width",this.dom.inner.clientWidth)||e;e=l.updateProperty(this.props.label,"height",this.dom.inner.clientHeight)||e;c.style.height=b+"px";this.dom.label.style.height=b+"px";return e};x.prototype.show=function(){this.dom.label.parentNode||this.itemSet.getLabelSet().appendChild(this.dom.label);this.dom.foreground.parentNode||this.itemSet.getForeground().appendChild(this.dom.foreground);
this.dom.background.parentNode||this.itemSet.getBackground().appendChild(this.dom.background);this.dom.axis.parentNode||this.itemSet.getAxis().appendChild(this.dom.axis)};x.prototype.hide=function(){var a=this.dom.label;a.parentNode&&a.parentNode.removeChild(a);a=this.dom.foreground;a.parentNode&&a.parentNode.removeChild(a);a=this.dom.background;a.parentNode&&a.parentNode.removeChild(a);a=this.dom.axis;a.parentNode&&a.parentNode.removeChild(a)};x.prototype.add=function(a){this.items[a.id]=a;a.setParent(this);
a instanceof G&&-1==this.visibleItems.indexOf(a)&&this._checkIfVisible(a,this.visibleItems,this.itemSet.range)};x.prototype.remove=function(a){delete this.items[a.id];a.setParent(this.itemSet);a=this.visibleItems.indexOf(a);-1!=a&&this.visibleItems.splice(a,1)};x.prototype.removeFromDataSet=function(a){this.itemSet.removeItem(a.id)};x.prototype.order=function(){var a=l.toArray(this.items);this.orderedItems.byStart=a;this.orderedItems.byEnd=this._constructByEndArray(a);V.orderByStart(this.orderedItems.byStart);
V.orderByEnd(this.orderedItems.byEnd)};x.prototype._constructByEndArray=function(a){for(var b=[],c=0;c<a.length;c++)a[c]instanceof G&&b.push(a[c]);return b};x.prototype._updateVisibleItems=function(a,b,c){var e=[],g;if(0<b.length)for(g=0;g<b.length;g++)this._checkIfVisible(b[g],e,c);b=0==e.length?this._binarySearch(a,c,!1):a.byStart.indexOf(e[0]);var d=this._binarySearch(a,c,!0);if(-1!=b){for(g=b;0<=g&&!this._checkIfInvisible(a.byStart[g],e,c);g--);for(g=b+1;g<a.byStart.length&&!this._checkIfInvisible(a.byStart[g],
e,c);g++);}if(-1!=d){for(g=d;0<=g&&!this._checkIfInvisible(a.byEnd[g],e,c);g--);for(g=d+1;g<a.byEnd.length&&!this._checkIfInvisible(a.byEnd[g],e,c);g++);}return e};x.prototype._binarySearch=function(a,b,c){var e=[],g=c?"end":"start",e=!0==c?a.byEnd:a.byStart;a=b.end-b.start;c=!1;var d=0,q=e.length,f=Math.floor(.5*(q+d)),h;if(0==q)f=-1;else if(1==q)f=e[f].data[g]>b.start-a&&e[f].data[g]<b.end?0:-1;else for(q-=1;!1==c;)e[f].data[g]>b.start-a&&e[f].data[g]<b.end?c=!0:(e[f].data[g]<b.start-a?d=Math.floor(.5*
(q+d)):q=Math.floor(.5*(q+d)),h=Math.floor(.5*(q+d)),f==h?(f=-1,c=!0):f=h);return f};x.prototype._checkIfInvisible=function(a,b,c){return a.isVisible(c)?(a.displayed||a.show(),a.repositionX(),-1==b.indexOf(a)&&b.push(a),!1):!0};x.prototype._checkIfVisible=function(a,b,c){a.isVisible(c)?(a.displayed||a.show(),a.repositionX(),b.push(a)):a.displayed&&a.hide()};$(F.prototype);F.prototype.setOptions=function(a){l.deepExtend(this.options,a);if("editable"in a){var b="boolean"===typeof a.editable;this.options.editable=
{updateTime:b?a.editable:a.editable.updateTime||!1,updateGroup:b?a.editable:a.editable.updateGroup||!1,add:b?a.editable:a.editable.add||!1,remove:b?a.editable:a.editable.remove||!1}}this.range.setRange(a.start,a.end);if("editable"in a||"selectable"in a)this.options.selectable?this.setSelection(this.getSelection()):this.setSelection([]);this.itemSet.markDirty();b=function(a){if(!(this.options[a]instanceof Function)||2!=this.options[a].length)throw Error("option "+a+" must be a function "+a+"(item, callback)");
}.bind(this);["onAdd","onUpdate","onRemove","onMove"].forEach(b);this.options.showCurrentTime?this.mainPanel.hasChild(this.currentTime)||(this.mainPanel.appendChild(this.currentTime),this.currentTime.start()):this.mainPanel.hasChild(this.currentTime)&&(this.currentTime.stop(),this.mainPanel.removeChild(this.currentTime));this.options.showCustomTime?this.mainPanel.hasChild(this.customTime)||this.mainPanel.appendChild(this.customTime):this.mainPanel.hasChild(this.customTime)&&this.mainPanel.removeChild(this.customTime);
if(a&&a.order)throw Error("Option order is deprecated. There is no replacement for this feature.");this.rootPanel.repaint()};F.prototype.setCustomTime=function(a){if(!this.customTime)throw Error("Cannot get custom time: Custom time bar is not enabled");this.customTime.setCustomTime(a)};F.prototype.getCustomTime=function(){if(!this.customTime)throw Error("Cannot get custom time: Custom time bar is not enabled");return this.customTime.getCustomTime()};F.prototype.setItems=function(a){var b=null==this.itemsData;
this.itemsData=a=a?a instanceof m||a instanceof u?a:new m(a,{convert:{start:"Date",end:"Date"}}):null;this.itemSet.setItems(a);!b||void 0!=this.options.start&&void 0!=this.options.end||(this.fit(),b=void 0!=this.options.start?l.convert(this.options.start,"Date"):null,a=void 0!=this.options.end?l.convert(this.options.end,"Date"):null,this.setWindow(b,a))};F.prototype.setGroups=function(a){this.groupsData=a=a?a instanceof m||a instanceof u?a:new m(a):null;this.itemSet.setGroups(a)};F.prototype.clear=
function(a){a&&!a.items||this.setItems(null);a&&!a.groups||this.setGroups(null);a&&!a.options||this.setOptions(this.defaultOptions)};F.prototype.fit=function(){var a=this.getItemRange(),b=a.min,a=a.max;if(null!=b&&null!=a){var c=a.valueOf()-b.valueOf();0>=c&&(c=864E5);b=new Date(b.valueOf()-.05*c);a=new Date(a.valueOf()+.05*c)}null===b&&null===a||this.range.setRange(b,a)};F.prototype.getItemRange=function(){var a=this.itemsData,b=null,c=null;if(a){var b=(b=a.min("start"))?b.start.valueOf():null,e=
a.max("start");e&&(c=e.start.valueOf());(a=a.max("end"))&&(c=null==c?a.end.valueOf():Math.max(c,a.end.valueOf()))}return{min:null!=b?new Date(b):null,max:null!=c?new Date(c):null}};F.prototype.setSelection=function(a){this.itemSet.setSelection(a)};F.prototype.getSelection=function(){return this.itemSet.getSelection()};F.prototype.setWindow=function(a,b){if(1==arguments.length){var c=arguments[0];this.range.setRange(c.start,c.end)}else this.range.setRange(a,b)};F.prototype.getWindow=function(){var a=
this.range.getRange();return{start:new Date(a.start),end:new Date(a.end)}};F.prototype.repaint=function(){this.rootPanel.repaint()};F.prototype._onSelectItem=function(a){if(this.options.selectable){var b=a.gesture.srcEvent&&a.gesture.srcEvent.shiftKey;if(a.gesture.srcEvent&&a.gesture.srcEvent.ctrlKey||b)this._onMultiSelectItem(a);else{var b=this.getSelection(),c=p.itemFromTarget(a);this.setSelection(c?[c.id]:[]);c=this.getSelection();l.equalArray(b,c)||this.emit("select",{items:this.getSelection()});
a.stopPropagation()}}};F.prototype._onAddItem=function(a){if(this.options.selectable&&this.options.editable.add){var b=this,c=p.itemFromTarget(a);if(c)a=b.itemsData.get(c.id),this.options.onUpdate(a,function(a){a&&b.itemsData.update(a)});else{var c=T.util.getAbsoluteLeft(this.contentPanel.frame),c=a.gesture.center.pageX-c,e={start:this.timeAxis.snap(this._toTime(c)),content:"new item"};if("range"===this.options.type||"rangeoverflow"==this.options.type)e.end=this.timeAxis.snap(this._toTime(c+this.rootPanel.width/
5));c=l.randomUUID();e[this.itemsData.fieldId]=c;if(a=p.groupFromTarget(a))e.group=a.groupId;this.options.onAdd(e,function(a){a&&b.itemsData.add(e)})}}};F.prototype._onMultiSelectItem=function(a){if(this.options.selectable){var b,c=p.itemFromTarget(a);if(c){b=this.getSelection();var e=b.indexOf(c.id);-1==e?b.push(c.id):b.splice(e,1);this.setSelection(b);this.emit("select",{items:this.getSelection()});a.stopPropagation()}}};F.prototype._toTime=function(a){var b=this.range.conversion(this.mainPanel.width);
return new Date(a/b.scale+b.offset)};F.prototype._toScreen=function(a){var b=this.range.conversion(this.mainPanel.width);return(a.valueOf()-b.offset)*b.scale};(function(a){function b(a){t=a;a={};r=0;A=t.charAt(0);f();"strict"==z&&(a.strict=!0,f());if("graph"==z||"digraph"==z)a.type=z,f();s==p.IDENTIFIER&&(a.id=z,f());if("{"!=z)throw v("Angle bracket { expected");f();h(a);if("}"!=z)throw v("Angle bracket } expected");f();if(""!==z)throw v("End of file expected");f();delete a.node;delete a.edge;delete a.graph;
return a}function c(){r++;A=t.charAt(r)}function e(){return t.charAt(r+1)}function g(a,b){a||(a={});if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function d(a,b){for(var c,e,f=null,q=[a],w=a;w.parent;)q.push(w.parent),w=w.parent;if(w.nodes)for(c=0,e=w.nodes.length;c<e;c++)if(b.id===w.nodes[c].id){f=w.nodes[c];break}f||(f={id:b.id},a.node&&(f.attr=g(f.attr,a.node)));for(c=q.length-1;0<=c;c--)e=q[c],e.nodes||(e.nodes=[]),-1==e.nodes.indexOf(f)&&e.nodes.push(f);b.attr&&(f.attr=g(f.attr,
b.attr))}function q(a,b,c,e,d){b={from:b,to:c,type:e};a.edge&&(b.attr=g({},a.edge));b.attr=g(b.attr||{},d);return b}function f(){s=p.NULL;for(z="";" "==A||"\t"==A||"\n"==A||"\r"==A;)c();do{var a=!1;if("#"==A){for(var b=r-1;" "==t.charAt(b)||"\t"==t.charAt(b);)b--;if("\n"==t.charAt(b)||""==t.charAt(b)){for(;""!=A&&"\n"!=A;)c();a=!0}}if("/"==A&&"/"==e()){for(;""!=A&&"\n"!=A;)c();a=!0}if("/"==A&&"*"==e()){for(;""!=A;)if("*"==A&&"/"==e()){c();c();break}else c();a=!0}for(;" "==A||"\t"==A||"\n"==A||"\r"==
A;)c()}while(a);if(""==A)s=p.DELIMITER;else if(a=A+e(),m[a])s=p.DELIMITER,z=a,c(),c();else if(m[A])s=p.DELIMITER,z=A,c();else if(u.test(A)||"-"==A){z+=A;for(c();u.test(A);)z+=A,c();"false"==z?z=!1:"true"==z?z=!0:isNaN(Number(z))||(z=Number(z));s=p.IDENTIFIER}else if('"'==A){for(c();""!=A&&('"'!=A||'"'==A&&'"'==e());)z+=A,'"'==A&&c(),c();if('"'!=A)throw v('End of string " expected');c();s=p.IDENTIFIER}else{for(s=p.UNKNOWN;""!=A;)z+=A,c();throw new SyntaxError('Syntax error in part "'+(30>=z.length?
z:z.substr(0,27)+"...")+'"');}}function h(a){for(;""!==z&&"}"!=z;){var b=a,c=l(b);if(c)n(b,c);else if(!k(b)){if(s!=p.IDENTIFIER)throw v("Identifier expected");c=z;f();if("="==z){f();if(s!=p.IDENTIFIER)throw v("Identifier expected");b[c]=z;f()}else{var e={id:c},g=y();g&&(e.attr=g);d(b,e);n(b,c)}}";"==z&&f()}}function l(a){var b=null;"subgraph"==z&&(b={type:"subgraph"},f(),s==p.IDENTIFIER&&(b.id=z,f()));if("{"==z){f();b||(b={});b.parent=a;b.node=a.node;b.edge=a.edge;b.graph=a.graph;h(b);if("}"!=z)throw v("Angle bracket } expected");
f();delete b.node;delete b.edge;delete b.graph;delete b.parent;a.subgraphs||(a.subgraphs=[]);a.subgraphs.push(b)}return b}function k(a){return"node"==z?(f(),a.node=y(),"node"):"edge"==z?(f(),a.edge=y(),"edge"):"graph"==z?(f(),a.graph=y(),"graph"):null}function n(a,b){for(;"->"==z||"--"==z;){var c,e=z;f();c=l(a);if(!c){if(s!=p.IDENTIFIER)throw v("Identifier or subgraph expected");c=z;d(a,{id:c});f()}var h=y(),h=q(a,b,c,e,h),e=a;e.edges||(e.edges=[]);e.edges.push(h);e.edge&&(e=g({},e.edge),h.attr=g(e,
h.attr));b=c}}function y(){for(var a=null;"["==z;){f();for(a={};""!==z&&"]"!=z;){if(s!=p.IDENTIFIER)throw v("Attribute name expected");var b=z;f();if("="!=z)throw v("Equal sign = expected");f();if(s!=p.IDENTIFIER)throw v("Attribute value expected");for(var c=a,e=z,b=b.split(".");b.length;){var g=b.shift();b.length?(c[g]||(c[g]={}),c=c[g]):c[g]=e}f();","==z&&f()}if("]"!=z)throw v("Bracket ] expected");f()}return a}function v(a){return new SyntaxError(a+', got "'+(30>=z.length?z:z.substr(0,27)+"...")+
'" (char '+r+")")}function D(a,b,c){a instanceof Array?a.forEach(function(a){b instanceof Array?b.forEach(function(b){c(a,b)}):c(a,b)}):b instanceof Array?b.forEach(function(b){c(a,b)}):c(a,b)}var p={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},m={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},t="",r=0,A="",z="",s=p.NULL,u=/[a-zA-Z_0-9.:#]/;a.parseDOT=b;a.DOTToGraph=function(a){a=b(a);var c={nodes:[],edges:[],options:{}};a.nodes&&a.nodes.forEach(function(a){var b={id:a.id,label:String(a.label||
a.id)};g(b,a.attr);b.image&&(b.shape="image");c.nodes.push(b)});if(a.edges){var e=function(a){var b={from:a.from,to:a.to};g(b,a.attr);b.style="->"==a.type?"arrow":"line";return b};a.edges.forEach(function(a){var b,g;b=a.from instanceof Object?a.from.nodes:{id:a.from};g=a.to instanceof Object?a.to.nodes:{id:a.to};a.from instanceof Object&&a.from.edges&&a.from.edges.forEach(function(a){a=e(a);c.edges.push(a)});D(b,g,function(b,g){var d=q(c,b.id,g.id,a.type,a.attr),d=e(d);c.edges.push(d)});a.to instanceof
Object&&a.to.edges&&a.to.edges.forEach(function(a){a=e(a);c.edges.push(a)})})}a.attr&&(c.options=a.attr);return c}})("undefined"!==typeof l?l:O);"undefined"!==typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.circle=function(a,b,c){this.beginPath();this.arc(a,b,c,0,2*Math.PI,!1)},CanvasRenderingContext2D.prototype.square=function(a,b,c){this.beginPath();this.rect(a-c,b-c,2*c,2*c)},CanvasRenderingContext2D.prototype.triangle=function(a,b,c){this.beginPath();var e=2*c;c=e/2;var g=
Math.sqrt(3)/6*e,e=Math.sqrt(e*e-c*c);this.moveTo(a,b-(e-g));this.lineTo(a+c,b+g);this.lineTo(a-c,b+g);this.lineTo(a,b-(e-g));this.closePath()},CanvasRenderingContext2D.prototype.triangleDown=function(a,b,c){this.beginPath();var e=2*c;c=e/2;var g=Math.sqrt(3)/6*e,e=Math.sqrt(e*e-c*c);this.moveTo(a,b+(e-g));this.lineTo(a+c,b-g);this.lineTo(a-c,b-g);this.lineTo(a,b+(e-g));this.closePath()},CanvasRenderingContext2D.prototype.star=function(a,b,c){this.beginPath();for(var e=0;10>e;e++){var g=0===e%2?1.3*
c:.5*c;this.lineTo(a+g*Math.sin(2*e*Math.PI/10),b-g*Math.cos(2*e*Math.PI/10))}this.closePath()},CanvasRenderingContext2D.prototype.roundRect=function(a,b,c,e,g){var d=Math.PI/180;0>c-2*g&&(g=c/2);0>e-2*g&&(g=e/2);this.beginPath();this.moveTo(a+g,b);this.lineTo(a+c-g,b);this.arc(a+c-g,b+g,g,270*d,360*d,!1);this.lineTo(a+c,b+e-g);this.arc(a+c-g,b+e-g,g,0,90*d,!1);this.lineTo(a+g,b+e);this.arc(a+g,b+e-g,g,90*d,180*d,!1);this.lineTo(a,b+g);this.arc(a+g,b+g,g,180*d,270*d,!1)},CanvasRenderingContext2D.prototype.ellipse=
function(a,b,c,e){var g=c/2*.5522848,d=e/2*.5522848,f=a+c,h=b+e;c=a+c/2;e=b+e/2;this.beginPath();this.moveTo(a,e);this.bezierCurveTo(a,e-d,c-g,b,c,b);this.bezierCurveTo(c+g,b,f,e-d,f,e);this.bezierCurveTo(f,e+d,c+g,h,c,h);this.bezierCurveTo(c-g,h,a,e+d,a,e)},CanvasRenderingContext2D.prototype.database=function(a,b,c,e){var g=1/3*e,d=c/2*.5522848,f=g/2*.5522848,h=a+c,l=b+g;c=a+c/2;var k=b+g/2,g=b+(e-g/2);e=b+e;this.beginPath();this.moveTo(h,k);this.bezierCurveTo(h,k+f,c+d,l,c,l);this.bezierCurveTo(c-
d,l,a,k+f,a,k);this.bezierCurveTo(a,k-f,c-d,b,c,b);this.bezierCurveTo(c+d,b,h,k-f,h,k);this.lineTo(h,g);this.bezierCurveTo(h,g+f,c+d,e,c,e);this.bezierCurveTo(c-d,e,a,g+f,a,g);this.lineTo(a,k)},CanvasRenderingContext2D.prototype.arrow=function(a,b,c,e){var g=a-e*Math.cos(c),d=b-e*Math.sin(c),f=a-.9*e*Math.cos(c),h=b-.9*e*Math.sin(c),l=g+e/3*Math.cos(c+.5*Math.PI),k=d+e/3*Math.sin(c+.5*Math.PI),g=g+e/3*Math.cos(c-.5*Math.PI);c=d+e/3*Math.sin(c-.5*Math.PI);this.beginPath();this.moveTo(a,b);this.lineTo(l,
k);this.lineTo(f,h);this.lineTo(g,c);this.closePath()},CanvasRenderingContext2D.prototype.dashedLine=function(a,b,c,e,g){g||(g=[10,5]);var d=g.length;this.moveTo(a,b);c-=a;var f=e-b;e=f/c;for(var f=Math.sqrt(c*c+f*f),h=0,l=!0;.1<=f;){var k=g[h++%d];k>f&&(k=f);var n=Math.sqrt(k*k/(1+e*e));0>c&&(n=-n);a+=n;b+=e*n;this[l?"lineTo":"moveTo"](a,b);f-=k;l=!l}});r.prototype.resetCluster=function(){this.formationScale=void 0;this.clusterSize=1;this.containedNodes={};this.containedEdges={};this.clusterSessions=
[]};r.prototype.attachEdge=function(a){-1==this.edges.indexOf(a)&&this.edges.push(a);-1==this.dynamicEdges.indexOf(a)&&this.dynamicEdges.push(a);this.dynamicEdgesLength=this.dynamicEdges.length};r.prototype.detachEdge=function(a){a=this.edges.indexOf(a);-1!=a&&(this.edges.splice(a,1),this.dynamicEdges.splice(a,1));this.dynamicEdgesLength=this.dynamicEdges.length};r.prototype.setProperties=function(a,b){if(a){this.originalLabel=void 0;void 0!==a.id&&(this.id=a.id);void 0!==a.label&&(this.originalLabel=
this.label=a.label);void 0!==a.title&&(this.title=a.title);void 0!==a.group&&(this.group=a.group);void 0!==a.x&&(this.x=a.x);void 0!==a.y&&(this.y=a.y);void 0!==a.value&&(this.value=a.value);void 0!==a.level&&(this.level=a.level,this.preassignedLevel=!0);void 0!==a.mass&&(this.mass=a.mass);void 0!==a.horizontalAlignLeft&&(this.horizontalAlignLeft=a.horizontalAlignLeft);void 0!==a.verticalAlignTop&&(this.verticalAlignTop=a.verticalAlignTop);void 0!==a.triggerFunction&&(this.triggerFunction=a.triggerFunction);
if(void 0===this.id)throw"Node must have an id";if(this.group){var c=this.grouplist.get(this.group),e;for(e in c)c.hasOwnProperty(e)&&(this[e]=c[e])}void 0!==a.shape&&(this.shape=a.shape);void 0!==a.image&&(this.image=a.image);void 0!==a.radius&&(this.radius=a.radius);void 0!==a.color&&(this.color=l.parseColor(a.color));void 0!==a.fontColor&&(this.fontColor=a.fontColor);void 0!==a.fontSize&&(this.fontSize=a.fontSize);void 0!==a.fontFace&&(this.fontFace=a.fontFace);if(void 0!==this.image&&""!=this.image)if(this.imagelist)this.imageObj=
this.imagelist.load(this.image);else throw"No imagelist provided";this.xFixed=this.xFixed||void 0!==a.x&&!a.allowedToMoveX;this.yFixed=this.yFixed||void 0!==a.y&&!a.allowedToMoveY;this.radiusFixed=this.radiusFixed||void 0!==a.radius;"image"==this.shape&&(this.radiusMin=b.nodes.widthMin,this.radiusMax=b.nodes.widthMax);switch(this.shape){case "database":this.draw=this._drawDatabase;this.resize=this._resizeDatabase;break;case "box":this.draw=this._drawBox;this.resize=this._resizeBox;break;case "circle":this.draw=
this._drawCircle;this.resize=this._resizeCircle;break;case "ellipse":this.draw=this._drawEllipse;this.resize=this._resizeEllipse;break;case "image":this.draw=this._drawImage;this.resize=this._resizeImage;break;case "text":this.draw=this._drawText;this.resize=this._resizeText;break;case "dot":this.draw=this._drawDot;this.resize=this._resizeShape;break;case "square":this.draw=this._drawSquare;this.resize=this._resizeShape;break;case "triangle":this.draw=this._drawTriangle;this.resize=this._resizeShape;
break;case "triangleDown":this.draw=this._drawTriangleDown;this.resize=this._resizeShape;break;case "star":this.draw=this._drawStar;this.resize=this._resizeShape;break;default:this.draw=this._drawEllipse,this.resize=this._resizeEllipse}this._reset()}};r.prototype.select=function(){this.selected=!0;this._reset()};r.prototype.unselect=function(){this.selected=!1;this._reset()};r.prototype.clearSizeCache=function(){this._reset()};r.prototype._reset=function(){this.height=this.width=void 0};r.prototype.getTitle=
function(){return"function"===typeof this.title?this.title():this.title};r.prototype.distanceToBorder=function(a,b){this.width||this.resize(a);switch(this.shape){case "circle":case "dot":return this.radius+1;case "ellipse":var c=this.width/2,e=this.height/2,g=Math.sin(b)*c,d=Math.cos(b)*e;return c*e/Math.sqrt(g*g+d*d);default:return this.width?Math.min(Math.abs(this.width/2/Math.cos(b)),Math.abs(this.height/2/Math.sin(b)))+1:0}};r.prototype._setForce=function(a,b){this.fx=a;this.fy=b};r.prototype._addForce=
function(a,b){this.fx+=a;this.fy+=b};r.prototype.discreteStep=function(a){this.xFixed||(this.vx+=(this.fx-this.damping*this.vx)/this.mass*a,this.x+=this.vx*a);this.yFixed||(this.vy+=(this.fy-this.damping*this.vy)/this.mass*a,this.y+=this.vy*a)};r.prototype.discreteStepLimited=function(a,b){this.xFixed?this.fx=0:(this.vx+=(this.fx-this.damping*this.vx)/this.mass*a,this.vx=Math.abs(this.vx)>b?0<this.vx?b:-b:this.vx,this.x+=this.vx*a);this.yFixed?this.fy=0:(this.vy+=(this.fy-this.damping*this.vy)/this.mass*
a,this.vy=Math.abs(this.vy)>b?0<this.vy?b:-b:this.vy,this.y+=this.vy*a)};r.prototype.isFixed=function(){return this.xFixed&&this.yFixed};r.prototype.isMoving=function(a){return Math.abs(this.vx)>a||Math.abs(this.vy)>a};r.prototype.isSelected=function(){return this.selected};r.prototype.getValue=function(){return this.value};r.prototype.getDistance=function(a,b){var c=this.x-a,e=this.y-b;return Math.sqrt(c*c+e*e)};r.prototype.setValueRange=function(a,b){this.radiusFixed||void 0===this.value||(this.radius=
b==a?(this.radiusMin+this.radiusMax)/2:(this.radiusMax-this.radiusMin)/(b-a)*(this.value-a)+this.radiusMin);this.baseRadiusValue=this.radius};r.prototype.draw=function(a){throw"Draw method not initialized for node";};r.prototype.resize=function(a){throw"Resize method not initialized for node";};r.prototype.isOverlappingWith=function(a){return this.left<a.right&&this.left+this.width>a.left&&this.top<a.bottom&&this.top+this.height>a.top};r.prototype._resizeImage=function(a){if(!this.width||!this.height){var b;
this.value?(this.radius=this.baseRadiusValue,b=this.imageObj.height/this.imageObj.width,void 0!==b?(a=this.radius||this.imageObj.width,b=this.radius*b||this.imageObj.height):b=a=0):(a=this.imageObj.width,b=this.imageObj.height);this.width=a;this.height=b;this.growthIndicator=0;0<this.width&&0<this.height&&(this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,
this.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.width-a)}};r.prototype._drawImage=function(a){this._resizeImage(a);this.left=this.x-this.width/2;this.top=this.y-this.height/2;var b;0!=this.imageObj.width?(1<this.clusterSize&&(b=1<this.clusterSize?10:0,b*=this.graphScaleInv,b=Math.min(.2*this.width,b),a.globalAlpha=.5,a.drawImage(this.imageObj,this.left-b,this.top-b,this.width+2*b,this.height+2*b)),a.globalAlpha=1,a.drawImage(this.imageObj,
this.left,this.top,this.width,this.height),b=this.y+this.height/2):b=this.y;this._label(a,this.label,this.x,b,void 0,"top")};r.prototype._resizeBox=function(a){this.width||(a=this.getTextSize(a),this.width=a.width+10,this.height=a.height+10,this.width+=.5*Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=.5*Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.growthIndicator=this.width-(a.width+10))};r.prototype._drawBox=
function(a){this._resizeBox(a);this.left=this.x-this.width/2;this.top=this.y-this.height/2;a.strokeStyle=this.selected?this.color.highlight.border:this.color.border;1<this.clusterSize&&(a.lineWidth=(this.selected?2:1)+(1<this.clusterSize?2.5:0),a.lineWidth*=this.graphScaleInv,a.lineWidth=Math.min(.1*this.width,a.lineWidth),a.roundRect(this.left-2*a.lineWidth,this.top-2*a.lineWidth,this.width+4*a.lineWidth,this.height+4*a.lineWidth,this.radius),a.stroke());a.lineWidth=(this.selected?2:1)+(1<this.clusterSize?
2.5:0);a.lineWidth*=this.graphScaleInv;a.lineWidth=Math.min(.1*this.width,a.lineWidth);a.fillStyle=this.selected?this.color.highlight.background:this.color.background;a.roundRect(this.left,this.top,this.width,this.height,this.radius);a.fill();a.stroke();this._label(a,this.label,this.x,this.y)};r.prototype._resizeDatabase=function(a){this.width||(this.height=this.width=a=this.getTextSize(a).width+10,this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=
Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.width-a)};r.prototype._drawDatabase=function(a){this._resizeDatabase(a);this.left=this.x-this.width/2;this.top=this.y-this.height/2;a.strokeStyle=this.selected?this.color.highlight.border:this.color.border;1<this.clusterSize&&(a.lineWidth=(this.selected?2:1)+(1<this.clusterSize?2.5:0),a.lineWidth*=
this.graphScaleInv,a.lineWidth=Math.min(.1*this.width,a.lineWidth),a.database(this.x-this.width/2-2*a.lineWidth,this.y-.5*this.height-2*a.lineWidth,this.width+4*a.lineWidth,this.height+4*a.lineWidth),a.stroke());a.lineWidth=(this.selected?2:1)+(1<this.clusterSize?2.5:0);a.lineWidth*=this.graphScaleInv;a.lineWidth=Math.min(.1*this.width,a.lineWidth);a.fillStyle=this.selected?this.color.highlight.background:this.color.background;a.database(this.x-this.width/2,this.y-.5*this.height,this.width,this.height);
a.fill();a.stroke();this._label(a,this.label,this.x,this.y)};r.prototype._resizeCircle=function(a){this.width||(a=this.getTextSize(a),a=Math.max(a.width,a.height)+10,this.radius=a/2,this.height=this.width=a,this.radius+=.5*Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.radius-.5*a)};r.prototype._drawCircle=function(a){this._resizeCircle(a);this.left=this.x-this.width/2;this.top=this.y-this.height/2;a.strokeStyle=this.selected?this.color.highlight.border:
this.color.border;1<this.clusterSize&&(a.lineWidth=(this.selected?2:1)+(1<this.clusterSize?2.5:0),a.lineWidth*=this.graphScaleInv,a.lineWidth=Math.min(.1*this.width,a.lineWidth),a.circle(this.x,this.y,this.radius+2*a.lineWidth),a.stroke());a.lineWidth=(this.selected?2:1)+(1<this.clusterSize?2.5:0);a.lineWidth*=this.graphScaleInv;a.lineWidth=Math.min(.1*this.width,a.lineWidth);a.fillStyle=this.selected?this.color.highlight.background:this.color.background;a.circle(this.x,this.y,this.radius);a.fill();
a.stroke();this._label(a,this.label,this.x,this.y)};r.prototype._resizeEllipse=function(a){this.width||(a=this.getTextSize(a),this.width=1.5*a.width,this.height=2*a.height,this.width<this.height&&(this.width=this.height),a=this.width,this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,
this.growthIndicator=this.width-a)};r.prototype._drawEllipse=function(a){this._resizeEllipse(a);this.left=this.x-this.width/2;this.top=this.y-this.height/2;a.strokeStyle=this.selected?this.color.highlight.border:this.color.border;1<this.clusterSize&&(a.lineWidth=(this.selected?2:1)+(1<this.clusterSize?2.5:0),a.lineWidth*=this.graphScaleInv,a.lineWidth=Math.min(.1*this.width,a.lineWidth),a.ellipse(this.left-2*a.lineWidth,this.top-2*a.lineWidth,this.width+4*a.lineWidth,this.height+4*a.lineWidth),a.stroke());
a.lineWidth=(this.selected?2:1)+(1<this.clusterSize?2.5:0);a.lineWidth*=this.graphScaleInv;a.lineWidth=Math.min(.1*this.width,a.lineWidth);a.fillStyle=this.selected?this.color.highlight.background:this.color.background;a.ellipse(this.left,this.top,this.width,this.height);a.fill();a.stroke();this._label(a,this.label,this.x,this.y)};r.prototype._drawDot=function(a){this._drawShape(a,"circle")};r.prototype._drawTriangle=function(a){this._drawShape(a,"triangle")};r.prototype._drawTriangleDown=function(a){this._drawShape(a,
"triangleDown")};r.prototype._drawSquare=function(a){this._drawShape(a,"square")};r.prototype._drawStar=function(a){this._drawShape(a,"star")};r.prototype._resizeShape=function(a){this.width||(this.radius=this.baseRadiusValue,this.height=this.width=a=2*this.radius,this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.radius+=.5*Math.min(this.clusterSize-
1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.width-a)};r.prototype._drawShape=function(a,b){this._resizeShape(a);this.left=this.x-this.width/2;this.top=this.y-this.height/2;var c=2;switch(b){case "dot":c=2;break;case "square":c=2;break;case "triangle":c=3;break;case "triangleDown":c=3;break;case "star":c=4}a.strokeStyle=this.selected?this.color.highlight.border:this.color.border;1<this.clusterSize&&(a.lineWidth=(this.selected?2:1)+(1<this.clusterSize?2.5:0),
a.lineWidth*=this.graphScaleInv,a.lineWidth=Math.min(.1*this.width,a.lineWidth),a[b](this.x,this.y,this.radius+c*a.lineWidth),a.stroke());a.lineWidth=(this.selected?2:1)+(1<this.clusterSize?2.5:0);a.lineWidth*=this.graphScaleInv;a.lineWidth=Math.min(.1*this.width,a.lineWidth);a.fillStyle=this.selected?this.color.highlight.background:this.color.background;a[b](this.x,this.y,this.radius);a.fill();a.stroke();this.label&&this._label(a,this.label,this.x,this.y+this.height/2,void 0,"top")};r.prototype._resizeText=
function(a){this.width||(a=this.getTextSize(a),this.width=a.width+10,this.height=a.height+10,this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.width-(a.width+10))};r.prototype._drawText=function(a){this._resizeText(a);this.left=this.x-
this.width/2;this.top=this.y-this.height/2;this._label(a,this.label,this.x,this.y)};r.prototype._label=function(a,b,c,e,g,d){if(b&&this.fontSize*this.graphScale>this.fontDrawThreshold){a.font=(this.selected?"bold ":"")+this.fontSize+"px "+this.fontFace;a.fillStyle=this.fontColor||"black";a.textAlign=g||"center";a.textBaseline=d||"middle";b=b.split("\n");g=b.length;d=this.fontSize+4;e+=(1-g)/2*d;for(var f=0;f<g;f++)a.fillText(b[f],c,e),e+=d}};r.prototype.getTextSize=function(a){if(void 0!==this.label){a.font=
(this.selected?"bold ":"")+this.fontSize+"px "+this.fontFace;for(var b=this.label.split("\n"),c=(this.fontSize+4)*b.length,e=0,g=0,d=b.length;g<d;g++)e=Math.max(e,a.measureText(b[g]).width);return{width:e,height:c}}return{width:0,height:0}};r.prototype.inArea=function(){return void 0!==this.width?this.x+this.width*this.graphScaleInv>=this.canvasTopLeft.x&&this.x-this.width*this.graphScaleInv<this.canvasBottomRight.x&&this.y+this.height*this.graphScaleInv>=this.canvasTopLeft.y&&this.y-this.height*
this.graphScaleInv<this.canvasBottomRight.y:!0};r.prototype.inView=function(){return this.x>=this.canvasTopLeft.x&&this.x<this.canvasBottomRight.x&&this.y>=this.canvasTopLeft.y&&this.y<this.canvasBottomRight.y};r.prototype.setScaleAndPos=function(a,b,c){this.graphScaleInv=1/a;this.graphScale=a;this.canvasTopLeft=b;this.canvasBottomRight=c};r.prototype.setScale=function(a){this.graphScaleInv=1/a;this.graphScale=a};r.prototype.clearVelocity=function(){this.vy=this.vx=0};r.prototype.updateVelocity=function(a){var b=
this.vx*this.vx*a;this.vx=Math.sqrt(b/this.mass);b=this.vy*this.vy*a;this.vy=Math.sqrt(b/this.mass)};y.prototype.setProperties=function(a,b){if(a)switch(void 0!==a.from&&(this.fromId=a.from),void 0!==a.to&&(this.toId=a.to),void 0!==a.id&&(this.id=a.id),void 0!==a.style&&(this.style=a.style),void 0!==a.label&&(this.label=a.label),this.label&&(this.fontSize=b.edges.fontSize,this.fontFace=b.edges.fontFace,this.fontColor=b.edges.fontColor,this.fontFill=b.edges.fontFill,void 0!==a.fontColor&&(this.fontColor=
a.fontColor),void 0!==a.fontSize&&(this.fontSize=a.fontSize),void 0!==a.fontFace&&(this.fontFace=a.fontFace),void 0!==a.fontFill&&(this.fontFill=a.fontFill)),void 0!==a.title&&(this.title=a.title),void 0!==a.width&&(this.width=a.width),void 0!==a.value&&(this.value=a.value),void 0!==a.length&&(this.length=a.length,this.customLength=!0),void 0!==a.arrowScaleFactor&&(this.arrowScaleFactor=a.arrowScaleFactor),a.dash&&(void 0!==a.dash.length&&(this.dash.length=a.dash.length),void 0!==a.dash.gap&&(this.dash.gap=
a.dash.gap),void 0!==a.dash.altLength&&(this.dash.altLength=a.dash.altLength)),void 0!==a.color&&(l.isString(a.color)?(this.color.color=a.color,this.color.highlight=a.color):(void 0!==a.color.color&&(this.color.color=a.color.color),void 0!==a.color.highlight&&(this.color.highlight=a.color.highlight))),this.connect(),this.widthFixed=this.widthFixed||void 0!==a.width,this.lengthFixed=this.lengthFixed||void 0!==a.length,this.style){case "line":this.draw=this._drawLine;break;case "arrow":this.draw=this._drawArrow;
break;case "arrow-center":this.draw=this._drawArrowCenter;break;case "dash-line":this.draw=this._drawDashLine;break;default:this.draw=this._drawLine}};y.prototype.connect=function(){this.disconnect();this.from=this.graph.nodes[this.fromId]||null;this.to=this.graph.nodes[this.toId]||null;(this.connected=this.from&&this.to)?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this))};y.prototype.disconnect=function(){this.from&&(this.from.detachEdge(this),
this.from=null);this.to&&(this.to.detachEdge(this),this.to=null);this.connected=!1};y.prototype.getTitle=function(){return"function"===typeof this.title?this.title():this.title};y.prototype.getValue=function(){return this.value};y.prototype.setValueRange=function(a,b){this.widthFixed||void 0===this.value||(this.width=(this.widthMax-this.widthMin)/(b-a)*(this.value-a)+this.widthMin)};y.prototype.draw=function(a){throw"Method draw not initialized in edge";};y.prototype.isOverlappingWith=function(a){return this.connected?
10>this._getDistanceToEdge(this.from.x,this.from.y,this.to.x,this.to.y,a.left,a.top):!1};y.prototype._drawLine=function(a){a.strokeStyle=!0==this.selected?this.color.highlight:this.color.color;a.lineWidth=this._getLineWidth();if(this.from!=this.to){this._line(a);var b;this.label&&(b=!0==this.smooth?{x:.5*(.5*(this.from.x+this.via.x)+.5*(this.to.x+this.via.x)),y:.5*(.5*(this.from.y+this.via.y)+.5*(this.to.y+this.via.y))}:this._pointOnLine(.5),this._label(a,this.label,b.x,b.y))}else{var c,e=this.length/
4;c=this.from;c.width||c.resize(a);c.width>c.height?(b=c.x+c.width/2,c=c.y-e):(b=c.x+e,c=c.y-c.height/2);this._circle(a,b,c,e);b=this._pointOnCircle(b,c,e,.5);this._label(a,this.label,b.x,b.y)}};y.prototype._getLineWidth=function(){return!0==this.selected?Math.min(2*this.width,this.widthMax)*this.graphScaleInv:this.width*this.graphScaleInv};y.prototype._line=function(a){a.beginPath();a.moveTo(this.from.x,this.from.y);!0==this.smooth?a.quadraticCurveTo(this.via.x,this.via.y,this.to.x,this.to.y):a.lineTo(this.to.x,
this.to.y);a.stroke()};y.prototype._circle=function(a,b,c,e){a.beginPath();a.arc(b,c,e,0,2*Math.PI,!1);a.stroke()};y.prototype._label=function(a,b,c,e){if(b){a.font=(this.from.selected||this.to.selected?"bold ":"")+this.fontSize+"px "+this.fontFace;a.fillStyle=this.fontFill;var g=a.measureText(b).width,d=this.fontSize;c-=g/2;e-=d/2;a.fillRect(c,e,g,d);a.fillStyle=this.fontColor||"black";a.textAlign="left";a.textBaseline="top";a.fillText(b,c,e)}};y.prototype._drawDashLine=function(a){a.strokeStyle=
!0==this.selected?this.color.highlight:this.color.color;a.lineWidth=this._getLineWidth();if(void 0!==a.mozDash||void 0!==a.setLineDash){a.beginPath();a.moveTo(this.from.x,this.from.y);var b=[0],b=void 0!==this.dash.length&&void 0!==this.dash.gap?[this.dash.length,this.dash.gap]:[5,5];"undefined"!==typeof a.setLineDash?(a.setLineDash(b),a.lineDashOffset=0):(a.mozDash=b,a.mozDashOffset=0);!0==this.smooth?a.quadraticCurveTo(this.via.x,this.via.y,this.to.x,this.to.y):a.lineTo(this.to.x,this.to.y);a.stroke();
"undefined"!==typeof a.setLineDash?(a.setLineDash([0]),a.lineDashOffset=0):(a.mozDash=[0],a.mozDashOffset=0)}else a.beginPath(),a.lineCap="round",void 0!==this.dash.altLength?a.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,[this.dash.length,this.dash.gap,this.dash.altLength,this.dash.gap]):void 0!==this.dash.length&&void 0!==this.dash.gap?a.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,[this.dash.length,this.dash.gap]):(a.moveTo(this.from.x,this.from.y),a.lineTo(this.to.x,this.to.y)),
a.stroke();this.label&&(b=!0==this.smooth?{x:.5*(.5*(this.from.x+this.via.x)+.5*(this.to.x+this.via.x)),y:.5*(.5*(this.from.y+this.via.y)+.5*(this.to.y+this.via.y))}:this._pointOnLine(.5),this._label(a,this.label,b.x,b.y))};y.prototype._pointOnLine=function(a){return{x:(1-a)*this.from.x+a*this.to.x,y:(1-a)*this.from.y+a*this.to.y}};y.prototype._pointOnCircle=function(a,b,c,e){e=2*(e-.375)*Math.PI;return{x:a+c*Math.cos(e),y:b-c*Math.sin(e)}};y.prototype._drawArrowCenter=function(a){var b;!0==this.selected?
(a.strokeStyle=this.color.highlight,a.fillStyle=this.color.highlight):(a.strokeStyle=this.color.color,a.fillStyle=this.color.color);a.lineWidth=this._getLineWidth();if(this.from!=this.to){this._line(a);var c=Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x),e=(10+5*this.width)*this.arrowScaleFactor;b=!0==this.smooth?{x:.5*(.5*(this.from.x+this.via.x)+.5*(this.to.x+this.via.x)),y:.5*(.5*(this.from.y+this.via.y)+.5*(this.to.y+this.via.y))}:this._pointOnLine(.5);a.arrow(b.x,b.y,c,e);a.fill();a.stroke();
this.label&&this._label(a,this.label,b.x,b.y)}else{var g,d,f=.25*Math.max(100,this.length);b=this.from;b.width||b.resize(a);b.width>b.height?(g=b.x+.5*b.width,d=b.y-f):(g=b.x+f,d=b.y-.5*b.height);this._circle(a,g,d,f);c=.2*Math.PI;e=(10+5*this.width)*this.arrowScaleFactor;b=this._pointOnCircle(g,d,f,.5);a.arrow(b.x,b.y,c,e);a.fill();a.stroke();this.label&&(b=this._pointOnCircle(g,d,f,.5),this._label(a,this.label,b.x,b.y))}};y.prototype._drawArrow=function(a){var b,c,e;!0==this.selected?(a.strokeStyle=
this.color.highlight,a.fillStyle=this.color.highlight):(a.strokeStyle=this.color.color,a.fillStyle=this.color.color);a.lineWidth=this._getLineWidth();var g;if(this.from!=this.to){b=Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x);var d=this.to.x-this.from.x,f=this.to.y-this.from.y,d=Math.sqrt(d*d+f*f);g=this.from.distanceToBorder(a,b+Math.PI);var h=(d-g)/d;g=h*this.from.x+(1-h)*this.to.x;h=h*this.from.y+(1-h)*this.to.y;!0==this.smooth&&(b=Math.atan2(this.to.y-this.via.y,this.to.x-this.via.x),
d=this.to.x-this.via.x,f=this.to.y-this.via.y,d=Math.sqrt(d*d+f*f));f=this.to.distanceToBorder(a,b);f=(d-f)/d;!0==this.smooth?(d=(1-f)*this.via.x+f*this.to.x,f=(1-f)*this.via.y+f*this.to.y):(d=(1-f)*this.from.x+f*this.to.x,f=(1-f)*this.from.y+f*this.to.y);a.beginPath();a.moveTo(g,h);!0==this.smooth?a.quadraticCurveTo(this.via.x,this.via.y,d,f):a.lineTo(d,f);a.stroke();g=(10+5*this.width)*this.arrowScaleFactor;a.arrow(d,f,b,g);a.fill();a.stroke();this.label&&(b=!0==this.smooth?{x:.5*(.5*(this.from.x+
this.via.x)+.5*(this.to.x+this.via.x)),y:.5*(.5*(this.from.y+this.via.y)+.5*(this.to.y+this.via.y))}:this._pointOnLine(.5),this._label(a,this.label,b.x,b.y))}else g=this.from,f=.25*Math.max(100,this.length),g.width||g.resize(a),g.width>g.height?(h=g.x+.5*g.width,d=g.y-f,b=h,c=g.y,e=.9*Math.PI):(h=g.x+f,d=g.y-.5*g.height,b=g.x,c=d,e=.6*Math.PI),a.beginPath(),a.arc(h,d,f,0,2*Math.PI,!1),a.stroke(),g=(10+5*this.width)*this.arrowScaleFactor,a.arrow(b,c,e,g),a.fill(),a.stroke(),this.label&&(b=this._pointOnCircle(h,
d,f,.5),this._label(a,this.label,b.x,b.y))};y.prototype._getDistanceToEdge=function(a,b,c,e,g,d){if(!0==this.smooth){var f=1E9,h,l,k;for(h=0;10>h;h++)l=.1*h,k=Math.pow(1-l,2)*a+2*l*(1-l)*this.via.x+Math.pow(l,2)*c,l=Math.pow(1-l,2)*b+2*l*(1-l)*this.via.y+Math.pow(l,2)*e,k=Math.abs(g-k),l=Math.abs(d-l),f=Math.min(f,Math.sqrt(k*k+l*l));return f}c-=a;e-=b;f=((g-a)*c+(d-b)*e)/(c*c+e*e);1<f?f=1:0>f&&(f=0);k=a+f*c-g;l=b+f*e-d;return Math.sqrt(k*k+l*l)};y.prototype.setScale=function(a){this.graphScaleInv=
1/a};y.prototype.select=function(){this.selected=!0};y.prototype.unselect=function(){this.selected=!1};y.prototype.positionBezierNode=function(){null!==this.via&&(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y))};W.prototype.setPosition=function(a,b){this.x=parseInt(a);this.y=parseInt(b)};W.prototype.setText=function(a){this.frame.innerHTML=a};W.prototype.show=function(a){void 0===a&&(a=!0);if(a){var b=this.frame.clientHeight;a=this.frame.clientWidth;var c=this.frame.parentNode.clientHeight,
e=this.frame.parentNode.clientWidth,g=this.y-b;g+b+this.padding>c&&(g=c-b-this.padding);g<this.padding&&(g=this.padding);b=this.x;b+a+this.padding>e&&(b=e-a-this.padding);b<this.padding&&(b=this.padding);this.frame.style.left=b+"px";this.frame.style.top=g+"px";this.frame.style.visibility="visible"}else this.hide()};W.prototype.hide=function(){this.frame.style.visibility="hidden"};A.DEFAULT=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",
background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"}},
{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"}}];A.prototype.clear=function(){this.groups={};this.groups.length=function(){var a=0,b;for(b in this)this.hasOwnProperty(b)&&a++;return a}};A.prototype.get=function(a){var b=this.groups[a];if(void 0==b){var c=this.defaultIndex%A.DEFAULT.length;
this.defaultIndex++;b={};b.color=A.DEFAULT[c];this.groups[a]=b}return b};A.prototype.add=function(a,b){this.groups[a]=b;b.color&&(b.color=l.parseColor(b.color));return b};Z.prototype.setOnloadCallback=function(a){this.callback=a};Z.prototype.load=function(a){var b=this.images[a];if(void 0==b){var c=this,b=new Image;this.images[a]=b;b.onload=function(){c.callback&&c.callback(this)};b.src=a}return b};var sa={_toggleBarnesHut:function(){this.constants.physics.barnesHut.enabled=!this.constants.physics.barnesHut.enabled;
this._loadSelectedForceSolver();this.moving=!0;this.start()},_loadSelectedForceSolver:function(){!0==this.constants.physics.barnesHut.enabled?(this._clearMixin(ea),this._clearMixin(X),this.constants.physics.centralGravity=this.constants.physics.barnesHut.centralGravity,this.constants.physics.springLength=this.constants.physics.barnesHut.springLength,this.constants.physics.springConstant=this.constants.physics.barnesHut.springConstant,this.constants.physics.damping=this.constants.physics.barnesHut.damping,
this._loadMixin(fa)):!0==this.constants.physics.hierarchicalRepulsion.enabled?(this._clearMixin(fa),this._clearMixin(ea),this.constants.physics.centralGravity=this.constants.physics.hierarchicalRepulsion.centralGravity,this.constants.physics.springLength=this.constants.physics.hierarchicalRepulsion.springLength,this.constants.physics.springConstant=this.constants.physics.hierarchicalRepulsion.springConstant,this.constants.physics.damping=this.constants.physics.hierarchicalRepulsion.damping,this._loadMixin(X)):
(this._clearMixin(fa),this._clearMixin(X),this.barnesHutTree=void 0,this.constants.physics.centralGravity=this.constants.physics.repulsion.centralGravity,this.constants.physics.springLength=this.constants.physics.repulsion.springLength,this.constants.physics.springConstant=this.constants.physics.repulsion.springConstant,this.constants.physics.damping=this.constants.physics.repulsion.damping,this._loadMixin(ea))},_initializeForceCalculation:function(){1==this.nodeIndices.length?this.nodes[this.nodeIndices[0]]._setForce(0,
0):(this.nodeIndices.length>this.constants.clustering.clusterThreshold&&!0==this.constants.clustering.enabled&&this.clusterToFit(this.constants.clustering.reduceToNodes,!1),this._calculateForces())},_calculateForces:function(){this._calculateGravitationalForces();this._calculateNodeForces();!0==this.constants.smoothCurves?this._calculateSpringForcesWithSupport():this._calculateSpringForces()},_updateCalculationNodes:function(){if(!0==this.constants.smoothCurves){this.calculationNodes={};this.calculationNodeIndices=
[];for(var a in this.nodes)this.nodes.hasOwnProperty(a)&&(this.calculationNodes[a]=this.nodes[a]);a=this.sectors.support.nodes;for(var b in a)a.hasOwnProperty(b)&&(this.edges.hasOwnProperty(a[b].parentEdgeId)?this.calculationNodes[b]=a[b]:a[b]._setForce(0,0));for(var c in this.calculationNodes)this.calculationNodes.hasOwnProperty(c)&&this.calculationNodeIndices.push(c)}else this.calculationNodes=this.nodes,this.calculationNodeIndices=this.nodeIndices},_calculateGravitationalForces:function(){var a,
b,c,e,g,d=this.calculationNodes,f=this.constants.physics.centralGravity;for(g=c=0;g<this.calculationNodeIndices.length;g++)e=d[this.calculationNodeIndices[g]],e.damping=this.constants.physics.damping,"default"==this._sector()&&0!=f?(a=-e.x,b=-e.y,c=Math.sqrt(a*a+b*b),c=0==c?0:f/c,e.fx=a*c,e.fy=b*c):(e.fx=0,e.fy=0)},_calculateSpringForces:function(){var a,b,c,e,g,d,f=this.edges;for(c in f)f.hasOwnProperty(c)&&(b=f[c],b.connected&&this.nodes.hasOwnProperty(b.toId)&&this.nodes.hasOwnProperty(b.fromId)&&
(a=b.customLength?b.length:this.constants.physics.springLength,a+=(b.to.clusterSize+b.from.clusterSize-2)*this.constants.clustering.edgeGrowth,e=b.from.x-b.to.x,g=b.from.y-b.to.y,d=Math.sqrt(e*e+g*g),0==d&&(d=.01),a=this.constants.physics.springConstant*(a-d)/d,e*=a,g*=a,b.from.fx+=e,b.from.fy+=g,b.to.fx-=e,b.to.fy-=g))},_calculateSpringForcesWithSupport:function(){var a,b,c,e=this.edges;for(b in e)if(e.hasOwnProperty(b)&&(a=e[b],a.connected&&this.nodes.hasOwnProperty(a.toId)&&this.nodes.hasOwnProperty(a.fromId)&&
null!=a.via)){var g=a.to,d=a.via,f=a.from;a=a.customLength?a.length:this.constants.physics.springLength;c=g.clusterSize+f.clusterSize-2;a+=c*this.constants.clustering.edgeGrowth;this._calculateSpringForce(g,d,.5*a);this._calculateSpringForce(d,f,.5*a)}},_calculateSpringForce:function(a,b,c){var e,g,d;e=a.x-b.x;g=a.y-b.y;d=Math.sqrt(e*e+g*g);0==d&&(d=.01);c=this.constants.physics.springConstant*(c-d)/d;e*=c;g*=c;a.fx+=e;a.fy+=g;b.fx-=e;b.fy-=g},_loadPhysicsConfiguration:function(){if(void 0===this.physicsConfiguration){this.backupConstants=
{};l.copyObject(this.constants,this.backupConstants);var a=["LR","RL","UD","DU"];this.physicsConfiguration=document.createElement("div");this.physicsConfiguration.className="PhysicsConfiguration";this.physicsConfiguration.innerHTML='<table><tr><td><b>Simulation Mode:</b></td></tr><tr><td width="120px"><input type="radio" name="graph_physicsMethod" id="graph_physicsMethod1" value="BH" checked="checked">Barnes Hut</td><td width="120px"><input type="radio" name="graph_physicsMethod" id="graph_physicsMethod2" value="R">Repulsion</td><td width="120px"><input type="radio" name="graph_physicsMethod" id="graph_physicsMethod3" value="H">Hierarchical</td></tr></table><table id="graph_BH_table" style="display:none"><tr><td><b>Barnes Hut</b></td></tr><tr><td width="150px">gravitationalConstant</td><td>0</td><td><input type="range" min="0" max="20000" value="'+
-1*this.constants.physics.barnesHut.gravitationalConstant+'" step="25" style="width:300px" id="graph_BH_gc"></td><td  width="50px">-20000</td><td><input value="'+-1*this.constants.physics.barnesHut.gravitationalConstant+'" id="graph_BH_gc_value" style="width:60px"></td></tr><tr><td width="150px">centralGravity</td><td>0</td><td><input type="range" min="0" max="3"  value="'+this.constants.physics.barnesHut.centralGravity+'" step="0.05"  style="width:300px" id="graph_BH_cg"></td><td>3</td><td><input value="'+
this.constants.physics.barnesHut.centralGravity+'" id="graph_BH_cg_value" style="width:60px"></td></tr><tr><td width="150px">springLength</td><td>0</td><td><input type="range" min="0" max="500" value="'+this.constants.physics.barnesHut.springLength+'" step="1" style="width:300px" id="graph_BH_sl"></td><td>500</td><td><input value="'+this.constants.physics.barnesHut.springLength+'" id="graph_BH_sl_value" style="width:60px"></td></tr><tr><td width="150px">springConstant</td><td>0</td><td><input type="range" min="0" max="0.5" value="'+
this.constants.physics.barnesHut.springConstant+'" step="0.001" style="width:300px" id="graph_BH_sc"></td><td>0.5</td><td><input value="'+this.constants.physics.barnesHut.springConstant+'" id="graph_BH_sc_value" style="width:60px"></td></tr><tr><td width="150px">damping</td><td>0</td><td><input type="range" min="0" max="0.3" value="'+this.constants.physics.barnesHut.damping+'" step="0.005" style="width:300px" id="graph_BH_damp"></td><td>0.3</td><td><input value="'+this.constants.physics.barnesHut.damping+
'" id="graph_BH_damp_value" style="width:60px"></td></tr></table><table id="graph_R_table" style="display:none"><tr><td><b>Repulsion</b></td></tr><tr><td width="150px">nodeDistance</td><td>0</td><td><input type="range" min="0" max="300" value="'+this.constants.physics.repulsion.nodeDistance+'" step="1" style="width:300px" id="graph_R_nd"></td><td width="50px">300</td><td><input value="'+this.constants.physics.repulsion.nodeDistance+'" id="graph_R_nd_value" style="width:60px"></td></tr><tr><td width="150px">centralGravity</td><td>0</td><td><input type="range" min="0" max="3"  value="'+
this.constants.physics.repulsion.centralGravity+'" step="0.05"  style="width:300px" id="graph_R_cg"></td><td>3</td><td><input value="'+this.constants.physics.repulsion.centralGravity+'" id="graph_R_cg_value" style="width:60px"></td></tr><tr><td width="150px">springLength</td><td>0</td><td><input type="range" min="0" max="500" value="'+this.constants.physics.repulsion.springLength+'" step="1" style="width:300px" id="graph_R_sl"></td><td>500</td><td><input value="'+this.constants.physics.repulsion.springLength+
'" id="graph_R_sl_value" style="width:60px"></td></tr><tr><td width="150px">springConstant</td><td>0</td><td><input type="range" min="0" max="0.5" value="'+this.constants.physics.repulsion.springConstant+'" step="0.001" style="width:300px" id="graph_R_sc"></td><td>0.5</td><td><input value="'+this.constants.physics.repulsion.springConstant+'" id="graph_R_sc_value" style="width:60px"></td></tr><tr><td width="150px">damping</td><td>0</td><td><input type="range" min="0" max="0.3" value="'+this.constants.physics.repulsion.damping+
'" step="0.005" style="width:300px" id="graph_R_damp"></td><td>0.3</td><td><input value="'+this.constants.physics.repulsion.damping+'" id="graph_R_damp_value" style="width:60px"></td></tr></table><table id="graph_H_table" style="display:none"><tr><td width="150"><b>Hierarchical</b></td></tr><tr><td width="150px">nodeDistance</td><td>0</td><td><input type="range" min="0" max="300" value="'+this.constants.physics.hierarchicalRepulsion.nodeDistance+'" step="1" style="width:300px" id="graph_H_nd"></td><td width="50px">300</td><td><input value="'+
this.constants.physics.hierarchicalRepulsion.nodeDistance+'" id="graph_H_nd_value" style="width:60px"></td></tr><tr><td width="150px">centralGravity</td><td>0</td><td><input type="range" min="0" max="3"  value="'+this.constants.physics.hierarchicalRepulsion.centralGravity+'" step="0.05"  style="width:300px" id="graph_H_cg"></td><td>3</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.centralGravity+'" id="graph_H_cg_value" style="width:60px"></td></tr><tr><td width="150px">springLength</td><td>0</td><td><input type="range" min="0" max="500" value="'+
this.constants.physics.hierarchicalRepulsion.springLength+'" step="1" style="width:300px" id="graph_H_sl"></td><td>500</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.springLength+'" id="graph_H_sl_value" style="width:60px"></td></tr><tr><td width="150px">springConstant</td><td>0</td><td><input type="range" min="0" max="0.5" value="'+this.constants.physics.hierarchicalRepulsion.springConstant+'" step="0.001" style="width:300px" id="graph_H_sc"></td><td>0.5</td><td><input value="'+
this.constants.physics.hierarchicalRepulsion.springConstant+'" id="graph_H_sc_value" style="width:60px"></td></tr><tr><td width="150px">damping</td><td>0</td><td><input type="range" min="0" max="0.3" value="'+this.constants.physics.hierarchicalRepulsion.damping+'" step="0.005" style="width:300px" id="graph_H_damp"></td><td>0.3</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.damping+'" id="graph_H_damp_value" style="width:60px"></td></tr><tr><td width="150px">direction</td><td>1</td><td><input type="range" min="0" max="3" value="'+
a.indexOf(this.constants.hierarchicalLayout.direction)+'" step="1" style="width:300px" id="graph_H_direction"></td><td>4</td><td><input value="'+this.constants.hierarchicalLayout.direction+'" id="graph_H_direction_value" style="width:60px"></td></tr><tr><td width="150px">levelSeparation</td><td>1</td><td><input type="range" min="0" max="500" value="'+this.constants.hierarchicalLayout.levelSeparation+'" step="1" style="width:300px" id="graph_H_levsep"></td><td>500</td><td><input value="'+this.constants.hierarchicalLayout.levelSeparation+
'" id="graph_H_levsep_value" style="width:60px"></td></tr><tr><td width="150px">nodeSpacing</td><td>1</td><td><input type="range" min="0" max="500" value="'+this.constants.hierarchicalLayout.nodeSpacing+'" step="1" style="width:300px" id="graph_H_nspac"></td><td>500</td><td><input value="'+this.constants.hierarchicalLayout.nodeSpacing+'" id="graph_H_nspac_value" style="width:60px"></td></tr></table><table><tr><td><b>Options:</b></td></tr><tr><td width="180px"><input type="button" id="graph_toggleSmooth" value="Toggle smoothCurves" style="width:150px"></td><td width="180px"><input type="button" id="graph_repositionNodes" value="Reinitialize" style="width:150px"></td><td width="180px"><input type="button" id="graph_generateOptions" value="Generate Options" style="width:150px"></td></tr></table>';
this.containerElement.parentElement.insertBefore(this.physicsConfiguration,this.containerElement);this.optionsDiv=document.createElement("div");this.optionsDiv.style.fontSize="14px";this.optionsDiv.style.fontFamily="verdana";this.containerElement.parentElement.insertBefore(this.optionsDiv,this.containerElement);var b;b=document.getElementById("graph_BH_gc");b.onchange=L.bind(this,"graph_BH_gc",-1,"physics_barnesHut_gravitationalConstant");b=document.getElementById("graph_BH_cg");b.onchange=L.bind(this,
"graph_BH_cg",1,"physics_centralGravity");b=document.getElementById("graph_BH_sc");b.onchange=L.bind(this,"graph_BH_sc",1,"physics_springConstant");b=document.getElementById("graph_BH_sl");b.onchange=L.bind(this,"graph_BH_sl",1,"physics_springLength");b=document.getElementById("graph_BH_damp");b.onchange=L.bind(this,"graph_BH_damp",1,"physics_damping");b=document.getElementById("graph_R_nd");b.onchange=L.bind(this,"graph_R_nd",1,"physics_repulsion_nodeDistance");b=document.getElementById("graph_R_cg");
b.onchange=L.bind(this,"graph_R_cg",1,"physics_centralGravity");b=document.getElementById("graph_R_sc");b.onchange=L.bind(this,"graph_R_sc",1,"physics_springConstant");b=document.getElementById("graph_R_sl");b.onchange=L.bind(this,"graph_R_sl",1,"physics_springLength");b=document.getElementById("graph_R_damp");b.onchange=L.bind(this,"graph_R_damp",1,"physics_damping");b=document.getElementById("graph_H_nd");b.onchange=L.bind(this,"graph_H_nd",1,"physics_hierarchicalRepulsion_nodeDistance");b=document.getElementById("graph_H_cg");
b.onchange=L.bind(this,"graph_H_cg",1,"physics_centralGravity");b=document.getElementById("graph_H_sc");b.onchange=L.bind(this,"graph_H_sc",1,"physics_springConstant");b=document.getElementById("graph_H_sl");b.onchange=L.bind(this,"graph_H_sl",1,"physics_springLength");b=document.getElementById("graph_H_damp");b.onchange=L.bind(this,"graph_H_damp",1,"physics_damping");b=document.getElementById("graph_H_direction");b.onchange=L.bind(this,"graph_H_direction",a,"hierarchicalLayout_direction");b=document.getElementById("graph_H_levsep");
b.onchange=L.bind(this,"graph_H_levsep",1,"hierarchicalLayout_levelSeparation");b=document.getElementById("graph_H_nspac");b.onchange=L.bind(this,"graph_H_nspac",1,"hierarchicalLayout_nodeSpacing");a=document.getElementById("graph_physicsMethod1");b=document.getElementById("graph_physicsMethod2");var c=document.getElementById("graph_physicsMethod3");b.checked=!0;this.constants.physics.barnesHut.enabled&&(a.checked=!0);this.constants.hierarchicalLayout.enabled&&(c.checked=!0);var e=document.getElementById("graph_toggleSmooth"),
g=document.getElementById("graph_repositionNodes"),d=document.getElementById("graph_generateOptions");e.onclick=ia.bind(this);g.onclick=S.bind(this);d.onclick=qa.bind(this);e.style.background=!0==this.constants.smoothCurves?"#A4FF56":"#FF8532";da.apply(this);a.onchange=da.bind(this);b.onchange=da.bind(this);c.onchange=da.bind(this)}},_overWriteGraphConstants:function(a,b){var c=a.split("_");1==c.length?this.constants[c[0]]=b:2==c.length?this.constants[c[0]][c[1]]=b:3==c.length&&(this.constants[c[0]][c[1]][c[2]]=
b)}},X={_calculateNodeForces:function(){var a,b,c,e,g,d,f,h,l=this.calculationNodes,k=this.calculationNodeIndices,n=this.constants.physics.hierarchicalRepulsion.nodeDistance;for(f=0;f<k.length-1;f++)for(g=l[k[f]],h=f+1;h<k.length;h++)d=l[k[h]],a=d.x-g.x,b=d.y-g.y,c=Math.sqrt(a*a+b*b),e=-2.5/n,c<2*n&&(e=e*c+5,0!=c&&(e/=c),a*=e,b*=e,g.fx-=a,g.fy-=b,d.fx+=a,d.fy+=b)}},fa={_calculateNodeForces:function(){if(0!=this.constants.physics.barnesHut.gravitationalConstant){var a,b=this.calculationNodes,c=this.calculationNodeIndices,
e=c.length;this._formBarnesHutTree(b,c);for(var g=this.barnesHutTree,d=0;d<e;d++)a=b[c[d]],this._getForceContribution(g.root.children.NW,a),this._getForceContribution(g.root.children.NE,a),this._getForceContribution(g.root.children.SW,a),this._getForceContribution(g.root.children.SE,a)}},_getForceContribution:function(a,b){if(0<a.childrenCount){var c,e,g;c=a.centerOfMass.x-b.x;e=a.centerOfMass.y-b.y;g=Math.sqrt(c*c+e*e);g*a.calcSize>this.constants.physics.barnesHut.theta?(0==g&&(c=g=.1*Math.random()),
g=this.constants.physics.barnesHut.gravitationalConstant*a.mass*b.mass/(g*g*g),b.fx+=c*g,b.fy+=e*g):4==a.childrenCount?(this._getForceContribution(a.children.NW,b),this._getForceContribution(a.children.NE,b),this._getForceContribution(a.children.SW,b),this._getForceContribution(a.children.SE,b)):a.children.data.id!=b.id&&(0==g&&(c=g=.5*Math.random()),g=this.constants.physics.barnesHut.gravitationalConstant*a.mass*b.mass/(g*g*g),b.fx+=c*g,b.fy+=e*g)}},_formBarnesHutTree:function(a,b){var c,e=b.length,
g=Number.MAX_VALUE;c=Number.MAX_VALUE;for(var d=-Number.MAX_VALUE,f=-Number.MAX_VALUE,h=0;h<e;h++){var l=a[b[h]].x,k=a[b[h]].y;l<g&&(g=l);l>d&&(d=l);k<c&&(c=k);k>f&&(f=k)}h=Math.abs(d-g)-Math.abs(f-c);0<h?(c-=.5*h,f+=.5*h):(g+=.5*h,d-=.5*h);h=Math.max(1E-5,Math.abs(d-g));l=.5*h;g=.5*(g+d);c=.5*(c+f);f={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:g-l,maxX:g+l,minY:c-l,maxY:c+l},size:h,calcSize:1/h,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(f.root);for(h=0;h<e;h++)c=
a[b[h]],this._placeInTree(f.root,c);this.barnesHutTree=f},_updateBranchMass:function(a,b){var c=a.mass+b.mass,e=1/c;a.centerOfMass.x=a.centerOfMass.x*a.mass+b.x*b.mass;a.centerOfMass.x*=e;a.centerOfMass.y=a.centerOfMass.y*a.mass+b.y*b.mass;a.centerOfMass.y*=e;a.mass=c;c=Math.max(Math.max(b.height,b.radius),b.width);a.maxWidth=a.maxWidth<c?c:a.maxWidth},_placeInTree:function(a,b,c){!0==c&&void 0!==c||this._updateBranchMass(a,b);a.children.NW.range.maxX>b.x?a.children.NW.range.maxY>b.y?this._placeInRegion(a,
b,"NW"):this._placeInRegion(a,b,"SW"):a.children.NW.range.maxY>b.y?this._placeInRegion(a,b,"NE"):this._placeInRegion(a,b,"SE")},_placeInRegion:function(a,b,c){switch(a.children[c].childrenCount){case 0:a.children[c].children.data=b;a.children[c].childrenCount=1;this._updateBranchMass(a.children[c],b);break;case 1:a.children[c].children.data.x==b.x&&a.children[c].children.data.y==b.y?(b.x+=Math.random(),b.y+=Math.random()):(this._splitBranch(a.children[c]),this._placeInTree(a.children[c],b));break;
case 4:this._placeInTree(a.children[c],b)}},_splitBranch:function(a){var b=null;1==a.childrenCount&&(b=a.children.data,a.mass=0,a.centerOfMass.x=0,a.centerOfMass.y=0);a.childrenCount=4;a.children.data=null;this._insertRegion(a,"NW");this._insertRegion(a,"NE");this._insertRegion(a,"SW");this._insertRegion(a,"SE");null!=b&&this._placeInTree(a,b)},_insertRegion:function(a,b){var c,e,d,f,h=.5*a.size;switch(b){case "NW":c=a.range.minX;e=a.range.minX+h;d=a.range.minY;f=a.range.minY+h;break;case "NE":c=
a.range.minX+h;e=a.range.maxX;d=a.range.minY;f=a.range.minY+h;break;case "SW":c=a.range.minX;e=a.range.minX+h;d=a.range.minY+h;f=a.range.maxY;break;case "SE":c=a.range.minX+h,e=a.range.maxX,d=a.range.minY+h,f=a.range.maxY}a.children[b]={centerOfMass:{x:0,y:0},mass:0,range:{minX:c,maxX:e,minY:d,maxY:f},size:.5*a.size,calcSize:2*a.calcSize,children:{data:null},maxWidth:0,level:a.level+1,childrenCount:0}},_drawTree:function(a,b){void 0!==this.barnesHutTree&&(a.lineWidth=1,this._drawBranch(this.barnesHutTree.root,
a,b))},_drawBranch:function(a,b,c){void 0===c&&(c="#FF0000");4==a.childrenCount&&(this._drawBranch(a.children.NW,b),this._drawBranch(a.children.NE,b),this._drawBranch(a.children.SE,b),this._drawBranch(a.children.SW,b));b.strokeStyle=c;b.beginPath();b.moveTo(a.range.minX,a.range.minY);b.lineTo(a.range.maxX,a.range.minY);b.stroke();b.beginPath();b.moveTo(a.range.maxX,a.range.minY);b.lineTo(a.range.maxX,a.range.maxY);b.stroke();b.beginPath();b.moveTo(a.range.maxX,a.range.maxY);b.lineTo(a.range.minX,
a.range.maxY);b.stroke();b.beginPath();b.moveTo(a.range.minX,a.range.maxY);b.lineTo(a.range.minX,a.range.minY);b.stroke()}},ea={_calculateNodeForces:function(){var a,b,c,e,d,f,h,l,k,n=this.calculationNodes,y=this.calculationNodeIndices,v=-2/3,A=4/3,p=this.constants.physics.repulsion.nodeDistance;d=p;for(l=0;l<y.length-1;l++)for(f=n[y[l]],k=l+1;k<y.length;k++){h=n[y[k]];e=f.clusterSize+h.clusterSize-2;a=h.x-f.x;b=h.y-f.y;c=Math.sqrt(a*a+b*b);d=0==e?p:p*(1+e*this.constants.clustering.distanceAmplification);
var D=v/d;c<2*d&&(d=c<.5*d?1:D*c+A,d*=0==e?1:1+e*this.constants.clustering.forceAmplification,d/=c,a*=d,b*=d,f.fx-=a,f.fy-=b,h.fx+=a,h.fy+=b)}}},ma={_resetLevels:function(){for(var a in this.nodes)if(this.nodes.hasOwnProperty(a)){var b=this.nodes[a];!1==b.preassignedLevel&&(b.level=-1)}},_setupHierarchicalLayout:function(){if(!0==this.constants.hierarchicalLayout.enabled){this.constants.hierarchicalLayout.levelSeparation="RL"==this.constants.hierarchicalLayout.direction||"DU"==this.constants.hierarchicalLayout.direction?
-1*this.constants.hierarchicalLayout.levelSeparation:Math.abs(this.constants.hierarchicalLayout.levelSeparation);var a=0,b,c,e=!1,d=!1;for(c in this.nodes)this.nodes.hasOwnProperty(c)&&(b=this.nodes[c],-1!=b.level?e=!0:d=!0,a<b.edges.length&&(a=b.edges.length));!0==d&&!0==e?(alert("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes."),this.zoomExtent(!0,this.constants.clustering.enabled),this.constants.clustering.enabled||this.start()):
(this._changeConstants(),!0==d&&this._determineLevels(a),a=this._getDistribution(),this._placeNodesByHierarchy(a),this.start())}},_placeNodesByHierarchy:function(a){var b,c;for(b in a[0].nodes)a[0].nodes.hasOwnProperty(b)&&(c=a[0].nodes[b],"UD"==this.constants.hierarchicalLayout.direction||"DU"==this.constants.hierarchicalLayout.direction?c.xFixed&&(c.x=a[0].minPos,c.xFixed=!1,a[0].minPos+=a[0].nodeSpacing):c.yFixed&&(c.y=a[0].minPos,c.yFixed=!1,a[0].minPos+=a[0].nodeSpacing),this._placeBranchNodes(c.edges,
c.id,a,c.level));this._stabilize()},_getDistribution:function(){var a={},b,c,e;for(b in this.nodes)this.nodes.hasOwnProperty(b)&&(c=this.nodes[b],c.xFixed=!0,c.yFixed=!0,"UD"==this.constants.hierarchicalLayout.direction||"DU"==this.constants.hierarchicalLayout.direction?c.y=this.constants.hierarchicalLayout.levelSeparation*c.level:c.x=this.constants.hierarchicalLayout.levelSeparation*c.level,a.hasOwnProperty(c.level)||(a[c.level]={amount:0,nodes:{},minPos:0,nodeSpacing:0}),a[c.level].amount+=1,a[c.level].nodes[c.id]=
c);b=0;for(e in a)a.hasOwnProperty(e)&&b<a[e].amount&&(b=a[e].amount);for(e in a)a.hasOwnProperty(e)&&(a[e].nodeSpacing=(b+1)*this.constants.hierarchicalLayout.nodeSpacing,a[e].nodeSpacing/=a[e].amount+1,a[e].minPos=a[e].nodeSpacing-.5*(a[e].amount+1)*a[e].nodeSpacing);return a},_determineLevels:function(a){var b,c;for(b in this.nodes)this.nodes.hasOwnProperty(b)&&(c=this.nodes[b],c.edges.length==a&&(c.level=0));for(b in this.nodes)this.nodes.hasOwnProperty(b)&&(c=this.nodes[b],0==c.level&&this._setLevel(1,
c.edges,c.id))},_changeConstants:function(){this.constants.clustering.enabled=!1;this.constants.physics.barnesHut.enabled=!1;this.constants.physics.hierarchicalRepulsion.enabled=!0;this._loadSelectedForceSolver();this.constants.smoothCurves=!1;this._configureSmoothCurves()},_placeBranchNodes:function(a,b,c,e){for(var d=0;d<a.length;d++){var f=null,f=a[d].toId==b?a[d].from:a[d].to,h=!1;"UD"==this.constants.hierarchicalLayout.direction||"DU"==this.constants.hierarchicalLayout.direction?f.xFixed&&f.level>
e&&(f.xFixed=!1,f.x=c[f.level].minPos,h=!0):f.yFixed&&f.level>e&&(f.yFixed=!1,f.y=c[f.level].minPos,h=!0);!0==h&&(c[f.level].minPos+=c[f.level].nodeSpacing,1<f.edges.length&&this._placeBranchNodes(f.edges,f.id,c,f.level))}},_setLevel:function(a,b,c){for(var e=0;e<b.length;e++){var d=null,d=b[e].toId==c?b[e].from:b[e].to;if(-1==d.level||d.level>a)d.level=a,1<b.length&&this._setLevel(a+1,d.edges,d.id)}},_restoreNodes:function(){for(nodeId in this.nodes)this.nodes.hasOwnProperty(nodeId)&&(this.nodes[nodeId].xFixed=
!1,this.nodes[nodeId].yFixed=!1)}},ga={_clearManipulatorBar:function(){for(;this.manipulationDiv.hasChildNodes();)this.manipulationDiv.removeChild(this.manipulationDiv.firstChild)},_restoreOverloadedFunctions:function(){for(var a in this.cachedFunctions)this.cachedFunctions.hasOwnProperty(a)&&(this[a]=this.cachedFunctions[a])},_toggleEditMode:function(){this.editMode=!this.editMode;var a=document.getElementById("graph-manipulationDiv"),b=document.getElementById("graph-manipulation-closeDiv"),c=document.getElementById("graph-manipulation-editMode");
!0==this.editMode?(a.style.display="block",b.style.display="block",c.style.display="none",b.onclick=this._toggleEditMode.bind(this)):(a.style.display="none",b.style.display="none",c.style.display="block",b.onclick=null);this._createManipulatorBar()},_createManipulatorBar:function(){this.boundFunction&&this.off("select",this.boundFunction);this._restoreOverloadedFunctions();this.forceAppendSelection=this.blockConnectingEdgeSelection=this.freezeSimulation=!1;if(!0==this.editMode){for(;this.manipulationDiv.hasChildNodes();)this.manipulationDiv.removeChild(this.manipulationDiv.firstChild);
this.manipulationDiv.innerHTML="<span class='graph-manipulationUI add' id='graph-manipulate-addNode'><span class='graph-manipulationLabel'>"+this.constants.labels.add+"</span></span><div class='graph-seperatorLine'></div><span class='graph-manipulationUI connect' id='graph-manipulate-connectNode'><span class='graph-manipulationLabel'>"+this.constants.labels.link+"</span></span>";1==this._getSelectedNodeCount()&&this.triggerFunctions.edit&&(this.manipulationDiv.innerHTML+="<div class='graph-seperatorLine'></div><span class='graph-manipulationUI edit' id='graph-manipulate-editNode'><span class='graph-manipulationLabel'>"+
this.constants.labels.editNode+"</span></span>");!1==this._selectionIsEmpty()&&(this.manipulationDiv.innerHTML+="<div class='graph-seperatorLine'></div><span class='graph-manipulationUI delete' id='graph-manipulate-delete'><span class='graph-manipulationLabel'>"+this.constants.labels.del+"</span></span>");document.getElementById("graph-manipulate-addNode").onclick=this._createAddNodeToolbar.bind(this);document.getElementById("graph-manipulate-connectNode").onclick=this._createAddEdgeToolbar.bind(this);
1==this._getSelectedNodeCount()&&this.triggerFunctions.edit&&(document.getElementById("graph-manipulate-editNode").onclick=this._editNode.bind(this));!1==this._selectionIsEmpty()&&(document.getElementById("graph-manipulate-delete").onclick=this._deleteSelected.bind(this));document.getElementById("graph-manipulation-closeDiv").onclick=this._toggleEditMode.bind(this);this.boundFunction=this._createManipulatorBar.bind(this);this.on("select",this.boundFunction)}else this.editModeDiv.innerHTML="<span class='graph-manipulationUI edit editmode' id='graph-manipulate-editModeButton'><span class='graph-manipulationLabel'>"+
this.constants.labels.edit+"</span></span>",document.getElementById("graph-manipulate-editModeButton").onclick=this._toggleEditMode.bind(this)},_createAddNodeToolbar:function(){this._clearManipulatorBar();this.boundFunction&&this.off("select",this.boundFunction);this.manipulationDiv.innerHTML="<span class='graph-manipulationUI back' id='graph-manipulate-back'><span class='graph-manipulationLabel'>"+this.constants.labels.back+" </span></span><div class='graph-seperatorLine'></div><span class='graph-manipulationUI none' id='graph-manipulate-back'><span id='graph-manipulatorLabel' class='graph-manipulationLabel'>"+
this.constants.labels.addDescription+"</span></span>";document.getElementById("graph-manipulate-back").onclick=this._createManipulatorBar.bind(this);this.boundFunction=this._addNode.bind(this);this.on("select",this.boundFunction)},_createAddEdgeToolbar:function(){this._clearManipulatorBar();this._unselectAll(!0);this.freezeSimulation=!0;this.boundFunction&&this.off("select",this.boundFunction);this._unselectAll();this.forceAppendSelection=!1;this.blockConnectingEdgeSelection=!0;this.manipulationDiv.innerHTML=
"<span class='graph-manipulationUI back' id='graph-manipulate-back'><span class='graph-manipulationLabel'>"+this.constants.labels.back+" </span></span><div class='graph-seperatorLine'></div><span class='graph-manipulationUI none' id='graph-manipulate-back'><span id='graph-manipulatorLabel' class='graph-manipulationLabel'>"+this.constants.labels.linkDescription+"</span></span>";document.getElementById("graph-manipulate-back").onclick=this._createManipulatorBar.bind(this);this.boundFunction=this._handleConnect.bind(this);
this.on("select",this.boundFunction);this.cachedFunctions._handleTouch=this._handleTouch;this.cachedFunctions._handleOnRelease=this._handleOnRelease;this._handleTouch=this._handleConnect;this._handleOnRelease=this._finishConnect;this._redraw()},_handleConnect:function(a){0==this._getSelectedNodeCount()&&(a=this._getNodeAt(a),null!=a&&(1<a.clusterSize?alert("Cannot create edges to a cluster."):(this._selectObject(a,!1),this.sectors.support.nodes.targetNode=new r({id:"targetNode"},{},{},this.constants),
this.sectors.support.nodes.targetNode.x=a.x,this.sectors.support.nodes.targetNode.y=a.y,this.sectors.support.nodes.targetViaNode=new r({id:"targetViaNode"},{},{},this.constants),this.sectors.support.nodes.targetViaNode.x=a.x,this.sectors.support.nodes.targetViaNode.y=a.y,this.sectors.support.nodes.targetViaNode.parentEdgeId="connectionEdge",this.edges.connectionEdge=new y({id:"connectionEdge",from:a.id,to:this.sectors.support.nodes.targetNode.id},this,this.constants),this.edges.connectionEdge.from=
a,this.edges.connectionEdge.connected=!0,this.edges.connectionEdge.smooth=!0,this.edges.connectionEdge.selected=!0,this.edges.connectionEdge.to=this.sectors.support.nodes.targetNode,this.edges.connectionEdge.via=this.sectors.support.nodes.targetViaNode,this.cachedFunctions._handleOnDrag=this._handleOnDrag,this._handleOnDrag=function(a){a=this._getPointer(a.gesture.center);this.sectors.support.nodes.targetNode.x=this._XconvertDOMtoCanvas(a.x);this.sectors.support.nodes.targetNode.y=this._YconvertDOMtoCanvas(a.y);
this.sectors.support.nodes.targetViaNode.x=.5*(this._XconvertDOMtoCanvas(a.x)+this.edges.connectionEdge.from.x);this.sectors.support.nodes.targetViaNode.y=this._YconvertDOMtoCanvas(a.y)},this.moving=!0,this.start())))},_finishConnect:function(a){if(1==this._getSelectedNodeCount()){this._handleOnDrag=this.cachedFunctions._handleOnDrag;delete this.cachedFunctions._handleOnDrag;var b=this.edges.connectionEdge.fromId;delete this.edges.connectionEdge;delete this.sectors.support.nodes.targetNode;delete this.sectors.support.nodes.targetViaNode;
a=this._getNodeAt(a);null!=a&&(1<a.clusterSize?alert("Cannot create edges to a cluster."):(this._createEdge(b,a.id),this._createManipulatorBar()));this._unselectAll()}},_addNode:function(){if(this._selectionIsEmpty()&&!0==this.editMode){var a=this._pointerToPositionObject(this.pointerPosition),a={id:l.randomUUID(),x:a.left,y:a.top,label:"new",allowedToMoveX:!0,allowedToMoveY:!0};if(this.triggerFunctions.add)if(2==this.triggerFunctions.add.length){var b=this;this.triggerFunctions.add(a,function(a){b.nodesData.add(a);
b._createManipulatorBar();b.moving=!0;b.start()})}else alert(this.constants.labels.addError),this._createManipulatorBar(),this.moving=!0,this.start();else this.nodesData.add(a),this._createManipulatorBar(),this.moving=!0,this.start()}},_createEdge:function(a,b){if(!0==this.editMode){var c={from:a,to:b};if(this.triggerFunctions.connect)if(2==this.triggerFunctions.connect.length){var e=this;this.triggerFunctions.connect(c,function(a){e.edgesData.add(a);e.moving=!0;e.start()})}else alert(this.constants.labels.linkError),
this.moving=!0,this.start();else this.edgesData.add(c),this.moving=!0,this.start()}},_editNode:function(){if(this.triggerFunctions.edit&&!0==this.editMode){var a=this._getSelectedNode(),a={id:a.id,label:a.label,group:a.group,shape:a.shape,color:{background:a.color.background,border:a.color.border,highlight:{background:a.color.highlight.background,border:a.color.highlight.border}}};if(2==this.triggerFunctions.edit.length){var b=this;this.triggerFunctions.edit(a,function(a){b.nodesData.update(a);b._createManipulatorBar();
b.moving=!0;b.start()})}else alert(this.constants.labels.editError)}else alert(this.constants.labels.editBoundError)},_deleteSelected:function(){if(!this._selectionIsEmpty()&&!0==this.editMode)if(this._clusterInSelection())alert(this.constants.labels.deleteClusterError);else{var a=this.getSelectedNodes(),b=this.getSelectedEdges();if(this.triggerFunctions.del){var c=this,a={nodes:a,edges:b};this.triggerFunctions.del.length=2;this.triggerFunctions.del(a,function(a){c.edgesData.remove(a.edges);c.nodesData.remove(a.nodes);
c._unselectAll();c.moving=!0;c.start()})}else this.edgesData.remove(b),this.nodesData.remove(a),this._unselectAll(),this.moving=!0,this.start()}}},na={_putDataInSector:function(){this.sectors.active[this._sector()].nodes=this.nodes;this.sectors.active[this._sector()].edges=this.edges;this.sectors.active[this._sector()].nodeIndices=this.nodeIndices},_switchToSector:function(a,b){void 0===b||"active"==b?this._switchToActiveSector(a):this._switchToFrozenSector(a)},_switchToActiveSector:function(a){this.nodeIndices=
this.sectors.active[a].nodeIndices;this.nodes=this.sectors.active[a].nodes;this.edges=this.sectors.active[a].edges},_switchToSupportSector:function(){this.nodeIndices=this.sectors.support.nodeIndices;this.nodes=this.sectors.support.nodes;this.edges=this.sectors.support.edges},_switchToFrozenSector:function(a){this.nodeIndices=this.sectors.frozen[a].nodeIndices;this.nodes=this.sectors.frozen[a].nodes;this.edges=this.sectors.frozen[a].edges},_loadLatestSector:function(){this._switchToSector(this._sector())},
_sector:function(){return this.activeSector[this.activeSector.length-1]},_previousSector:function(){if(1<this.activeSector.length)return this.activeSector[this.activeSector.length-2];throw new TypeError("there are not enough sectors in the this.activeSector array.");},_setActiveSector:function(a){this.activeSector.push(a)},_forgetLastSector:function(){this.activeSector.pop()},_createNewSector:function(a){this.sectors.active[a]={nodes:{},edges:{},nodeIndices:[],formationScale:this.scale,drawingNode:void 0};
this.sectors.active[a].drawingNode=new r({id:a,color:{background:"#eaefef",border:"495c5e"}},{},{},this.constants);this.sectors.active[a].drawingNode.clusterSize=2},_deleteActiveSector:function(a){delete this.sectors.active[a]},_deleteFrozenSector:function(a){delete this.sectors.frozen[a]},_freezeSector:function(a){this.sectors.frozen[a]=this.sectors.active[a];this._deleteActiveSector(a)},_activateSector:function(a){this.sectors.active[a]=this.sectors.frozen[a];this._deleteFrozenSector(a)},_mergeThisWithFrozen:function(a){for(var b in this.nodes)this.nodes.hasOwnProperty(b)&&
(this.sectors.frozen[a].nodes[b]=this.nodes[b]);for(var c in this.edges)this.edges.hasOwnProperty(c)&&(this.sectors.frozen[a].edges[c]=this.edges[c]);for(b=0;b<this.nodeIndices.length;b++)this.sectors.frozen[a].nodeIndices.push(this.nodeIndices[b])},_collapseThisToSingleCluster:function(){this.clusterToFit(1,!1)},_addSector:function(a){var b=this._sector();delete this.nodes[a.id];var c=l.randomUUID();this._freezeSector(b);this._createNewSector(c);this._setActiveSector(c);this._switchToSector(this._sector());
this.nodes[a.id]=a},_collapseSector:function(){var a=this._sector();if("default"!=a&&(1==this.nodeIndices.length||this.sectors.active[a].drawingNode.width*this.scale<this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientWidth||this.sectors.active[a].drawingNode.height*this.scale<this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientHeight)){var b=this._previousSector();this._collapseThisToSingleCluster();this._mergeThisWithFrozen(b);this._deleteActiveSector(a);this._activateSector(b);
this._switchToSector(b);this._forgetLastSector();this._updateNodeIndexList();this._updateCalculationNodes()}},_doInAllActiveSectors:function(a,b){if(void 0===b)for(var c in this.sectors.active)this.sectors.active.hasOwnProperty(c)&&(this._switchToActiveSector(c),this[a]());else for(c in this.sectors.active)if(this.sectors.active.hasOwnProperty(c)){this._switchToActiveSector(c);var e=Array.prototype.splice.call(arguments,1);if(1<e.length)this[a](e[0],e[1]);else this[a](b)}this._loadLatestSector()},
_doInSupportSector:function(a,b){if(void 0===b)this._switchToSupportSector(),this[a]();else{this._switchToSupportSector();var c=Array.prototype.splice.call(arguments,1);if(1<c.length)this[a](c[0],c[1]);else this[a](b)}this._loadLatestSector()},_doInAllFrozenSectors:function(a,b){if(void 0===b)for(var c in this.sectors.frozen)this.sectors.frozen.hasOwnProperty(c)&&(this._switchToFrozenSector(c),this[a]());else for(c in this.sectors.frozen)if(this.sectors.frozen.hasOwnProperty(c)){this._switchToFrozenSector(c);
var e=Array.prototype.splice.call(arguments,1);if(1<e.length)this[a](e[0],e[1]);else this[a](b)}this._loadLatestSector()},_doInAllSectors:function(a,b){var c=Array.prototype.splice.call(arguments,1);void 0===b?(this._doInAllActiveSectors(a),this._doInAllFrozenSectors(a)):1<c.length?(this._doInAllActiveSectors(a,c[0],c[1]),this._doInAllFrozenSectors(a,c[0],c[1])):(this._doInAllActiveSectors(a,b),this._doInAllFrozenSectors(a,b))},_clearNodeIndexList:function(){var a=this._sector();this.sectors.active[a].nodeIndices=
[];this.nodeIndices=this.sectors.active[a].nodeIndices},_drawSectorNodes:function(a,b){var c=1E9,e=-1E9,d=1E9,f=-1E9,h,l;for(l in this.sectors[b])if(this.sectors[b].hasOwnProperty(l)&&void 0!==this.sectors[b][l].drawingNode){this._switchToSector(l,b);var c=1E9,e=-1E9,d=1E9,f=-1E9,k;for(k in this.nodes)this.nodes.hasOwnProperty(k)&&(h=this.nodes[k],h.resize(a),d>h.x-.5*h.width&&(d=h.x-.5*h.width),f<h.x+.5*h.width&&(f=h.x+.5*h.width),c>h.y-.5*h.height&&(c=h.y-.5*h.height),e<h.y+.5*h.height&&(e=h.y+
.5*h.height));h=this.sectors[b][l].drawingNode;h.x=.5*(f+d);h.y=.5*(e+c);h.width=2*(h.x-d);h.height=2*(h.y-c);h.radius=Math.sqrt(Math.pow(.5*h.width,2)+Math.pow(.5*h.height,2));h.setScale(this.scale);h._drawCircle(a)}},_drawAllSectorNodes:function(a){this._drawSectorNodes(a,"frozen");this._drawSectorNodes(a,"active");this._loadLatestSector()}},U={startWithClustering:function(){this.clusterToFit(this.constants.clustering.initialMaxNodes,!0);this.updateLabels();this.stabilize&&this._stabilize();this.start()},
clusterToFit:function(a,b){for(var c=this.nodeIndices.length,e=0;c>a&&50>e;)0==e%3?(this.forceAggregateHubs(!0),this.normalizeClusterLevels()):this.increaseClusterLevel(),c=this.nodeIndices.length,e+=1;0<e&&!0==b&&this.repositionNodes();this._updateCalculationNodes()},openCluster:function(a){var b=this.moving;if(a.clusterSize>this.constants.clustering.sectorThreshold&&this._nodeInActiveArea(a)&&("default"!=this._sector()||1!=this.nodeIndices.length))for(this._addSector(a),a=0;this.nodeIndices.length<
this.constants.clustering.initialMaxNodes&&10>a;)this.decreaseClusterLevel(),a+=1;else this._expandClusterNode(a,!1,!0),this._updateNodeIndexList(),this._updateDynamicEdges(),this._updateCalculationNodes(),this.updateLabels();this.moving!=b&&this.start()},updateClustersDefault:function(){!0==this.constants.clustering.enabled&&this.updateClusters(0,!1,!1)},increaseClusterLevel:function(){this.updateClusters(-1,!1,!0)},decreaseClusterLevel:function(){this.updateClusters(1,!1,!0)},updateClusters:function(a,
b,c,e){var d=this.moving,f=this.nodeIndices.length;this.previousScale>this.scale&&0==a&&this._collapseSector();if(this.previousScale>this.scale||-1==a)this._formClusters(c);else if(this.previousScale<this.scale||1==a)!0==c?this._openClusters(b,c):this._openClustersBySize();this._updateNodeIndexList();this.nodeIndices.length==f&&(this.previousScale>this.scale||-1==a)&&(this._aggregateHubs(c),this._updateNodeIndexList());if(this.previousScale>this.scale||-1==a)this.handleChains(),this._updateNodeIndexList();
this.previousScale=this.scale;this._updateDynamicEdges();this.updateLabels();this.nodeIndices.length<f&&(this.clusterSession+=1,this.normalizeClusterLevels());!1!=e&&void 0!==e||this.moving==d||this.start();this._updateCalculationNodes()},handleChains:function(){var a=this._getChainFraction();a>this.constants.clustering.chainThreshold&&this._reduceAmountOfChains(1-this.constants.clustering.chainThreshold/a)},_aggregateHubs:function(a){this._getHubSize();this._formClustersByHub(a,!1)},forceAggregateHubs:function(a){var b=
this.moving,c=this.nodeIndices.length;this._aggregateHubs(!0);this._updateNodeIndexList();this._updateDynamicEdges();this.updateLabels();this.nodeIndices.length!=c&&(this.clusterSession+=1);!1!=a&&void 0!==a||this.moving==b||this.start()},_openClustersBySize:function(){for(var a in this.nodes)if(this.nodes.hasOwnProperty(a)){var b=this.nodes[a];!0==b.inView()&&(b.width*this.scale>this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientWidth||b.height*this.scale>this.constants.clustering.screenSizeThreshold*
this.frame.canvas.clientHeight)&&this.openCluster(b)}},_openClusters:function(a,b){for(var c=0;c<this.nodeIndices.length;c++)this._expandClusterNode(this.nodes[this.nodeIndices[c]],a,b),this._updateCalculationNodes()},_expandClusterNode:function(a,b,c,e){if(1<a.clusterSize&&(a.clusterSize<this.constants.clustering.sectorThreshold&&(e=!0),b=e?!0:b,a.formationScale<this.scale||!0==c))for(var d in a.containedNodes)if(a.containedNodes.hasOwnProperty(d)){var f=a.containedNodes[d];!0==c?(f.clusterSession==
a.clusterSessions[a.clusterSessions.length-1]||e)&&this._expelChildFromParent(a,d,b,c,e):this._nodeInActiveArea(a)&&this._expelChildFromParent(a,d,b,c,e)}},_expelChildFromParent:function(a,b,c,e,d){var f=a.containedNodes[b];if(f.formationScale<this.scale||!0==e){this._unselectAll();this.nodes[b]=f;this._releaseContainedEdges(a,f);this._connectEdgeBackToChild(a,f);this._validateEdges(a);a.mass-=f.mass;a.clusterSize-=f.clusterSize;a.fontSize=Math.min(this.constants.clustering.maxFontSize,this.constants.nodes.fontSize+
this.constants.clustering.fontSizeMultiplier*a.clusterSize);a.dynamicEdgesLength=a.dynamicEdges.length;f.x=a.x+a.growthIndicator*(.5-Math.random());f.y=a.y+a.growthIndicator*(.5-Math.random());delete a.containedNodes[b];b=!1;for(var h in a.containedNodes)if(a.containedNodes.hasOwnProperty(h)&&a.containedNodes[h].clusterSession==f.clusterSession){b=!0;break}!1==b&&a.clusterSessions.pop();this._repositionBezierNodes(f);f.clusterSession=0;a.clearSizeCache();this.moving=!0}!0==c&&this._expandClusterNode(f,
c,e,d)},_repositionBezierNodes:function(a){for(var b=0;b<a.dynamicEdges.length;b++)a.dynamicEdges[b].positionBezierNode()},_formClusters:function(a){!1==a?this._formClustersByZoom():this._forceClustersByZoom()},_formClustersByZoom:function(){var a,b,c=this.constants.clustering.clusterEdgeThreshold/this.scale,e;for(e in this.edges)if(this.edges.hasOwnProperty(e)){var d=this.edges[e];d.connected&&d.toId!=d.fromId&&(a=d.to.x-d.from.x,b=d.to.y-d.from.y,a=Math.sqrt(a*a+b*b),a<c&&(a=d.from,b=d.to,d.to.mass>
d.from.mass&&(a=d.to,b=d.from),1==b.dynamicEdgesLength?this._addToCluster(a,b,!1):1==a.dynamicEdgesLength&&this._addToCluster(b,a,!1)))}},_forceClustersByZoom:function(){for(var a in this.nodes)if(this.nodes.hasOwnProperty(a)){var b=this.nodes[a];if(1==b.dynamicEdgesLength&&0!=b.dynamicEdges.length){var c=b.dynamicEdges[0],c=c.toId==b.id?this.nodes[c.fromId]:this.nodes[c.toId];b.id!=c.id&&(c.mass>b.mass?this._addToCluster(c,b,!0):this._addToCluster(b,c,!0))}}},_clusterToSmallestNeighbour:function(a){for(var b=
-1,c=0;c<a.dynamicEdges.length;c++)if(void 0!==a.dynamicEdges[c]){var e=null;a.dynamicEdges[c].fromId!=a.id?e=a.dynamicEdges[c].from:a.dynamicEdges[c].toId!=a.id&&(e=a.dynamicEdges[c].to);null!=e&&b>e.clusterSessions.length&&(b=e.clusterSessions.length)}null!=e&&void 0!==this.nodes[e.id]&&this._addToCluster(e,a,!0)},_formClustersByHub:function(a,b){for(var c in this.nodes)this.nodes.hasOwnProperty(c)&&this._formClusterFromHub(this.nodes[c],a,b)},_formClusterFromHub:function(a,b,c,e){void 0===e&&(e=
0);if(a.dynamicEdgesLength>=this.hubThreshold&&!1==c||a.dynamicEdgesLength==this.hubThreshold&&!0==c){var d,f,h=this.constants.clustering.clusterEdgeThreshold/this.scale,l=!1;c=[];for(var k=a.dynamicEdges.length,n=0;n<k;n++)c.push(a.dynamicEdges[n].id);if(!1==b)for(l=!1,n=0;n<k;n++)if(f=this.edges[c[n]],void 0!==f&&f.connected&&f.toId!=f.fromId&&(d=f.to.x-f.from.x,f=f.to.y-f.from.y,d=Math.sqrt(d*d+f*f),d<h)){l=!0;break}if(!b&&l||b)for(n=0;n<k;n++)f=this.edges[c[n]],void 0!==f&&(h=this.nodes[f.fromId==
a.id?f.toId:f.fromId],h.dynamicEdges.length<=this.hubThreshold+e&&h.id!=a.id&&this._addToCluster(a,h,b))}},_addToCluster:function(a,b,c){a.containedNodes[b.id]=b;for(var e=0;e<b.dynamicEdges.length;e++){var d=b.dynamicEdges[e];d.toId==a.id||d.fromId==a.id?this._addToContainedEdges(a,b,d):this._connectEdgeToCluster(a,b,d)}b.dynamicEdges=[];this._containCircularEdgesFromNode(a,b);delete this.nodes[b.id];e=a.mass;b.clusterSession=this.clusterSession;a.mass+=b.mass;a.clusterSize+=b.clusterSize;a.fontSize=
Math.min(this.constants.clustering.maxFontSize,this.constants.nodes.fontSize+this.constants.clustering.fontSizeMultiplier*a.clusterSize);a.clusterSessions[a.clusterSessions.length-1]!=this.clusterSession&&a.clusterSessions.push(this.clusterSession);a.formationScale=!0==c?0:this.scale;a.clearSizeCache();a.containedNodes[b.id].formationScale=a.formationScale;b.clearVelocity();a.updateVelocity(e);this.moving=!0},_updateDynamicEdges:function(){for(var a=0;a<this.nodeIndices.length;a++){var b=this.nodes[this.nodeIndices[a]];
b.dynamicEdgesLength=b.dynamicEdges.length;var c=0;if(1<b.dynamicEdgesLength)for(var e=0;e<b.dynamicEdgesLength-1;e++)for(var d=b.dynamicEdges[e].toId,f=b.dynamicEdges[e].fromId,h=e+1;h<b.dynamicEdgesLength;h++)if(b.dynamicEdges[h].toId==d&&b.dynamicEdges[h].fromId==f||b.dynamicEdges[h].fromId==d&&b.dynamicEdges[h].toId==f)c+=1;b.dynamicEdgesLength-=c}},_addToContainedEdges:function(a,b,c){a.containedEdges.hasOwnProperty(b.id)||(a.containedEdges[b.id]=[]);a.containedEdges[b.id].push(c);delete this.edges[c.id];
for(b=0;b<a.dynamicEdges.length;b++)if(a.dynamicEdges[b].id==c.id){a.dynamicEdges.splice(b,1);break}},_connectEdgeToCluster:function(a,b,c){c.toId==c.fromId?this._addToContainedEdges(a,b,c):(c.toId==b.id?(c.originalToId.push(b.id),c.to=a,c.toId=a.id):(c.originalFromId.push(b.id),c.from=a,c.fromId=a.id),this._addToReroutedEdges(a,b,c))},_containCircularEdgesFromNode:function(a,b){for(var c=0;c<a.dynamicEdges.length;c++){var e=a.dynamicEdges[c];e.toId==e.fromId&&this._addToContainedEdges(a,b,e)}},_addToReroutedEdges:function(a,
b,c){a.reroutedEdges.hasOwnProperty(b.id)||(a.reroutedEdges[b.id]=[]);a.reroutedEdges[b.id].push(c);a.dynamicEdges.push(c)},_connectEdgeBackToChild:function(a,b){if(a.reroutedEdges.hasOwnProperty(b.id)){for(var c=0;c<a.reroutedEdges[b.id].length;c++){var e=a.reroutedEdges[b.id][c];e.originalFromId[e.originalFromId.length-1]==b.id?(e.originalFromId.pop(),e.fromId=b.id,e.from=b):(e.originalToId.pop(),e.toId=b.id,e.to=b);b.dynamicEdges.push(e);for(var d=0;d<a.dynamicEdges.length;d++)if(a.dynamicEdges[d].id==
e.id){a.dynamicEdges.splice(d,1);break}}delete a.reroutedEdges[b.id]}},_validateEdges:function(a){for(var b=0;b<a.dynamicEdges.length;b++){var c=a.dynamicEdges[b];a.id!=c.toId&&a.id!=c.fromId&&a.dynamicEdges.splice(b,1)}},_releaseContainedEdges:function(a,b){for(var c=0;c<a.containedEdges[b.id].length;c++){var e=a.containedEdges[b.id][c];this.edges[e.id]=e;b.dynamicEdges.push(e);a.dynamicEdges.push(e)}delete a.containedEdges[b.id]},updateLabels:function(){for(var a in this.nodes)if(this.nodes.hasOwnProperty(a)){var b=
this.nodes[a];1<b.clusterSize&&(b.label="[".concat(String(b.clusterSize),"]"))}for(a in this.nodes)this.nodes.hasOwnProperty(a)&&(b=this.nodes[a],1==b.clusterSize&&(b.label=void 0!==b.originalLabel?b.originalLabel:String(b.id)))},normalizeClusterLevels:function(){var a=0,b=1E9,c=0,e;for(e in this.nodes)this.nodes.hasOwnProperty(e)&&(c=this.nodes[e].clusterSessions.length,a<c&&(a=c),b>c&&(b=c));if(a-b>this.constants.clustering.clusterLevelDifference){b=this.nodeIndices.length;a-=this.constants.clustering.clusterLevelDifference;
for(e in this.nodes)this.nodes.hasOwnProperty(e)&&this.nodes[e].clusterSessions.length<a&&this._clusterToSmallestNeighbour(this.nodes[e]);this._updateNodeIndexList();this._updateDynamicEdges();this.nodeIndices.length!=b&&(this.clusterSession+=1)}},_nodeInActiveArea:function(a){return Math.abs(a.x-this.areaCenter.x)<=this.constants.clustering.activeAreaBoxSize/this.scale&&Math.abs(a.y-this.areaCenter.y)<=this.constants.clustering.activeAreaBoxSize/this.scale},repositionNodes:function(){for(var a=0;a<
this.nodeIndices.length;a++){var b=this.nodes[this.nodeIndices[a]];if(!1==b.xFixed||!1==b.yFixed){var c=1*this.nodeIndices.length*Math.min(100,b.mass),e=2*Math.PI*Math.random();!1==b.xFixed&&(b.x=c*Math.cos(e));!1==b.yFixed&&(b.y=c*Math.sin(e));this._repositionBezierNodes(b)}}},_getHubSize:function(){for(var a=0,b=0,c=0,e=0,d=0;d<this.nodeIndices.length;d++){var f=this.nodes[this.nodeIndices[d]];f.dynamicEdgesLength>e&&(e=f.dynamicEdgesLength);a+=f.dynamicEdgesLength;b+=Math.pow(f.dynamicEdgesLength,
2);c+=1}a/=c;b=b/c-Math.pow(a,2);b=Math.sqrt(b);this.hubThreshold=Math.floor(a+2*b);this.hubThreshold>e&&(this.hubThreshold=e)},_reduceAmountOfChains:function(a){this.hubThreshold=2;a=Math.floor(this.nodeIndices.length*a);for(var b in this.nodes)this.nodes.hasOwnProperty(b)&&2==this.nodes[b].dynamicEdgesLength&&2<=this.nodes[b].dynamicEdges.length&&0<a&&(this._formClusterFromHub(this.nodes[b],!0,!0,1),a-=1)},_getChainFraction:function(){var a=0,b=0,c;for(c in this.nodes)this.nodes.hasOwnProperty(c)&&
(2==this.nodes[c].dynamicEdgesLength&&2<=this.nodes[c].dynamicEdges.length&&(a+=1),b+=1);return a/b}},ta={_getNodesOverlappingWith:function(a,b){var c=this.nodes,e;for(e in c)c.hasOwnProperty(e)&&c[e].isOverlappingWith(a)&&b.push(e)},_getAllNodesOverlappingWith:function(a){var b=[];this._doInAllActiveSectors("_getNodesOverlappingWith",a,b);return b},_pointerToPositionObject:function(a){var b=this._XconvertDOMtoCanvas(a.x);a=this._YconvertDOMtoCanvas(a.y);return{left:b,top:a,right:b,bottom:a}},_getNodeAt:function(a){a=
this._pointerToPositionObject(a);a=this._getAllNodesOverlappingWith(a);return 0<a.length?this.nodes[a[a.length-1]]:null},_getEdgesOverlappingWith:function(a,b){var c=this.edges,e;for(e in c)c.hasOwnProperty(e)&&c[e].isOverlappingWith(a)&&b.push(e)},_getAllEdgesOverlappingWith:function(a){var b=[];this._doInAllActiveSectors("_getEdgesOverlappingWith",a,b);return b},_getEdgeAt:function(a){a=this._pointerToPositionObject(a);a=this._getAllEdgesOverlappingWith(a);return 0<a.length?this.edges[a[a.length-
1]]:null},_addToSelection:function(a){a instanceof r?this.selectionObj.nodes[a.id]=a:this.selectionObj.edges[a.id]=a},_removeFromSelection:function(a){a instanceof r?delete this.selectionObj.nodes[a.id]:delete this.selectionObj.edges[a.id]},_unselectAll:function(a){void 0===a&&(a=!1);for(var b in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(b)&&this.selectionObj.nodes[b].unselect();for(var c in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(c)&&this.selectionObj.edges[c].unselect();
this.selectionObj={nodes:{},edges:{}};!1==a&&this.emit("select",this.getSelection())},_unselectClusters:function(a){void 0===a&&(a=!1);for(var b in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(b)&&1<this.selectionObj.nodes[b].clusterSize&&(this.selectionObj.nodes[b].unselect(),this._removeFromSelection(this.selectionObj.nodes[b]));!1==a&&this.emit("select",this.getSelection())},_getSelectedNodeCount:function(){var a=0,b;for(b in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(b)&&
(a+=1);return a},_getSelectedNode:function(){for(var a in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(a))return this.selectionObj.nodes[a];return null},_getSelectedEdgeCount:function(){var a=0,b;for(b in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(b)&&(a+=1);return a},_getSelectedObjectCount:function(){var a=0,b;for(b in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(b)&&(a+=1);for(var c in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(c)&&
(a+=1);return a},_selectionIsEmpty:function(){for(var a in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(a))return!1;for(var b in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(b))return!1;return!0},_clusterInSelection:function(){for(var a in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(a)&&1<this.selectionObj.nodes[a].clusterSize)return!0;return!1},_selectConnectedEdges:function(a){for(var b=0;b<a.dynamicEdges.length;b++){var c=a.dynamicEdges[b];
c.select();this._addToSelection(c)}},_unselectConnectedEdges:function(a){for(var b=0;b<a.dynamicEdges.length;b++){var c=a.dynamicEdges[b];c.unselect();this._removeFromSelection(c)}},_selectObject:function(a,b,c){void 0===c&&(c=!1);!1==this._selectionIsEmpty()&&!1==b&&!1==this.forceAppendSelection&&this._unselectAll(!0);!1==a.selected?(a.select(),this._addToSelection(a),a instanceof r&&!1==this.blockConnectingEdgeSelection&&this._selectConnectedEdges(a)):(a.unselect(),this._removeFromSelection(a));
!1==c&&this.emit("select",this.getSelection())},_handleTouch:function(a){},_handleTap:function(a){var b=this._getNodeAt(a);null!=b?this._selectObject(b,!1):(a=this._getEdgeAt(a),null!=a?this._selectObject(a,!1):this._unselectAll());this.emit("click",this.getSelection());this._redraw()},_handleDoubleTap:function(a){var b=this._getNodeAt(a);null!=b&&void 0!==b&&(this.areaCenter={x:this._XconvertDOMtoCanvas(a.x),y:this._YconvertDOMtoCanvas(a.y)},this.openCluster(b));this.emit("doubleClick",this.getSelection())},
_handleOnHold:function(a){var b=this._getNodeAt(a);null!=b?this._selectObject(b,!0):(a=this._getEdgeAt(a),null!=a&&this._selectObject(a,!0));this._redraw()},_handleOnRelease:function(a){},getSelection:function(){var a=this.getSelectedNodes(),b=this.getSelectedEdges();return{nodes:a,edges:b}},getSelectedNodes:function(){var a=[],b;for(b in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(b)&&a.push(b);return a},getSelectedEdges:function(){var a=[],b;for(b in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(b)&&
a.push(b);return a},setSelection:function(a){var b,c,e;if(!a||void 0==a.length)throw"Selection must be an array with ids";this._unselectAll(!0);b=0;for(c=a.length;b<c;b++){e=a[b];var d=this.nodes[e];if(!d)throw new RangeError('Node with id "'+e+'" not found');this._selectObject(d,!0,!0)}this.redraw()},_updateSelection:function(){for(var a in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(a)&&(this.nodes.hasOwnProperty(a)||delete this.selectionObj.nodes[a]);for(var b in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(b)&&
(this.edges.hasOwnProperty(b)||delete this.selectionObj.edges[b])}},oa={_cleanNavigation:function(){var a=document.getElementById("graph-navigation_wrapper");null!=a&&this.containerElement.removeChild(a);document.onmouseup=null},_loadNavigationElements:function(){this._cleanNavigation();this.navigationDivs={};var a="up down left right zoomIn zoomOut zoomExtends".split(" "),b="_moveUp _moveDown _moveLeft _moveRight _zoomIn _zoomOut zoomExtent".split(" ");this.navigationDivs.wrapper=document.createElement("div");
this.navigationDivs.wrapper.id="graph-navigation_wrapper";this.navigationDivs.wrapper.style.position="absolute";this.navigationDivs.wrapper.style.width=this.frame.canvas.clientWidth+"px";this.navigationDivs.wrapper.style.height=this.frame.canvas.clientHeight+"px";this.containerElement.insertBefore(this.navigationDivs.wrapper,this.frame);for(var c=0;c<a.length;c++)this.navigationDivs[a[c]]=document.createElement("div"),this.navigationDivs[a[c]].id="graph-navigation_"+a[c],this.navigationDivs[a[c]].className=
"graph-navigation "+a[c],this.navigationDivs.wrapper.appendChild(this.navigationDivs[a[c]]),this.navigationDivs[a[c]].onmousedown=this[b[c]].bind(this);document.onmouseup=this._stopMovement.bind(this)},_stopMovement:function(){this._xStopMoving();this._yStopMoving();this._stopZoom()},_preventDefault:function(a){void 0!==a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},_moveUp:function(a){this.yIncrement=this.constants.keyboard.speed.y;this.start();this._preventDefault(a);this.navigationDivs&&
(this.navigationDivs.up.className+=" active")},_moveDown:function(a){this.yIncrement=-this.constants.keyboard.speed.y;this.start();this._preventDefault(a);this.navigationDivs&&(this.navigationDivs.down.className+=" active")},_moveLeft:function(a){this.xIncrement=this.constants.keyboard.speed.x;this.start();this._preventDefault(a);this.navigationDivs&&(this.navigationDivs.left.className+=" active")},_moveRight:function(a){this.xIncrement=-this.constants.keyboard.speed.y;this.start();this._preventDefault(a);
this.navigationDivs&&(this.navigationDivs.right.className+=" active")},_zoomIn:function(a){this.zoomIncrement=this.constants.keyboard.speed.zoom;this.start();this._preventDefault(a);this.navigationDivs&&(this.navigationDivs.zoomIn.className+=" active")},_zoomOut:function(){this.zoomIncrement=-this.constants.keyboard.speed.zoom;this.start();this._preventDefault(event);this.navigationDivs&&(this.navigationDivs.zoomOut.className+=" active")},_stopZoom:function(){this.zoomIncrement=0;this.navigationDivs&&
(this.navigationDivs.zoomIn.className=this.navigationDivs.zoomIn.className.replace(" active",""),this.navigationDivs.zoomOut.className=this.navigationDivs.zoomOut.className.replace(" active",""))},_yStopMoving:function(){this.yIncrement=0;this.navigationDivs&&(this.navigationDivs.up.className=this.navigationDivs.up.className.replace(" active",""),this.navigationDivs.down.className=this.navigationDivs.down.className.replace(" active",""))},_xStopMoving:function(){this.xIncrement=0;this.navigationDivs&&
(this.navigationDivs.left.className=this.navigationDivs.left.className.replace(" active",""),this.navigationDivs.right.className=this.navigationDivs.right.className.replace(" active",""))}},n={_loadMixin:function(a){for(var b in a)a.hasOwnProperty(b)&&(t.prototype[b]=a[b])},_clearMixin:function(a){for(var b in a)a.hasOwnProperty(b)&&(t.prototype[b]=void 0)},_loadPhysicsSystem:function(){this._loadMixin(sa);this._loadSelectedForceSolver();!0==this.constants.configurePhysics&&this._loadPhysicsConfiguration()},
_loadClusterSystem:function(){this.clusterSession=0;this.hubThreshold=5;this._loadMixin(U)},_loadSectorSystem:function(){this.sectors={};this.activeSector=["default"];this.sectors.active={};this.sectors.active["default"]={nodes:{},edges:{},nodeIndices:[],formationScale:1,drawingNode:void 0};this.sectors.frozen={};this.sectors.support={nodes:{},edges:{},nodeIndices:[],formationScale:1,drawingNode:void 0};this.nodeIndices=this.sectors.active["default"].nodeIndices;this._loadMixin(na)},_loadSelectionSystem:function(){this.selectionObj=
{nodes:{},edges:{}};this._loadMixin(ta)},_loadManipulationSystem:function(){this.forceAppendSelection=this.blockConnectingEdgeSelection=!1;!0==this.constants.dataManipulation.enabled?(void 0===this.manipulationDiv&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="graph-manipulationDiv",this.manipulationDiv.id="graph-manipulationDiv",this.manipulationDiv.style.display=!0==this.editMode?"block":"none",this.containerElement.insertBefore(this.manipulationDiv,this.frame)),
void 0===this.editModeDiv&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="graph-manipulation-editMode",this.editModeDiv.id="graph-manipulation-editMode",this.editModeDiv.style.display=!0==this.editMode?"none":"block",this.containerElement.insertBefore(this.editModeDiv,this.frame)),void 0===this.closeDiv&&(this.closeDiv=document.createElement("div"),this.closeDiv.className="graph-manipulation-closeDiv",this.closeDiv.id="graph-manipulation-closeDiv",this.closeDiv.style.display=
this.manipulationDiv.style.display,this.containerElement.insertBefore(this.closeDiv,this.frame)),this._loadMixin(ga),this._createManipulatorBar()):void 0!==this.manipulationDiv&&(this._createManipulatorBar(),this.containerElement.removeChild(this.manipulationDiv),this.containerElement.removeChild(this.editModeDiv),this.containerElement.removeChild(this.closeDiv),this.closeDiv=this.editModeDiv=this.manipulationDiv=void 0,this._clearMixin(ga))},_loadNavigationControls:function(){this._loadMixin(oa);
this._cleanNavigation();!0==this.constants.navigation.enabled&&this._loadNavigationElements()},_loadHierarchySystem:function(){this._loadMixin(ma)}};$(t.prototype);t.prototype._getScriptPath=function(){for(var a=document.getElementsByTagName("script"),b=0;b<a.length;b++){var c=a[b].src,e=c&&/\/?vis(.min)?\.js$/.exec(c);if(e)return c.substring(0,c.length-e[0].length)}return null};t.prototype._getRange=function(){var a=1E9,b=-1E9,c=1E9,e=-1E9,d,f;for(f in this.nodes)this.nodes.hasOwnProperty(f)&&(d=
this.nodes[f],c>d.x&&(c=d.x),e<d.x&&(e=d.x),a>d.y&&(a=d.y),b<d.y&&(b=d.y));1E9==c&&-1E9==e&&1E9==a&&-1E9==b&&(e=c=b=a=0);return{minX:c,maxX:e,minY:a,maxY:b}};t.prototype._findCenter=function(a){return{x:.5*(a.maxX+a.minX),y:.5*(a.maxY+a.minY)}};t.prototype._centerGraph=function(a){a=this._findCenter(a);a.x*=this.scale;a.y*=this.scale;a.x-=.5*this.frame.canvas.clientWidth;a.y-=.5*this.frame.canvas.clientHeight;this._setTranslation(-a.x,-a.y)};t.prototype.zoomExtent=function(a,b){void 0===a&&(a=!1);
void 0===b&&(b=!1);var c=this._getRange(),e;if(!0==a){e=this.nodeIndices.length;e=!0==this.constants.smoothCurves?!0==this.constants.clustering.enabled&&e>=this.constants.clustering.initialMaxNodes?49.07548/(e+142.05338)+9.1444E-4:12.662/(e+7.4147)+.0964822:!0==this.constants.clustering.enabled&&e>=this.constants.clustering.initialMaxNodes?77.5271985/(e+187.266146)+4.76710517E-5:30.5062972/(e+19.93597763)+.08413486;var d=Math.min(this.frame.canvas.clientWidth/600,this.frame.canvas.clientHeight/600);
e*=d}else d=1.1*(Math.abs(c.minX)+Math.abs(c.maxX)),e=1.1*(Math.abs(c.minY)+Math.abs(c.maxY)),d=this.frame.canvas.clientWidth/d,e=this.frame.canvas.clientHeight/e,e=d<=e?d:e;1<e&&(e=1);this._setScale(e);this._centerGraph(c);!1==b&&(this.moving=!0,this.start())};t.prototype._updateNodeIndexList=function(){this._clearNodeIndexList();for(var a in this.nodes)this.nodes.hasOwnProperty(a)&&this.nodeIndices.push(a)};t.prototype.setData=function(a,b){void 0===b&&(b=!1);if(a&&a.dot&&(a.nodes||a.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');
this.setOptions(a&&a.options);if(a&&a.dot){if(a&&a.dot){var c=T.util.DOTToGraph(a.dot);this.setData(c);return}}else this._setNodes(a&&a.nodes),this._setEdges(a&&a.edges);this._putDataInSector();if(!b)if(this.stabilize){var e=this;setTimeout(function(){e._stabilize();e.start()},0)}else this.start()};t.prototype.setOptions=function(a){if(a){var b;void 0!==a.width&&(this.width=a.width);void 0!==a.height&&(this.height=a.height);void 0!==a.stabilize&&(this.stabilize=a.stabilize);void 0!==a.selectable&&
(this.selectable=a.selectable);void 0!==a.smoothCurves&&(this.constants.smoothCurves=a.smoothCurves);void 0!==a.freezeForStabilization&&(this.constants.freezeForStabilization=a.freezeForStabilization);void 0!==a.configurePhysics&&(this.constants.configurePhysics=a.configurePhysics);void 0!==a.stabilizationIterations&&(this.constants.stabilizationIterations=a.stabilizationIterations);void 0!==a.moveable&&(this.constants.moveable=a.moveable);void 0!==a.zoomable&&(this.constants.zoomable=a.zoomable);
if(void 0!==a.labels)for(b in a.labels)a.labels.hasOwnProperty(b)&&(this.constants.labels[b]=a.labels[b]);a.onAdd&&(this.triggerFunctions.add=a.onAdd);a.onEdit&&(this.triggerFunctions.edit=a.onEdit);a.onConnect&&(this.triggerFunctions.connect=a.onConnect);a.onDelete&&(this.triggerFunctions.del=a.onDelete);if(a.physics){if(a.physics.barnesHut)for(b in this.constants.physics.barnesHut.enabled=!0,a.physics.barnesHut)a.physics.barnesHut.hasOwnProperty(b)&&(this.constants.physics.barnesHut[b]=a.physics.barnesHut[b]);
if(a.physics.repulsion)for(b in this.constants.physics.barnesHut.enabled=!1,a.physics.repulsion)a.physics.repulsion.hasOwnProperty(b)&&(this.constants.physics.repulsion[b]=a.physics.repulsion[b]);if(a.physics.hierarchicalRepulsion)for(b in this.constants.hierarchicalLayout.enabled=!0,this.constants.physics.hierarchicalRepulsion.enabled=!0,this.constants.physics.barnesHut.enabled=!1,a.physics.hierarchicalRepulsion)a.physics.hierarchicalRepulsion.hasOwnProperty(b)&&(this.constants.physics.hierarchicalRepulsion[b]=
a.physics.hierarchicalRepulsion[b])}if(a.hierarchicalLayout)for(b in this.constants.hierarchicalLayout.enabled=!0,a.hierarchicalLayout)a.hierarchicalLayout.hasOwnProperty(b)&&(this.constants.hierarchicalLayout[b]=a.hierarchicalLayout[b]);else void 0!==a.hierarchicalLayout&&(this.constants.hierarchicalLayout.enabled=!1);if(a.clustering)for(b in this.constants.clustering.enabled=!0,a.clustering)a.clustering.hasOwnProperty(b)&&(this.constants.clustering[b]=a.clustering[b]);else void 0!==a.clustering&&
(this.constants.clustering.enabled=!1);if(a.navigation)for(b in this.constants.navigation.enabled=!0,a.navigation)a.navigation.hasOwnProperty(b)&&(this.constants.navigation[b]=a.navigation[b]);else void 0!==a.navigation&&(this.constants.navigation.enabled=!1);if(a.keyboard)for(b in this.constants.keyboard.enabled=!0,a.keyboard)a.keyboard.hasOwnProperty(b)&&(this.constants.keyboard[b]=a.keyboard[b]);else void 0!==a.keyboard&&(this.constants.keyboard.enabled=!1);if(a.dataManipulation)for(b in this.constants.dataManipulation.enabled=
!0,a.dataManipulation)a.dataManipulation.hasOwnProperty(b)&&(this.constants.dataManipulation[b]=a.dataManipulation[b]);else void 0!==a.dataManipulation&&(this.constants.dataManipulation.enabled=!1);if(a.edges){for(b in a.edges)a.edges.hasOwnProperty(b)&&"object"!=typeof a.edges[b]&&(this.constants.edges[b]=a.edges[b]);void 0!==a.edges.color&&(l.isString(a.edges.color)?(this.constants.edges.color={},this.constants.edges.color.color=a.edges.color,this.constants.edges.color.highlight=a.edges.color):
(void 0!==a.edges.color.color&&(this.constants.edges.color.color=a.edges.color.color),void 0!==a.edges.color.highlight&&(this.constants.edges.color.highlight=a.edges.color.highlight)));a.edges.fontColor||void 0===a.edges.color||(l.isString(a.edges.color)?this.constants.edges.fontColor=a.edges.color:void 0!==a.edges.color.color&&(this.constants.edges.fontColor=a.edges.color.color));a.edges.dash&&(void 0!==a.edges.dash.length&&(this.constants.edges.dash.length=a.edges.dash.length),void 0!==a.edges.dash.gap&&
(this.constants.edges.dash.gap=a.edges.dash.gap),void 0!==a.edges.dash.altLength&&(this.constants.edges.dash.altLength=a.edges.dash.altLength))}if(a.nodes){for(b in a.nodes)a.nodes.hasOwnProperty(b)&&(this.constants.nodes[b]=a.nodes[b]);a.nodes.color&&(this.constants.nodes.color=l.parseColor(a.nodes.color))}if(a.groups)for(var c in a.groups)a.groups.hasOwnProperty(c)&&this.groups.add(c,a.groups[c]);if(a.tooltip){for(b in a.tooltip)a.tooltip.hasOwnProperty(b)&&(this.constants.tooltip[b]=a.tooltip[b]);
a.tooltip.color&&(this.constants.tooltip.color=l.parseColor(a.tooltip.color))}}this._loadPhysicsSystem();this._loadNavigationControls();this._loadManipulationSystem();this._configureSmoothCurves();this._createKeyBinds();this.setSize(this.width,this.height);this.moving=!0;this.start()};t.prototype._create=function(){for(;this.containerElement.hasChildNodes();)this.containerElement.removeChild(this.containerElement.firstChild);this.frame=document.createElement("div");this.frame.className="graph-frame";
this.frame.style.position="relative";this.frame.style.overflow="hidden";this.frame.canvas=document.createElement("canvas");this.frame.canvas.style.position="relative";this.frame.appendChild(this.frame.canvas);if(!this.frame.canvas.getContext){var a=document.createElement("DIV");a.style.color="red";a.style.fontWeight="bold";a.style.padding="10px";a.innerHTML="Error: your browser does not support HTML canvas";this.frame.canvas.appendChild(a)}this.drag={};this.pinch={};this.hammer=Q(this.frame.canvas,
{prevent_default:!0});this.hammer.on("tap",this._onTap.bind(this));this.hammer.on("doubletap",this._onDoubleTap.bind(this));this.hammer.on("hold",this._onHold.bind(this));this.hammer.on("pinch",this._onPinch.bind(this));this.hammer.on("touch",this._onTouch.bind(this));this.hammer.on("dragstart",this._onDragStart.bind(this));this.hammer.on("drag",this._onDrag.bind(this));this.hammer.on("dragend",this._onDragEnd.bind(this));this.hammer.on("release",this._onRelease.bind(this));this.hammer.on("mousewheel",
this._onMouseWheel.bind(this));this.hammer.on("DOMMouseScroll",this._onMouseWheel.bind(this));this.hammer.on("mousemove",this._onMouseMoveTitle.bind(this));this.containerElement.appendChild(this.frame)};t.prototype._createKeyBinds=function(){this.mousetrap=ja;this.mousetrap.reset();!0==this.constants.keyboard.enabled&&(this.mousetrap.bind("up",this._moveUp.bind(this),"keydown"),this.mousetrap.bind("up",this._yStopMoving.bind(this),"keyup"),this.mousetrap.bind("down",this._moveDown.bind(this),"keydown"),
this.mousetrap.bind("down",this._yStopMoving.bind(this),"keyup"),this.mousetrap.bind("left",this._moveLeft.bind(this),"keydown"),this.mousetrap.bind("left",this._xStopMoving.bind(this),"keyup"),this.mousetrap.bind("right",this._moveRight.bind(this),"keydown"),this.mousetrap.bind("right",this._xStopMoving.bind(this),"keyup"),this.mousetrap.bind("=",this._zoomIn.bind(this),"keydown"),this.mousetrap.bind("=",this._stopZoom.bind(this),"keyup"),this.mousetrap.bind("-",this._zoomOut.bind(this),"keydown"),
this.mousetrap.bind("-",this._stopZoom.bind(this),"keyup"),this.mousetrap.bind("[",this._zoomIn.bind(this),"keydown"),this.mousetrap.bind("[",this._stopZoom.bind(this),"keyup"),this.mousetrap.bind("]",this._zoomOut.bind(this),"keydown"),this.mousetrap.bind("]",this._stopZoom.bind(this),"keyup"),this.mousetrap.bind("pageup",this._zoomIn.bind(this),"keydown"),this.mousetrap.bind("pageup",this._stopZoom.bind(this),"keyup"),this.mousetrap.bind("pagedown",this._zoomOut.bind(this),"keydown"),this.mousetrap.bind("pagedown",
this._stopZoom.bind(this),"keyup"));!0==this.constants.dataManipulation.enabled&&(this.mousetrap.bind("escape",this._createManipulatorBar.bind(this)),this.mousetrap.bind("del",this._deleteSelected.bind(this)))};t.prototype._getPointer=function(a){return{x:a.pageX-T.util.getAbsoluteLeft(this.frame.canvas),y:a.pageY-T.util.getAbsoluteTop(this.frame.canvas)}};t.prototype._onTouch=function(a){this.drag.pointer=this._getPointer(a.gesture.center);this.drag.pinched=!1;this.pinch.scale=this._getScale();this._handleTouch(this.drag.pointer)};
t.prototype._onDragStart=function(){this._handleDragStart()};t.prototype._handleDragStart=function(){var a=this.drag,b=this._getNodeAt(a.pointer);a.dragging=!0;a.selection=[];a.translation=this._getTranslation();a.nodeId=null;if(null!=b){a.nodeId=b.id;b.isSelected()||this._selectObject(b,!1);for(var c in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(c)){var b=this.selectionObj.nodes[c],e={id:b.id,node:b,x:b.x,y:b.y,xFixed:b.xFixed,yFixed:b.yFixed};b.xFixed=!0;b.yFixed=!0;a.selection.push(e)}}};
t.prototype._onDrag=function(a){this._handleOnDrag(a)};t.prototype._handleOnDrag=function(a){if(!this.drag.pinched){a=this._getPointer(a.gesture.center);var b=this,c=this.drag,e=c.selection;if(e&&e.length){var d=a.x-c.pointer.x,f=a.y-c.pointer.y;e.forEach(function(a){var c=a.node;a.xFixed||(c.x=b._XconvertDOMtoCanvas(b._XconvertCanvasToDOM(a.x)+d));a.yFixed||(c.y=b._YconvertDOMtoCanvas(b._YconvertCanvasToDOM(a.y)+f))});this.moving||(this.moving=!0,this.start())}else!0==this.constants.moveable&&(this._setTranslation(this.drag.translation.x+
(a.x-this.drag.pointer.x),this.drag.translation.y+(a.y-this.drag.pointer.y)),this._redraw(),this.moving=!0,this.start());this.emit("drag")}};t.prototype._onDragEnd=function(){this.drag.dragging=!1;var a=this.drag.selection;a&&a.forEach(function(a){a.node.xFixed=a.xFixed;a.node.yFixed=a.yFixed})};t.prototype._onTap=function(a){this.pointerPosition=a=this._getPointer(a.gesture.center);this._handleTap(a)};t.prototype._onDoubleTap=function(a){a=this._getPointer(a.gesture.center);this._handleDoubleTap(a)};
t.prototype._onHold=function(a){this.pointerPosition=a=this._getPointer(a.gesture.center);this._handleOnHold(a)};t.prototype._onRelease=function(a){a=this._getPointer(a.gesture.center);this._handleOnRelease(a)};t.prototype._onPinch=function(a){var b=this._getPointer(a.gesture.center);this.drag.pinched=!0;"scale"in this.pinch||(this.pinch.scale=1);this._zoom(this.pinch.scale*a.gesture.scale,b)};t.prototype._zoom=function(a,b){if(!0==this.constants.zoomable){var c=this._getScale();1E-5>a&&(a=1E-5);
10<a&&(a=10);var e=this._getTranslation(),d=a/c,f=(1-d)*b.x+e.x*d,e=(1-d)*b.y+e.y*d;this.areaCenter={x:this._XconvertDOMtoCanvas(b.x),y:this._YconvertDOMtoCanvas(b.y)};this._setScale(a);this._setTranslation(f,e);this.updateClustersDefault();this._redraw();c<a?this.emit("zoom",{direction:"+"}):this.emit("zoom",{direction:"-"});return a}};t.prototype._onMouseWheel=function(a){var b=0;a.wheelDelta?b=a.wheelDelta/120:a.detail&&(b=-a.detail/3);if(b){var c=this._getScale(),e=b/10;0>b&&(e/=1-e);c*=1+e;b=
l.fakeGesture(this,a);b=this._getPointer(b.center);this._zoom(c,b)}a.preventDefault()};t.prototype._onMouseMoveTitle=function(a){a=l.fakeGesture(this,a);var b=this._getPointer(a.center);this.popupNode&&this._checkHidePopup(b);var c=this;a=function(){c._checkShowPopup(b)};this.popupTimer&&clearInterval(this.popupTimer);this.drag.dragging||(this.popupTimer=setTimeout(a,this.constants.tooltip.delay))};t.prototype._checkShowPopup=function(a){var b={left:this._XconvertDOMtoCanvas(a.x),top:this._YconvertDOMtoCanvas(a.y),
right:this._XconvertDOMtoCanvas(a.x),bottom:this._YconvertDOMtoCanvas(a.y)},c,e=this.popupNode;if(void 0==this.popupNode){var d=this.nodes;for(c in d)if(d.hasOwnProperty(c)){var f=d[c];if(void 0!==f.getTitle()&&f.isOverlappingWith(b)){this.popupNode=f;break}}}if(void 0===this.popupNode)for(c in d=this.edges,d)if(d.hasOwnProperty(c)&&(f=d[c],f.connected&&void 0!==f.getTitle()&&f.isOverlappingWith(b))){this.popupNode=f;break}this.popupNode?this.popupNode!=e&&(this.popup||(this.popup=new W(this.frame,
this.constants.tooltip)),this.popup.setPosition(a.x-3,a.y-3),this.popup.setText(this.popupNode.getTitle()),this.popup.show()):this.popup&&this.popup.hide()};t.prototype._checkHidePopup=function(a){this.popupNode&&this._getNodeAt(a)||(this.popupNode=void 0,this.popup&&this.popup.hide())};t.prototype.setSize=function(a,b){this.frame.style.width=a;this.frame.style.height=b;this.frame.canvas.style.width="100%";this.frame.canvas.style.height="100%";this.frame.canvas.width=this.frame.canvas.clientWidth;
this.frame.canvas.height=this.frame.canvas.clientHeight;void 0!==this.manipulationDiv&&(this.manipulationDiv.style.width=this.frame.canvas.clientWidth+"px");void 0!==this.navigationDivs&&void 0!==this.navigationDivs.wrapper&&(this.navigationDivs.wrapper.style.width=this.frame.canvas.clientWidth+"px",this.navigationDivs.wrapper.style.height=this.frame.canvas.clientHeight+"px");this.emit("resize",{width:this.frame.canvas.width,height:this.frame.canvas.height})};t.prototype._setNodes=function(a){var b=
this.nodesData;if(a instanceof m||a instanceof u)this.nodesData=a;else if(a instanceof Array)this.nodesData=new m,this.nodesData.add(a);else{if(a)throw new TypeError("Array or DataSet expected");this.nodesData=new m}b&&l.forEach(this.nodesListeners,function(a,c){b.off(c,a)});this.nodes={};if(this.nodesData){var c=this;l.forEach(this.nodesListeners,function(a,b){c.nodesData.on(b,a)});a=this.nodesData.getIds();this._addNodes(a)}this._updateSelection()};t.prototype._addNodes=function(a){for(var b,c=
0,e=a.length;c<e;c++){b=a[c];var d=this.nodesData.get(b),d=new r(d,this.images,this.groups,this.constants);this.nodes[b]=d;if(!(!1!=d.xFixed&&!1!=d.yFixed||null!==d.x&&null!==d.y)){b=1*a.length;var f=2*Math.PI*Math.random();!1==d.xFixed&&(d.x=b*Math.cos(f));!1==d.yFixed&&(d.y=b*Math.sin(f))}this.moving=!0}this._updateNodeIndexList();!0==this.constants.hierarchicalLayout.enabled&&!1==this.initializing&&(this._resetLevels(),this._setupHierarchicalLayout());this._updateCalculationNodes();this._reconnectEdges();
this._updateValueRange(this.nodes);this.updateLabels()};t.prototype._updateNodes=function(a){for(var b=this.nodes,c=this.nodesData,e=0,d=a.length;e<d;e++){var f=a[e],h=b[f],l=c.get(f);h?h.setProperties(l,this.constants):(h=new r(properties,this.images,this.groups,this.constants),b[f]=h)}this.moving=!0;!0==this.constants.hierarchicalLayout.enabled&&!1==this.initializing&&(this._resetLevels(),this._setupHierarchicalLayout());this._updateNodeIndexList();this._reconnectEdges();this._updateValueRange(b)};
t.prototype._removeNodes=function(a){for(var b=this.nodes,c=0,e=a.length;c<e;c++)delete b[a[c]];this._updateNodeIndexList();!0==this.constants.hierarchicalLayout.enabled&&!1==this.initializing&&(this._resetLevels(),this._setupHierarchicalLayout());this._updateCalculationNodes();this._reconnectEdges();this._updateSelection();this._updateValueRange(b)};t.prototype._setEdges=function(a){var b=this.edgesData;if(a instanceof m||a instanceof u)this.edgesData=a;else if(a instanceof Array)this.edgesData=
new m,this.edgesData.add(a);else{if(a)throw new TypeError("Array or DataSet expected");this.edgesData=new m}b&&l.forEach(this.edgesListeners,function(a,c){b.off(c,a)});this.edges={};if(this.edgesData){var c=this;l.forEach(this.edgesListeners,function(a,b){c.edgesData.on(b,a)});a=this.edgesData.getIds();this._addEdges(a)}this._reconnectEdges()};t.prototype._addEdges=function(a){for(var b=this.edges,c=this.edgesData,e=0,d=a.length;e<d;e++){var f=a[e],h=b[f];h&&h.disconnect();h=c.get(f,{showInternalIds:!0});
b[f]=new y(h,this,this.constants)}this.moving=!0;this._updateValueRange(b);this._createBezierNodes();!0==this.constants.hierarchicalLayout.enabled&&!1==this.initializing&&(this._resetLevels(),this._setupHierarchicalLayout());this._updateCalculationNodes()};t.prototype._updateEdges=function(a){for(var b=this.edges,c=this.edgesData,e=0,d=a.length;e<d;e++){var f=a[e],h=c.get(f),l=b[f];l?(l.disconnect(),l.setProperties(h,this.constants),l.connect()):(l=new y(h,this,this.constants),this.edges[f]=l)}this._createBezierNodes();
!0==this.constants.hierarchicalLayout.enabled&&!1==this.initializing&&(this._resetLevels(),this._setupHierarchicalLayout());this.moving=!0;this._updateValueRange(b)};t.prototype._removeEdges=function(a){for(var b=this.edges,c=0,e=a.length;c<e;c++){var d=a[c],f=b[d];f&&(null!=f.via&&delete this.sectors.support.nodes[f.via.id],f.disconnect(),delete b[d])}this.moving=!0;this._updateValueRange(b);!0==this.constants.hierarchicalLayout.enabled&&!1==this.initializing&&(this._resetLevels(),this._setupHierarchicalLayout());
this._updateCalculationNodes()};t.prototype._reconnectEdges=function(){var a,b=this.nodes,c=this.edges;for(a in b)b.hasOwnProperty(a)&&(b[a].edges=[]);for(a in c)c.hasOwnProperty(a)&&(b=c[a],b.from=null,b.to=null,b.connect())};t.prototype._updateValueRange=function(a){var b,c=void 0,e=void 0;for(b in a)if(a.hasOwnProperty(b)){var d=a[b].getValue();void 0!==d&&(c=void 0===c?d:Math.min(d,c),e=void 0===e?d:Math.max(d,e))}if(void 0!==c&&void 0!==e)for(b in a)a.hasOwnProperty(b)&&a[b].setValueRange(c,
e)};t.prototype.redraw=function(){this.setSize(this.width,this.height);this._redraw()};t.prototype._redraw=function(){var a=this.frame.canvas.getContext("2d");a.clearRect(0,0,this.frame.canvas.width,this.frame.canvas.height);a.save();a.translate(this.translation.x,this.translation.y);a.scale(this.scale,this.scale);this.canvasTopLeft={x:this._XconvertDOMtoCanvas(0),y:this._YconvertDOMtoCanvas(0)};this.canvasBottomRight={x:this._XconvertDOMtoCanvas(this.frame.canvas.clientWidth),y:this._YconvertDOMtoCanvas(this.frame.canvas.clientHeight)};
this._doInAllSectors("_drawAllSectorNodes",a);this._doInAllSectors("_drawEdges",a);this._doInAllSectors("_drawNodes",a,!1);a.restore()};t.prototype._setTranslation=function(a,b){void 0===this.translation&&(this.translation={x:0,y:0});void 0!==a&&(this.translation.x=a);void 0!==b&&(this.translation.y=b);this.emit("viewChanged")};t.prototype._getTranslation=function(){return{x:this.translation.x,y:this.translation.y}};t.prototype._setScale=function(a){this.scale=a};t.prototype._getScale=function(){return this.scale};
t.prototype._XconvertDOMtoCanvas=function(a){return(a-this.translation.x)/this.scale};t.prototype._XconvertCanvasToDOM=function(a){return a*this.scale+this.translation.x};t.prototype._YconvertDOMtoCanvas=function(a){return(a-this.translation.y)/this.scale};t.prototype._YconvertCanvasToDOM=function(a){return a*this.scale+this.translation.y};t.prototype.canvasToDOM=function(a){return{x:this._XconvertCanvasToDOM(a.x),y:this._YconvertCanvasToDOM(a.y)}};t.prototype.DOMtoCanvas=function(a){return{x:this._XconvertDOMtoCanvas(a.x),
y:this._YconvertDOMtoCanvas(a.y)}};t.prototype._drawNodes=function(a,b){void 0===b&&(b=!1);var c=this.nodes,e=[],d;for(d in c)c.hasOwnProperty(d)&&(c[d].setScaleAndPos(this.scale,this.canvasTopLeft,this.canvasBottomRight),c[d].isSelected()?e.push(d):(c[d].inArea()||b)&&c[d].draw(a));d=0;for(var f=e.length;d<f;d++)(c[e[d]].inArea()||b)&&c[e[d]].draw(a)};t.prototype._drawEdges=function(a){var b=this.edges,c;for(c in b)if(b.hasOwnProperty(c)){var e=b[c];e.setScale(this.scale);e.connected&&b[c].draw(a)}};
t.prototype._stabilize=function(){!0==this.constants.freezeForStabilization&&this._freezeDefinedNodes();for(var a=0;this.moving&&a<this.constants.stabilizationIterations;)this._physicsTick(),a++;this.zoomExtent(!1,!0);!0==this.constants.freezeForStabilization&&this._restoreFrozenNodes();this.emit("stabilized",{iterations:a})};t.prototype._freezeDefinedNodes=function(){var a=this.nodes,b;for(b in a)a.hasOwnProperty(b)&&null!=a[b].x&&null!=a[b].y&&(a[b].fixedData.x=a[b].xFixed,a[b].fixedData.y=a[b].yFixed,
a[b].xFixed=!0,a[b].yFixed=!0)};t.prototype._restoreFrozenNodes=function(){var a=this.nodes,b;for(b in a)a.hasOwnProperty(b)&&null!=a[b].fixedData.x&&(a[b].xFixed=a[b].fixedData.x,a[b].yFixed=a[b].fixedData.y)};t.prototype._isMoving=function(a){var b=this.nodes,c;for(c in b)if(b.hasOwnProperty(c)&&b[c].isMoving(a))return!0;return!1};t.prototype._discreteStepNodes=function(){var a=this.physicsDiscreteStepsize,b=this.nodes,c,e=!1;if(0<this.constants.maxVelocity)for(c in b)b.hasOwnProperty(c)&&(b[c].discreteStepLimited(a,
this.constants.maxVelocity),e=!0);else for(c in b)b.hasOwnProperty(c)&&(b[c].discreteStep(a),e=!0);!0==e&&(a=this.constants.minVelocity/Math.max(this.scale,.05),this.moving=a>.5*this.constants.maxVelocity?!0:this._isMoving(a))};t.prototype._physicsTick=function(){!this.freezeSimulation&&this.moving&&(this._doInAllActiveSectors("_initializeForceCalculation"),this._doInAllActiveSectors("_discreteStepNodes"),this.constants.smoothCurves&&this._doInSupportSector("_discreteStepNodes"),this._findCenter(this._getRange()))};
t.prototype._animationStep=function(){this.timer=void 0;this._handleNavigation();this.start();var a=Date.now(),b=1;this._physicsTick();for(var c=Date.now()-a;c<this.renderTimestep-this.renderTime&&b<this.maxPhysicsTicksPerRender;)this._physicsTick(),c=Date.now()-a,b++;a=Date.now();this._redraw();this.renderTime=Date.now()-a};"undefined"!==typeof window&&(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame);
t.prototype.start=function(){if(this.moving||0!=this.xIncrement||0!=this.yIncrement||0!=this.zoomIncrement){if(!this.timer){var a=navigator.userAgent.toLowerCase(),b=!1;-1!=a.indexOf("msie 9.0")?b=!0:-1!=a.indexOf("safari")&&-1>=a.indexOf("chrome")&&(b=!0);this.timer=!0==b?window.setTimeout(this._animationStep.bind(this),this.renderTimestep):window.requestAnimationFrame(this._animationStep.bind(this),this.renderTimestep)}}else this._redraw()};t.prototype._handleNavigation=function(){if(0!=this.xIncrement||
0!=this.yIncrement){var a=this._getTranslation();this._setTranslation(a.x+this.xIncrement,a.y+this.yIncrement)}0!=this.zoomIncrement&&this._zoom(this.scale*(1+this.zoomIncrement),{x:this.frame.canvas.clientWidth/2,y:this.frame.canvas.clientHeight/2})};t.prototype.toggleFreeze=function(){!1==this.freezeSimulation?this.freezeSimulation=!0:(this.freezeSimulation=!1,this.start())};t.prototype._configureSmoothCurves=function(a){void 0===a&&(a=!0);if(!0==this.constants.smoothCurves)this._createBezierNodes();
else{this.sectors.support.nodes={};for(var b in this.edges)this.edges.hasOwnProperty(b)&&(this.edges[b].smooth=!1,this.edges[b].via=null)}this._updateCalculationNodes();a||(this.moving=!0,this.start())};t.prototype._createBezierNodes=function(){if(!0==this.constants.smoothCurves)for(var a in this.edges)if(this.edges.hasOwnProperty(a)){var b=this.edges[a];if(null==b.via){b.smooth=!0;var c="edgeId:".concat(b.id);this.sectors.support.nodes[c]=new r({id:c,mass:1,shape:"circle",image:"",internalMultiplier:1},
{},{},this.constants);b.via=this.sectors.support.nodes[c];b.via.parentEdgeId=b.id;b.positionBezierNode()}}};t.prototype._initializeMixinLoaders=function(){for(var a in n)n.hasOwnProperty(a)&&(t.prototype[a]=n[a])};t.prototype.storePosition=function(){var a=[],b;for(b in this.nodes)if(this.nodes.hasOwnProperty(b)){var c=this.nodes[b],e=!this.nodes.xFixed,d=!this.nodes.yFixed;this.nodesData.data[b].x==Math.round(c.x)&&this.nodesData.data[b].y==Math.round(c.y)||a.push({id:b,x:Math.round(c.x),y:Math.round(c.y),
allowedToMoveX:e,allowedToMoveY:d})}this.nodesData.update(a)};var T={util:l,moment:H,DataSet:m,DataView:u,Range:d,stack:V,TimeStep:k,components:{items:{Item:I,ItemBox:N,ItemPoint:E,ItemRange:G},Component:C,Panel:f,RootPanel:h,ItemSet:p,TimeAxis:v},graph:{Node:r,Edge:y,Popup:W,Groups:A,Images:Z},Timeline:F,Graph:t};"undefined"!==typeof O&&(O=T);"undefined"!==typeof M&&"undefined"!==typeof M.exports&&(M.exports=T);"undefined"!==typeof window&&(window.vis=T)},{"emitter-component":2,hammerjs:3,moment:4,
mousetrap:5}],2:[function(B,M,O){function m(u){if(u){for(var k in m.prototype)u[k]=m.prototype[k];return u}}M.exports=m;m.prototype.on=m.prototype.addEventListener=function(m,k){this._callbacks=this._callbacks||{};(this._callbacks[m]=this._callbacks[m]||[]).push(k);return this};m.prototype.once=function(m,k){function d(){B.off(m,d);k.apply(this,arguments)}var B=this;this._callbacks=this._callbacks||{};d.fn=k;this.on(m,d);return this};m.prototype.off=m.prototype.removeListener=m.prototype.removeAllListeners=
m.prototype.removeEventListener=function(m,k){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var d=this._callbacks[m];if(!d)return this;if(1==arguments.length)return delete this._callbacks[m],this;for(var B,K=0;K<d.length;K++)if(B=d[K],B===k||B.fn===k){d.splice(K,1);break}return this};m.prototype.emit=function(m){this._callbacks=this._callbacks||{};var k=[].slice.call(arguments,1),d=this._callbacks[m];if(d)for(var d=d.slice(0),B=0,K=d.length;B<K;++B)d[B].apply(this,
k);return this};m.prototype.listeners=function(m){this._callbacks=this._callbacks||{};return this._callbacks[m]||[]};m.prototype.hasListeners=function(m){return!!this.listeners(m).length}},{}],3:[function(B,M,O){(function(m,u){function k(){if(!d.READY){d.event.determineEventTypes();for(var f in d.gestures)d.gestures.hasOwnProperty(f)&&d.detection.register(d.gestures[f]);d.event.onTouch(d.DOCUMENT,d.EVENT_MOVE,d.detection.detect);d.event.onTouch(d.DOCUMENT,d.EVENT_END,d.detection.detect);d.READY=!0}}
var d=function(f,h){return new d.Instance(f,h||{})};d.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};d.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled;d.HAS_TOUCHEVENTS="ontouchstart"in m;d.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i;d.NO_MOUSEEVENTS=d.HAS_TOUCHEVENTS&&navigator.userAgent.match(d.MOBILE_REGEX);d.EVENT_TYPES={};d.DIRECTION_DOWN="down";
d.DIRECTION_LEFT="left";d.DIRECTION_UP="up";d.DIRECTION_RIGHT="right";d.POINTER_MOUSE="mouse";d.POINTER_TOUCH="touch";d.POINTER_PEN="pen";d.EVENT_START="start";d.EVENT_MOVE="move";d.EVENT_END="end";d.DOCUMENT=document;d.plugins={};d.READY=!1;d.Instance=function(f,h){var v=this;k();this.element=f;this.enabled=!0;this.options=d.utils.extend(d.utils.extend({},d.defaults),h||{});this.options.stop_browser_behavior&&d.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior);d.event.onTouch(f,
d.EVENT_START,function(f){v.enabled&&d.detection.startDetect(v,f)});return this};d.Instance.prototype={on:function(d,h){for(var k=d.split(" "),m=0;m<k.length;m++)this.element.addEventListener(k[m],h,!1);return this},off:function(d,h){for(var k=d.split(" "),m=0;m<k.length;m++)this.element.removeEventListener(k[m],h,!1);return this},trigger:function(f,h){var k=d.DOCUMENT.createEvent("Event");k.initEvent(f,!0,!0);k.gesture=h;var m=this.element;d.utils.hasParent(h.target,m)&&(m=h.target);m.dispatchEvent(k);
return this},enable:function(d){this.enabled=d;return this}};var B=null,K=!1,C=!1;d.event={bindDom:function(d,h,k){h=h.split(" ");for(var m=0;m<h.length;m++)d.addEventListener(h[m],k,!1)},onTouch:function(f,h,k){var m=this;this.bindDom(f,d.EVENT_TYPES[h],function(s){var p=s.type.toLowerCase();if(!p.match(/mouse/)||!C){if(p.match(/touch/)||p.match(/pointerdown/)||p.match(/mouse/)&&1===s.which)K=!0;p.match(/touch|pointer/)&&(C=!0);var u=0;K&&(d.HAS_POINTEREVENTS&&h!=d.EVENT_END?u=d.PointerEvent.updatePointer(h,
s):p.match(/touch/)?u=s.touches.length:C||(u=p.match(/up/)?0:1),0<u&&h==d.EVENT_END?h=d.EVENT_MOVE:u||(h=d.EVENT_END),u||null===B?B=s:s=B,k.call(d.detection,m.collectEventData(f,h,s)),d.HAS_POINTEREVENTS&&h==d.EVENT_END&&(u=d.PointerEvent.updatePointer(h,s)));u||(B=null,C=K=!1,d.PointerEvent.reset())}})},determineEventTypes:function(){var f;f=d.HAS_POINTEREVENTS?d.PointerEvent.getEvents():d.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove",
"touchend touchcancel mouseup"];d.EVENT_TYPES[d.EVENT_START]=f[0];d.EVENT_TYPES[d.EVENT_MOVE]=f[1];d.EVENT_TYPES[d.EVENT_END]=f[2]},getTouchList:function(f){return d.HAS_POINTEREVENTS?d.PointerEvent.getTouchList():f.touches?f.touches:[{identifier:1,pageX:f.pageX,pageY:f.pageY,target:f.target}]},collectEventData:function(f,h,k){f=this.getTouchList(k,h);var m=d.POINTER_TOUCH;if(k.type.match(/mouse/)||d.PointerEvent.matchType(d.POINTER_MOUSE,k))m=d.POINTER_MOUSE;return{center:d.utils.getCenter(f),timeStamp:(new Date).getTime(),
target:k.target,touches:f,eventType:h,pointerType:m,srcEvent:k,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation();this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return d.detection.stopDetect()}}}};d.PointerEvent={pointers:{},getTouchList:function(){var d=this,h=[];Object.keys(d.pointers).sort().forEach(function(k){h.push(d.pointers[k])});return h},updatePointer:function(f,
h){f==d.EVENT_END?this.pointers={}:(h.identifier=h.pointerId,this.pointers[h.pointerId]=h);return Object.keys(this.pointers).length},matchType:function(f,h){if(!h.pointerType)return!1;var k={};k[d.POINTER_MOUSE]=h.pointerType==h.MSPOINTER_TYPE_MOUSE||h.pointerType==d.POINTER_MOUSE;k[d.POINTER_TOUCH]=h.pointerType==h.MSPOINTER_TYPE_TOUCH||h.pointerType==d.POINTER_TOUCH;k[d.POINTER_PEN]=h.pointerType==h.MSPOINTER_TYPE_PEN||h.pointerType==d.POINTER_PEN;return k[f]},getEvents:function(){return["pointerdown MSPointerDown",
"pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}};d.utils={extend:function(d,h,k){for(var m in h)d[m]!==u&&k||(d[m]=h[m]);return d},hasParent:function(d,h){for(;d;){if(d==h)return!0;d=d.parentNode}return!1},getCenter:function(d){for(var h=[],k=[],m=0,s=d.length;m<s;m++)h.push(d[m].pageX),k.push(d[m].pageY);return{pageX:(Math.min.apply(Math,h)+Math.max.apply(Math,h))/2,pageY:(Math.min.apply(Math,k)+Math.max.apply(Math,k))/2}},getVelocity:function(d,
h,k){return{x:Math.abs(h/d)||0,y:Math.abs(k/d)||0}},getAngle:function(d,h){return 180*Math.atan2(h.pageY-d.pageY,h.pageX-d.pageX)/Math.PI},getDirection:function(f,h){var k=Math.abs(f.pageX-h.pageX),m=Math.abs(f.pageY-h.pageY);return k>=m?0<f.pageX-h.pageX?d.DIRECTION_LEFT:d.DIRECTION_RIGHT:0<f.pageY-h.pageY?d.DIRECTION_UP:d.DIRECTION_DOWN},getDistance:function(d,h){var k=h.pageX-d.pageX,m=h.pageY-d.pageY;return Math.sqrt(k*k+m*m)},getScale:function(d,h){return 2<=d.length&&2<=h.length?this.getDistance(h[0],
h[1])/this.getDistance(d[0],d[1]):1},getRotation:function(d,h){return 2<=d.length&&2<=h.length?this.getAngle(h[1],h[0])-this.getAngle(d[1],d[0]):0},isVertical:function(f){return f==d.DIRECTION_UP||f==d.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(d,h){var k,m="webkit khtml moz ms o ".split(" ");if(h&&d.style){for(var s=0;s<m.length;s++)for(var p in h)h.hasOwnProperty(p)&&(k=p,m[s]&&(k=m[s]+k.substring(0,1).toUpperCase()+k.substring(1)),d.style[k]=h[p]);"none"==h.userSelect&&(d.onselectstart=
function(){return!1})}}};d.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(f,h){this.current||(this.stopped=!1,this.current={inst:f,startEvent:d.utils.extend({},h),lastEvent:!1,name:""},this.detect(h))},detect:function(f){if(this.current&&!this.stopped){f=this.extendEventData(f);for(var h=this.current.inst.options,k=0,m=this.gestures.length;k<m;k++){var s=this.gestures[k];if(!this.stopped&&!1!==h[s.name]&&!1===s.handler.call(s,f,this.current.inst)){this.stopDetect();
break}}this.current&&(this.current.lastEvent=f);f.eventType==d.EVENT_END&&!f.touches.length-1&&this.stopDetect();return f}},stopDetect:function(){this.previous=d.utils.extend({},this.current);this.current=null;this.stopped=!0},extendEventData:function(f){var h=this.current.startEvent;if(h&&(f.touches.length!=h.touches.length||f.touches===h.touches)){h.touches=[];for(var k=0,m=f.touches.length;k<m;k++)h.touches.push(d.utils.extend({},f.touches[k]))}var k=f.timeStamp-h.timeStamp,m=f.center.pageX-h.center.pageX,
s=f.center.pageY-h.center.pageY,p=d.utils.getVelocity(k,m,s);d.utils.extend(f,{deltaTime:k,deltaX:m,deltaY:s,velocityX:p.x,velocityY:p.y,distance:d.utils.getDistance(h.center,f.center),angle:d.utils.getAngle(h.center,f.center),direction:d.utils.getDirection(h.center,f.center),scale:d.utils.getScale(h.touches,f.touches),rotation:d.utils.getRotation(h.touches,f.touches),startEvent:h});return f},register:function(f){var h=f.defaults||{};h[f.name]===u&&(h[f.name]=!0);d.utils.extend(d.defaults,h,!0);f.index=
f.index||1E3;this.gestures.push(f);this.gestures.sort(function(d,f){return d.index<f.index?-1:d.index>f.index?1:0});return this.gestures}};d.gestures=d.gestures||{};d.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(f,h){switch(f.eventType){case d.EVENT_START:clearTimeout(this.timer);d.detection.current.name=this.name;this.timer=setTimeout(function(){"hold"==d.detection.current.name&&h.trigger("hold",f)},h.options.hold_timeout);break;case d.EVENT_MOVE:f.distance>
h.options.hold_threshold&&clearTimeout(this.timer);break;case d.EVENT_END:clearTimeout(this.timer)}}};d.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(f,h){if(f.eventType==d.EVENT_END){var k=d.detection.previous,m=!1;f.deltaTime>h.options.tap_max_touchtime||f.distance>h.options.tap_max_distance||(k&&"tap"==k.name&&f.timeStamp-k.lastEvent.timeStamp<h.options.doubletap_interval&&f.distance<
h.options.doubletap_distance&&(h.trigger("doubletap",f),m=!0),m&&!h.options.tap_always)||(d.detection.current.name="tap",h.trigger(d.detection.current.name,f))}}};d.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(f,h){f.eventType!=d.EVENT_END||0<h.options.swipe_max_touches&&f.touches.length>h.options.swipe_max_touches||!(f.velocityX>h.options.swipe_velocity||f.velocityY>h.options.swipe_velocity)||(h.trigger(this.name,f),h.trigger(this.name+f.direction,
f))}};d.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(f,h){if(d.detection.current.name!=this.name&&this.triggered)h.trigger(this.name+"end",f),this.triggered=!1;else if(!(0<h.options.drag_max_touches&&f.touches.length>h.options.drag_max_touches))switch(f.eventType){case d.EVENT_START:this.triggered=!1;break;case d.EVENT_MOVE:if(f.distance<
h.options.drag_min_distance&&d.detection.current.name!=this.name)break;d.detection.current.name=this.name;if(d.detection.current.lastEvent.drag_locked_to_axis||h.options.drag_lock_to_axis&&h.options.drag_lock_min_distance<=f.distance)f.drag_locked_to_axis=!0;var k=d.detection.current.lastEvent.direction;f.drag_locked_to_axis&&k!==f.direction&&(d.utils.isVertical(k)?f.direction=0>f.deltaY?d.DIRECTION_UP:d.DIRECTION_DOWN:f.direction=0>f.deltaX?d.DIRECTION_LEFT:d.DIRECTION_RIGHT);this.triggered||(h.trigger(this.name+
"start",f),this.triggered=!0);h.trigger(this.name,f);h.trigger(this.name+f.direction,f);(h.options.drag_block_vertical&&d.utils.isVertical(f.direction)||h.options.drag_block_horizontal&&!d.utils.isVertical(f.direction))&&f.preventDefault();break;case d.EVENT_END:this.triggered&&h.trigger(this.name+"end",f),this.triggered=!1}}};d.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(f,h){if(d.detection.current.name!=
this.name&&this.triggered)h.trigger(this.name+"end",f),this.triggered=!1;else if(!(2>f.touches.length))switch(h.options.transform_always_block&&f.preventDefault(),f.eventType){case d.EVENT_START:this.triggered=!1;break;case d.EVENT_MOVE:var k=Math.abs(1-f.scale),m=Math.abs(f.rotation);if(k<h.options.transform_min_scale&&m<h.options.transform_min_rotation)break;d.detection.current.name=this.name;this.triggered||(h.trigger(this.name+"start",f),this.triggered=!0);h.trigger(this.name,f);m>h.options.transform_min_rotation&&
h.trigger("rotate",f);k>h.options.transform_min_scale&&(h.trigger("pinch",f),h.trigger("pinch"+(1>f.scale?"in":"out"),f));break;case d.EVENT_END:this.triggered&&h.trigger(this.name+"end",f),this.triggered=!1}}};d.gestures.Touch={name:"touch",index:-Infinity,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(f,h){h.options.prevent_mouseevents&&f.pointerType==d.POINTER_MOUSE?f.stopDetect():(h.options.prevent_default&&f.preventDefault(),f.eventType==d.EVENT_START&&h.trigger(this.name,
f))}};d.gestures.Release={name:"release",index:Infinity,handler:function(f,h){f.eventType==d.EVENT_END&&h.trigger(this.name,f)}};"object"===typeof M&&"object"===typeof M.exports?M.exports=d:(m.Hammer=d,"function"===typeof m.define&&m.define.amd&&m.define("hammer",[],function(){return d}))})(this)},{}],4:[function(B,M,O){var m="undefined"!==typeof self?self:"undefined"!==typeof window?window:{};(function(u){function k(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,
invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function d(a,b){var c=!0;return v(function(){c&&(!1===n.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+a),c=!1);return b.apply(this,arguments)},b)}function O(a,b){return function(c){return s(a.call(this,c),b)}}function K(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function C(){}function f(a){W(a);v(this,a)}function h(a){a=G(a);var b=a.year||0,c=a.quarter||
0,e=a.month||0,d=a.week||0,f=a.day||0;this._milliseconds=+(a.millisecond||0)+1E3*(a.second||0)+6E4*(a.minute||0)+36E5*(a.hour||0);this._days=+f+7*d;this._months=+e+3*c+12*b;this._data={};this._bubble()}function v(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);b.hasOwnProperty("toString")&&(a.toString=b.toString);b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf);return a}function D(a){return 0>a?Math.ceil(a):Math.floor(a)}function s(a,b,c){for(var e=""+Math.abs(a);e.length<b;)e="0"+e;return(0<=
a?c?"+":"":"-")+e}function p(a,b,c,e){var d=b._milliseconds,f=b._days;b=b._months;e=null==e?!0:e;d&&a._d.setTime(+a._d+d*c);f&&na(a,"Date",ga(a,"Date")+f*c);b&&ma(a,ga(a,"Month")+b*c);e&&n.updateOffset(a,f||b)}function I(a){return"[object Array]"===Object.prototype.toString.call(a)}function N(a,b,c){var e=Math.min(a.length,b.length),d=Math.abs(a.length-b.length),f=0,g;for(g=0;g<e;g++)(c&&a[g]!==b[g]||!c&&x(a[g])!==x(b[g]))&&f++;return f+d}function E(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,
"$1");a=Va[a]||Wa[b]||b}return a}function G(a){var b={},c,e;for(e in a)a.hasOwnProperty(e)&&(c=E(e))&&(b[c]=a[e]);return b}function R(a){var b,c;if(0===a.indexOf("week"))b=7,c="day";else if(0===a.indexOf("month"))b=12,c="month";else return;n[a]=function(e,d){var f,g,h=n.fn._lang[a],k=[];"number"===typeof e&&(d=e,e=u);g=function(a){a=n().utc().set(c,a);return h.call(n.fn._lang,a,e||"")};if(null!=d)return g(d);for(f=0;f<b;f++)k.push(g(f));return k}}function x(a){a=+a;var b=0;0!==a&&isFinite(a)&&(b=
0<=a?Math.floor(a):Math.ceil(a));return b}function F(a,b){return(new Date(Date.UTC(a,b+1,0))).getUTCDate()}function r(a,b,c){return X(n([a,11,31+b-c]),b,c).week}function y(a){return 0===a%4&&0!==a%100||0===a%400}function W(a){var d;a._a&&-2===a._pf.overflow&&(d=0>a._a[c]||11<a._a[c]?c:1>a._a[e]||a._a[e]>F(a._a[b],a._a[c])?e:0>a._a[g]||23<a._a[g]?g:0>a._a[w]||59<a._a[w]?w:0>a._a[q]||59<a._a[q]?q:0>a._a[ha]||999<a._a[ha]?ha:-1,a._pf._overflowDayOfYear&&(d<b||d>e)&&(d=e),a._pf.overflow=d)}function A(a){null==
a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&0>a._pf.overflow&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length));return a._isValid}function Z(a){return a?a.toLowerCase().replace("_","-"):a}function ia(a,b){return b._isUTC?n(a).zone(b._offset||0):n(a).local()}function S(a){var b=0,c,e,d,f,g=function(a){if(!ba[a]&&Aa)try{B("./lang/"+a)}catch(b){}return ba[a]};
if(!a)return n.fn._lang;if(!I(a)){if(e=g(a))return e;a=[a]}for(;b<a.length;){f=Z(a[b]).split("-");c=f.length;for(d=(d=Z(a[b+1]))?d.split("-"):null;0<c;){if(e=g(f.slice(0,c).join("-")))return e;if(d&&d.length>=c&&N(f,d,!0)>=c-1)break;c--}b++}return n.fn._lang}function qa(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function da(a){var b=a.match(ya),c,e;c=0;for(e=b.length;c<e;c++)b[c]=Y[b[c]]?Y[b[c]]:qa(b[c]);return function(d){var f="";for(c=0;c<e;c++)f+=b[c]instanceof
Function?b[c].call(d,a):b[c];return f}}function L(a,b){if(!a.isValid())return a.lang().invalidDate();b=t(b,a.lang());ua[b]||(ua[b]=da(b));return ua[b](a)}function t(a,b){function c(a){return b.longDateFormat(a)||a}var e=5;for(la.lastIndex=0;0<=e&&la.test(a);)a=a.replace(la,c),la.lastIndex=0,e-=1;return a}function H(a,b){var c=b._strict;switch(a){case "Q":return Ba;case "DDDD":return Da;case "YYYY":case "GGGG":case "gggg":return c?Sa:Na;case "Y":case "G":case "g":return Ua;case "YYYYYY":case "YYYYY":case "GGGGG":case "ggggg":return c?
Ta:Oa;case "S":if(c)return Ba;case "SS":if(c)return Ca;case "SSS":if(c)return Da;case "DDD":return Ma;case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":return Pa;case "a":case "A":return S(b._l)._meridiemParse;case "X":return Qa;case "Z":case "ZZ":return ra;case "T":return La;case "SSSS":return z;case "MM":case "DD":case "YY":case "GG":case "gg":case "HH":case "hh":case "mm":case "ss":case "ww":case "WW":return c?Ca:Ea;case "M":case "D":case "d":case "H":case "h":case "m":case "s":case "w":case "W":case "e":case "E":return Ea;
case "Do":return Ra;default:var c=RegExp,e;e=l(a.replace("\\","")).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return new c(e)}}function $(a){a=(a||"").match(ra)||[];a=((a[a.length-1]||[])+"").match(Xa)||["-",0,0];var b=+(60*a[1])+x(a[2]);return"+"===a[0]?-b:b}function Q(a){var d,f=[],h,k,l,m,q;if(!a._d){h=ja(a);a._w&&null==a._a[e]&&null==a._a[c]&&(d=function(c){var e=parseInt(c,10);return c?3>c.length?68<e?1900+e:2E3+e:e:null==a._a[b]?n().weekYear():a._a[b]},k=a._w,null!=k.GG||null!=k.W||null!=k.E?
d=fa(d(k.GG),k.W||1,k.E,4,1):(l=S(a._l),m=null!=k.d?J(k.d,l):null!=k.e?parseInt(k.e,10)+l._week.dow:0,q=parseInt(k.w,10)||1,null!=k.d&&m<l._week.dow&&q++,d=fa(d(k.gg),q,m,l._week.doy,l._week.dow)),a._a[b]=d.year,a._dayOfYear=d.dayOfYear);a._dayOfYear&&(d=null==a._a[b]?h[b]:a._a[b],a._dayOfYear>(y(d)?366:365)&&(a._pf._overflowDayOfYear=!0),d=V(d,0,a._dayOfYear),a._a[c]=d.getUTCMonth(),a._a[e]=d.getUTCDate());for(d=0;3>d&&null==a._a[d];++d)a._a[d]=f[d]=h[d];for(;7>d;d++)a._a[d]=f[d]=null==a._a[d]?2===
d?1:0:a._a[d];f[g]+=x((a._tzm||0)/60);f[w]+=x((a._tzm||0)%60);a._d=(a._useUTC?V:aa).apply(null,f)}}function ja(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function ka(a){a._a=[];a._pf.empty=!0;var d=S(a._l),f=""+a._i,h,k,l,m,y=f.length,p=0;k=t(a._f,d).match(ya)||[];for(d=0;d<k.length;d++){l=k[d];if(h=(f.match(H(l,a))||[])[0])m=f.substr(0,f.indexOf(h)),0<m.length&&a._pf.unusedInput.push(m),f=f.slice(f.indexOf(h)+
h.length),p+=h.length;if(Y[l]){h?a._pf.empty=!1:a._pf.unusedTokens.push(l);m=a;var A=void 0,r=m._a;switch(l){case "Q":null!=h&&(r[c]=3*(x(h)-1));break;case "M":case "MM":null!=h&&(r[c]=x(h)-1);break;case "MMM":case "MMMM":A=S(m._l).monthsParse(h);null!=A?r[c]=A:m._pf.invalidMonth=h;break;case "D":case "DD":null!=h&&(r[e]=x(h));break;case "Do":null!=h&&(r[e]=x(parseInt(h,10)));break;case "DDD":case "DDDD":null!=h&&(m._dayOfYear=x(h));break;case "YY":r[b]=n.parseTwoDigitYear(h);break;case "YYYY":case "YYYYY":case "YYYYYY":r[b]=
x(h);break;case "a":case "A":m._isPm=S(m._l).isPM(h);break;case "H":case "HH":case "h":case "hh":r[g]=x(h);break;case "m":case "mm":r[w]=x(h);break;case "s":case "ss":r[q]=x(h);break;case "S":case "SS":case "SSS":case "SSSS":r[ha]=x(1E3*("0."+h));break;case "X":m._d=new Date(1E3*parseFloat(h));break;case "Z":case "ZZ":m._useUTC=!0;m._tzm=$(h);break;case "w":case "ww":case "W":case "WW":case "d":case "dd":case "ddd":case "dddd":case "e":case "E":l=l.substr(0,1);case "gg":case "gggg":case "GG":case "GGGG":case "GGGGG":l=
l.substr(0,2),h&&(m._w=m._w||{},m._w[l]=h)}}else a._strict&&!h&&a._pf.unusedTokens.push(l)}a._pf.charsLeftOver=y-p;0<f.length&&a._pf.unusedInput.push(f);a._isPm&&12>a._a[g]&&(a._a[g]+=12);!1===a._isPm&&12===a._a[g]&&(a._a[g]=0);Q(a);W(a)}function l(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,e,d){return b||c||e||d})}function aa(a,b,c,e,d,f,g){b=new Date(a,b,c,e,d,f,g);1970>a&&b.setFullYear(a);return b}function V(a){var b=new Date(Date.UTC.apply(null,arguments));1970>a&&
b.setUTCFullYear(a);return b}function J(a,b){if("string"===typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!==typeof a)return null}else a=parseInt(a,10);return a}function sa(a,b,c,e,d){return d.relativeTime(b||1,!!c,a,e)}function X(a,b,c){b=c-b;c-=a.day();c>b&&(c-=7);c<b-7&&(c+=7);a=n(a).add("d",c);return{week:Math.ceil(a.dayOfYear()/7),year:a.year()}}function fa(a,b,c,e,d){var f=V(a,0,1).getUTCDay();b=7*(b-1)+((null!=c?c:d)-d)+(d-f+(f>e?7:0)-(f<d?7:0))+1;return{year:0<b?a:a-1,dayOfYear:0<b?
b:(y(a-1)?366:365)+b}}function ea(a){var b=a._i,c=a._f;if(null===b||c===u&&""===b)return n.invalid({nullInput:!0});"string"===typeof b&&(a._i=b=S().preparse(b));if(n.isMoment(b)){a=b;var e={},d;for(d in a)a.hasOwnProperty(d)&&za.hasOwnProperty(d)&&(e[d]=a[d]);a=e;a._d=new Date(+b._d)}else if(c)if(I(c)){var b=a,g,h;if(0===b._f.length)b._pf.invalidFormat=!0,b._d=new Date(NaN);else{for(d=0;d<b._f.length;d++)if(c=0,e=v({},b),e._pf=k(),e._f=b._f[d],ka(e),A(e)&&(c+=e._pf.charsLeftOver,c+=10*e._pf.unusedTokens.length,
e._pf.score=c,null==h||c<h))h=c,g=e;v(b,g||e)}}else ka(a);else if(e=a,g=e._i,h=Ja.exec(g),g===u)e._d=new Date;else if(h)e._d=new Date(+h[1]);else if("string"===typeof g)if(b=e._i,d=Ya.exec(b)){e._pf.iso=!0;g=0;for(h=va.length;g<h;g++)if(va[g][1].exec(b)){e._f=va[g][0]+(d[6]||" ");break}g=0;for(h=wa.length;g<h;g++)if(wa[g][1].exec(b)){e._f+=wa[g][0];break}b.match(ra)&&(e._f+="Z");ka(e)}else n.createFromInputFallback(e);else I(g)?(e._a=g.slice(0),Q(e)):"[object Date]"===Object.prototype.toString.call(g)||
g instanceof Date?e._d=new Date(+g):"object"===typeof g?e._d||(g=G(e._i),e._a=[g.year,g.month,g.day,g.hour,g.minute,g.second,g.millisecond],Q(e)):"number"===typeof g?e._d=new Date(g):n.createFromInputFallback(e);return new f(a)}function ma(a,b){var c;if("string"===typeof b&&(b=a.lang().monthsParse(b),"number"!==typeof b))return a;c=Math.min(a.date(),F(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a}function ga(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function na(a,b,c){return"Month"===
b?ma(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function U(a,b){return function(c){return null!=c?(na(this,a,c),n.updateOffset(this,b),this):ga(this,a)}}function ta(a){n.duration.fn[a]=function(){return this._data[a]}}function oa(a,b){n.duration.fn["as"+a]=function(){return+this/b}}for(var n,T="undefined"!==typeof m?m:this,P=Math.round,a,b=0,c=1,e=2,g=3,w=4,q=5,ha=6,ba={},za={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},Aa="undefined"!==typeof M&&
M.exports,Ja=/^\/?Date\((\-?\d+)/i,Ka=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ia=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,ya=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,la=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Ea=/\d\d?/,Ma=/\d{1,3}/,Na=/\d{1,4}/,Oa=/[+\-]?\d{1,6}/,z=/\d+/,Pa=
/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ra=/Z|[\+\-]\d\d:?\d\d/gi,La=/T/i,Qa=/[\+\-]?\d+(\.\d{1,3})?/,Ra=/\d{1,2}/,Ba=/\d/,Ca=/\d\d/,Da=/\d{3}/,Sa=/\d{4}/,Ta=/[+-]?\d{6}/,Ua=/[+-]?\d+/,Ya=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,va=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],
["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],wa=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Xa=/([\+\-]|\d\d)/gi,xa={Milliseconds:1,Seconds:1E3,Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},Va={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Wa=
{dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},ua={},Fa="DDD w W M D d".split(" "),Ga="MDHhmswW".split(""),Y={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,
a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return s(this.year()%100,2)},YYYY:function(){return s(this.year(),4)},YYYYY:function(){return s(this.year(),5)},YYYYYY:function(){var a=this.year();return(0<=a?"+":"-")+s(Math.abs(a),6)},gg:function(){return s(this.weekYear()%100,2)},gggg:function(){return s(this.weekYear(),4)},ggggg:function(){return s(this.weekYear(),5)},GG:function(){return s(this.isoWeekYear()%
100,2)},GGGG:function(){return s(this.isoWeekYear(),4)},GGGGG:function(){return s(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return x(this.milliseconds()/
100)},SS:function(){return s(x(this.milliseconds()/10),2)},SSS:function(){return s(this.milliseconds(),3)},SSSS:function(){return s(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";0>a&&(a=-a,b="-");return b+s(x(a/60),2)+":"+s(x(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";0>a&&(a=-a,b="-");return b+s(x(a/60),2)+s(x(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Ha=["months",
"monthsShort","weekdays","weekdaysShort","weekdaysMin"];Fa.length;)a=Fa.pop(),Y[a+"o"]=K(Y[a],a);for(;Ga.length;)a=Ga.pop(),Y[a+a]=O(Y[a],2);Y.DDDD=O(Y.DDD,3);v(C.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"===typeof b?this[c]=b:this["_"+c]=b},_months:"January February March April May June July August September October November December".split(" "),months:function(a){return this._months[a.month()]},_monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),monthsShort:function(a){return this._monthsShort[a.month()]},
monthsParse:function(a){var b,c;this._monthsParse||(this._monthsParse=[]);for(b=0;12>b;b++)if(this._monthsParse[b]||(c=n.utc([2E3,b]),c="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(c.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},
_weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c;this._weekdaysParse||(this._weekdaysParse=[]);for(b=0;7>b;b++)if(this._weekdaysParse[b]||(c=n([2E3,1]).day(b),c="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(c.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",
LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b);return b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",
lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"===typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,e){var d=this._relativeTime[c];return"function"===typeof d?d(a,b,c,e):d.replace(/%d/i,a)},pastFuture:function(a,b){var c=
this._relativeTime[0<a?"future":"past"];return"function"===typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return X(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}});n=function(a,b,c,e){var d;"boolean"===typeof c&&(e=c,c=u);d={_isAMomentObject:!0};d._i=a;d._f=b;d._l=c;d._strict=
e;d._isUTC=!1;d._pf=k();return ea(d)};n.suppressDeprecationWarnings=!1;n.createFromInputFallback=d("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i)});n.utc=function(a,b,c,e){var d;"boolean"===typeof c&&(e=c,c=u);d={_isAMomentObject:!0,_useUTC:!0,_isUTC:!0};d._l=c;d._i=a;d._f=b;d._strict=e;d._pf=k();return ea(d).utc()};n.unix=function(a){return n(1E3*
a)};n.duration=function(a,b){var c=a,d=null,f;if(n.isDuration(a))c={ms:a._milliseconds,d:a._days,M:a._months};else if("number"===typeof a)c={},b?c[b]=a:c.milliseconds=a;else if(d=Ka.exec(a))f="-"===d[1]?-1:1,c={y:0,d:x(d[e])*f,h:x(d[g])*f,m:x(d[w])*f,s:x(d[q])*f,ms:x(d[ha])*f};else if(d=Ia.exec(a))f="-"===d[1]?-1:1,c=function(a){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*f},c={y:c(d[2]),M:c(d[3]),d:c(d[4]),h:c(d[5]),m:c(d[6]),s:c(d[7]),w:c(d[8])};d=new h(c);n.isDuration(a)&&a.hasOwnProperty("_lang")&&
(d._lang=a._lang);return d};n.version="2.6.0";n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";n.momentProperties=za;n.updateOffset=function(){};n.lang=function(a,b){if(!a)return n.fn._lang._abbr;if(b){var c=Z(a);b.abbr=c;ba[c]||(ba[c]=new C);ba[c].set(b)}else null===b?(delete ba[a],a="en"):ba[a]||S(a);return(n.duration.fn._lang=n.fn._lang=S(a))._abbr};n.langData=function(a){a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr);return S(a)};n.isMoment=function(a){return a instanceof f||null!=a&&a.hasOwnProperty("_isAMomentObject")};
n.isDuration=function(a){return a instanceof h};for(a=Ha.length-1;0<=a;--a)R(Ha[a]);n.normalizeUnits=function(a){return E(a)};n.invalid=function(a){var b=n.utc(NaN);null!=a?v(b._pf,a):b._pf.userInvalidated=!0;return b};n.parseZone=function(){return n.apply(null,arguments).parseZone()};n.parseTwoDigitYear=function(a){return x(a)+(68<x(a)?1900:2E3)};v(n.fn=f.prototype,{clone:function(){return n(this)},valueOf:function(){return+this._d+6E4*(this._offset||0)},unix:function(){return Math.floor(+this/1E3)},
toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=n(this).utc();return 0<a.year()&&9999>=a.year()?L(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):L(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){return[this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds(),this.milliseconds()]},isValid:function(){return A(this)},isDSTShifted:function(){return this._a?
this.isValid()&&0<N(this._a,(this._isUTC?n.utc(this._a):n(this._a)).toArray()):!1},parsingFlags:function(){return v({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){this.zone(0);this._isUTC=!1;return this},format:function(a){a=L(this,a||n.defaultFormat);return this.lang().postformat(a)},add:function(a,b){var c;c="string"===typeof a?n.duration(+b,a):n.duration(a,b);p(this,c,1);return this},subtract:function(a,b){var c;c="string"===typeof a?
n.duration(+b,a):n.duration(a,b);p(this,c,-1);return this},diff:function(a,b,c){a=ia(a,this);var d=6E4*(this.zone()-a.zone()),e;b=E(b);"year"===b||"month"===b?(e=432E5*(this.daysInMonth()+a.daysInMonth()),d=12*(this.year()-a.year())+(this.month()-a.month()),d+=(this-n(this).startOf("month")-(a-n(a).startOf("month")))/e,d-=6E4*(this.zone()-n(this).startOf("month").zone()-(a.zone()-n(a).startOf("month").zone()))/e,"year"===b&&(d/=12)):(e=this-a,d="second"===b?e/1E3:"minute"===b?e/6E4:"hour"===b?e/36E5:
"day"===b?(e-d)/864E5:"week"===b?(e-d)/6048E5:e);return c?d:D(d)},from:function(a,b){return n.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(n(),a)},calendar:function(){var a=ia(n(),this).startOf("day"),a=this.diff(a,"days",!0),a=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.lang().calendar(a,this))},isLeapYear:function(){return y(this.year())},isDST:function(){return this.zone()<
this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=J(a,this.lang()),this.add({d:a-b})):b},month:U("Month",!0),startOf:function(a){a=E(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===a?this.weekday(0):"isoWeek"===
a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this},endOf:function(a){a=E(a);return this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){b="undefined"!==typeof b?b:"millisecond";return+this.clone().startOf(b)>+n(a).startOf(b)},isBefore:function(a,b){b="undefined"!==typeof b?b:"millisecond";return+this.clone().startOf(b)<+n(a).startOf(b)},isSame:function(a,b){b=b||"ms";return+this.clone().startOf(b)===+ia(a,this).startOf(b)},min:function(a){a=
n.apply(null,arguments);return a<this?this:a},max:function(a){a=n.apply(null,arguments);return a>this?this:a},zone:function(a,b){var c=this._offset||0;if(null!=a)"string"===typeof a&&(a=$(a)),16>Math.abs(a)&&(a*=60),this._offset=a,this._isUTC=!0,c!==a&&(!b||this._changeInProgress?p(this,n.duration(c-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null));else return this._isUTC?c:this._d.getTimezoneOffset();return this},zoneAbbr:function(){return this._isUTC?
"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){this._tzm?this.zone(this._tzm):"string"===typeof this._i&&this.zone(this._i);return this},hasAlignedHourOffset:function(a){a=a?n(a).zone():0;return 0===(this.zone()-a)%60},daysInMonth:function(){return F(this.year(),this.month())},dayOfYear:function(a){var b=P((n(this).startOf("day")-n(this).startOf("year"))/864E5)+1;return null==a?b:this.add("d",a-b)},quarter:function(a){return null==a?Math.ceil((this.month()+
1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=X(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=X(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=X(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",
a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return r(this.year(),1,4)},weeksInYear:function(){var a=this._lang._week;return r(this.year(),a.dow,a.doy)},get:function(a){a=E(a);return this[a]()},set:function(a,b){a=E(a);if("function"===typeof this[a])this[a](b);return this},lang:function(a){if(a===u)return this._lang;this._lang=S(a);return this}});n.fn.millisecond=n.fn.milliseconds=U("Milliseconds",!1);n.fn.second=n.fn.seconds=U("Seconds",
!1);n.fn.minute=n.fn.minutes=U("Minutes",!1);n.fn.hour=n.fn.hours=U("Hours",!0);n.fn.date=U("Date",!0);n.fn.dates=d("dates accessor is deprecated. Use date instead.",U("Date",!0));n.fn.year=U("FullYear",!0);n.fn.years=d("years accessor is deprecated. Use year instead.",U("FullYear",!0));n.fn.days=n.fn.day;n.fn.months=n.fn.month;n.fn.weeks=n.fn.week;n.fn.isoWeeks=n.fn.isoWeek;n.fn.quarters=n.fn.quarter;n.fn.toJSON=n.fn.toISOString;v(n.duration.fn=h.prototype,{_bubble:function(){var a=this._milliseconds,
b=this._days,c=this._months,d=this._data;d.milliseconds=a%1E3;a=D(a/1E3);d.seconds=a%60;a=D(a/60);d.minutes=a%60;a=D(a/60);d.hours=a%24;b+=D(a/24);d.days=b%30;c+=D(b/30);d.months=c%12;b=D(c/12);d.years=b},weeks:function(){return D(this.days()/7)},valueOf:function(){return this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*x(this._months/12)},humanize:function(a){var b=+this,c;c=!a;var d=this.lang(),e=P(Math.abs(b)/1E3),f=P(e/60),g=P(f/60),h=P(g/24),k=P(h/365),e=45>e&&["s",e]||1===
f&&["m"]||45>f&&["mm",f]||1===g&&["h"]||22>g&&["hh",g]||1===h&&["d"]||25>=h&&["dd",h]||45>=h&&["M"]||345>h&&["MM",P(h/30)]||1===k&&["y"]||["yy",k];e[2]=c;e[3]=0<b;e[4]=d;c=sa.apply({},e);a&&(c=this.lang().pastFuture(b,c));return this.lang().postformat(c)},add:function(a,b){var c=n.duration(a,b);this._milliseconds+=c._milliseconds;this._days+=c._days;this._months+=c._months;this._bubble();return this},subtract:function(a,b){var c=n.duration(a,b);this._milliseconds-=c._milliseconds;this._days-=c._days;
this._months-=c._months;this._bubble();return this},get:function(a){a=E(a);return this[a.toLowerCase()+"s"]()},as:function(a){a=E(a);return this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:n.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1E3);return this.asSeconds()?(0>this.asSeconds()?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+
"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}});for(a in xa)xa.hasOwnProperty(a)&&(oa(a,xa[a]),ta(a.toLowerCase()));oa("Weeks",6048E5);n.duration.fn.asMonths=function(){return(+this-31536E6*this.years())/2592E6+12*this.years()};n.lang("en",{ordinal:function(a){var b=a%10,b=1===x(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});Aa?M.exports=n:"undefined"===typeof ender&&(T.moment=n)}).call(this)},{}],5:[function(B,M,O){function m(d,f,h){if(d.addEventListener)return d.addEventListener(f,
h,!1);d.attachEvent("on"+f,h)}function u(d){return"keypress"==d.type?String.fromCharCode(d.which):D[d.which]?D[d.which]:s[d.which]?s[d.which]:String.fromCharCode(d.which).toLowerCase()}function k(d){d=d||{};var f=!1,h;for(h in R)d[h]?f=!0:R[h]=0;f||(r=!1)}function d(d,f,h,k,m){var p,r,s=[];if(!E[d])return[];"keyup"==h&&C(d)&&(f=[d]);for(p=0;p<E[d].length;++p)if(r=E[d][p],(!r.seq||R[r.seq]==r.level)&&h==r.action){var v;(v="keypress"==h)||(v=r.modifiers,v=f.sort().join(",")===v.sort().join(","));v&&
(k&&r.combo==m&&E[d].splice(p,1),s.push(r))}return s}function ca(d,f){!1===d(f)&&(f.preventDefault&&f.preventDefault(),f.stopPropagation&&f.stopPropagation(),f.returnValue=!1,f.cancelBubble=!0)}function K(f){f.which="number"==typeof f.which?f.which:f.keyCode;var h=u(f);if(h)if("keyup"==f.type&&F==h)F=!1;else{var m=f.target||f.srcElement,p=m.tagName;if(!(-1<(" "+m.className+" ").indexOf(" mousetrap ")?0:"INPUT"==p||"SELECT"==p||"TEXTAREA"==p||m.contentEditable&&"true"==m.contentEditable)){m=[];f.shiftKey&&
m.push("shift");f.altKey&&m.push("alt");f.ctrlKey&&m.push("ctrl");f.metaKey&&m.push("meta");for(var m=d(h,m,f.type),s={},v=!1,p=0;p<m.length;++p)m[p].seq?(v=!0,s[m[p].seq]=1,ca(m[p].callback,f)):v||r||ca(m[p].callback,f);f.type!=r||C(h)||k(s)}}}function C(d){return"shift"==d||"ctrl"==d||"alt"==d||"meta"==d}function f(d,f,h){if(!h){if(!N){N={};for(var k in D)95<k&&112>k||D.hasOwnProperty(k)&&(N[D[k]]=k)}h=N[d]?"keydown":"keypress"}"keypress"==h&&f.length&&(h="keydown");return h}function h(d,h,m,p){R[d]=
0;p||(p=f(h[0],[]));var s=function(f){r=p;++R[d];clearTimeout(x);x=setTimeout(k,1E3)},B=function(d){ca(m,d);"keyup"!==p&&(F=u(d));setTimeout(k,10)},C;for(C=0;C<h.length;++C)v(h[C],C<h.length-1?s:B,p,d,C)}function v(k,m,r,s,v){k=k.replace(/\s+/g," ");var x=k.split(" "),u,B,D=[];if(1<x.length)return h(k,x,m,r);B="+"===k?["+"]:k.split("+");for(x=0;x<B.length;++x)u=B[x],I[u]&&(u=I[u]),r&&"keypress"!=r&&p[u]&&(u=p[u],D.push("shift")),C(u)&&D.push(u);r=f(u,D,r);E[u]||(E[u]=[]);d(u,D,r,!s,k);E[u][s?"unshift":
"push"]({callback:m,modifiers:D,action:r,seq:s,level:v,combo:k})}var D={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},s={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},p={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7",
"*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},I={option:"alt",command:"meta","return":"enter",escape:"esc"},N,E={},G={},R={},x,F=!1,r=!1;for(B=1;20>B;++B)D[111+B]="f"+B;for(B=0;9>=B;++B)D[B+96]=B;m(document,"keypress",K);m(document,"keydown",K);m(document,"keyup",K);M.exports={bind:function(d,f,h){for(var k=d instanceof Array?d:[d],m=0;m<k.length;++m)v(k[m],f,h);G[d+":"+h]=f;return this},unbind:function(d,f){G[d+":"+f]&&(delete G[d+":"+f],this.bind(d,function(){},
f));return this},trigger:function(d,f){G[d+":"+f]();return this},reset:function(){E={};G={};return this}}},{}]},{},[1])(1)});
